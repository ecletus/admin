"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){s.fn.qorSliderAfterShow=s.fn.qorSliderAfterShow||{},window.Mustache&&(window.Mustache.tags=["[[","]]"]),s(document).ajaxComplete(function(t,e,i){"POST"!==i.type&&"PUT"!==i.type||s.fn.qorSlideoutBeforeHide&&(s.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)}),s.fn.select2=s.fn.select2||function(){},s.fn.select2.ajaxCommonOptions=function(t){var n=t.remoteDataPrimaryKey,o=t.remoteDataDisplayKey,r=t.remoteDataIconKey;return{dataType:"json",cache:!("false"===t.remoteDataCache),delay:250,data:function(t){return{keyword:t.term||"",page:t.page,per_page:20}},processResults:function(t,e){e.page=e.page||1;var i=s.map(t,function(t){if(t.id=t[n]||t.primaryKey||t.Id||t.ID,!t.text)if(o)t.text=t[o];else if(!(t.text=t.text=t.value||t.Label||t.Value)){var e=[];for(var i in t)"id"!==i.toLowerCase()&&t[i]&&(e[e.length]=t[i]);t.text=e.join(" ")}return r&&(t.icon=t[r],t.icon&&/\.svg/.test(t.icon)&&(t.iconSVG=!0)),t});return{results:i,pagination:{more:20<=i.length}}}}},s.fn.select2.ajaxFormatResult=function(t,e){var i="";return i=0<e.length?window.Mustache.render(e.html().replace(/{{(.*?)}}/g,"[[&$1]]"),t):t.text||t.html||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],/<(.*)(\/>|<\/.+>)/.test(i)?s(i):i}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var a={messages:{common:{recordNotFoundError:"Record not found",ajaxError:"Server error, please try again later!",alert:{ok:"Ok"},confirm:{ok:"Ok",cancel:"Cancel"}}}};(window.QOR=a).showDialog=function(e,t){var i={warning:"warning",error:"error",info:"info",notice:"info"}[(e=s.extend({ok:!0,cancel:!1,okText:a.messages.common.confirm.ok,cancelText:a.messages.common.confirm.cancel,level:"warning",severity:!0},e)).level],n=s('<div id="dialog">\n                  <div class="mdl-dialog-bg"></div>\n                  <div class="mdl-dialog">\n                      <div class="mdl-dialog__content'+(e.severity?" severity_"+e.level+" severity--text":"")+'">\n                        <p><i class="material-icons">'+i+'</i></p>\n                        <p class="mdl-dialog__message dialog-message">'+t+'</p>\n                      </div>\n                      <div class="mdl-dialog__actions">\n                        '+(e.ok?'<button data-ok type="button" class="mdl-button mdl-button--raised mdl-button--colored dialog-ok dialog-button">ok</button>':"")+"\n                        "+(e.cancel?'<button type="button" class="mdl-button dialog-cancel dialog-button" data-cancel>cancel</button>':"")+"\n                      </div>\n                    </div>\n                </div>");e.ok&&s("[data-ok]",n).one("click",function(t){n.remove(),!0!==e.ok&&e.ok(t)}),e.cancel&&s("[data-cancel]",n).one("click",function(t){n.remove(),!0!==e.cancel&&e.cancel(t)}),s(n).appendTo("body"),n.show()},s(function(){var r=window._,o=s('<div id="dialog">\n                  <div class="mdl-dialog-bg"></div>\n                  <div class="mdl-dialog">\n                      <div class="mdl-dialog__content">\n                        <p><i class="material-icons" icon>warning</i></p>\n                        <p class="mdl-dialog__message dialog-message">\n                        </p>\n                      </div>\n                      <div class="mdl-dialog__actions">\n                        <button type="button" class="mdl-button mdl-button--raised mdl-button--colored dialog-ok dialog-button" data-type="confirm">\n                          ok\n                        </button>\n                        <button type="button" class="mdl-button dialog-cancel dialog-button" data-type="">\n                          cancel\n                        </button>\n                      </div>\n                    </div>\n                </div>').appendTo("body");s(document).on("keyup.qor.confirm",function(t){27===t.which&&o.is(":visible")&&setTimeout(function(){o.hide()},100)}).on("click.qor.confirm",".dialog-button",function(){var t=s(this).data("type"),e=a.qorConfirmCallback;return o.hide(),a.qorConfirmCallback=void 0,s.isFunction(e)&&e(t),!1}),a.qorConfirm=function(t,e){var i=o.find(".dialog-ok"),n=o.find(".dialog-cancel").show();return r.isString(t)?(o.find(".dialog-message").text(t),i.text(a.messages.common.confirm.ok),n.text(a.messages.common.confirm.cancel)):r.isObject(t)&&(t.confirmOk&&t.confirmCancel?(i.text(t.confirmOk),n.text(t.confirmCancel)):(i.text(a.messages.common.confirm.ok),n.text(a.messages.common.confirm.cancel)),o.find(".dialog-message").text(t.confirm)),o.show(),a.qorConfirmCallback=e,!1},a.alert=function(t,e){var i=o.find(".dialog-ok");return o.find(".dialog-cancel").hide(),r.isString(t)?(o.find(".dialog-message").html(t),i.text(a.messages.common.alert.ok)):t.jquery?(i.text(a.messages.common.alert.ok),o.find(".dialog-message").html(t)):r.isObject(t)&&(t.ok?i.text(t.ok):i.text(a.messages.common.alert.ok),o.find(".dialog-message").html(t.message)),o.show(),a.qorConfirmCallback=e,!1},a.ajaxError=function(t,e,i){a.alert(a.ajaxErrorString.apply(this,arguments))},a.ajaxErrorString=function(t,e,i){return"<strong>"+a.messages.common.ajaxError+"<strong></strong>:<br/>"+[e,i].join(": ")},a.Xurl=function(t,e){return new Xurl(t,e.valuerOf())},a.submitContinueEditing=function(t){var e=s(t).parents("form"),i=e.attr("action")||window.location.href;if(!/(\?|&)continue_editing=/.test(i)){var n="continue_editing=true";-1===i.indexOf("?")?i+="?"+n:"?"!==i[i.length-1]?i+="&"+n:i+=n}return e.attr("action",i),e.submit(),!1},a.submitValues=function(t){var i=s(t).parents("form"),e=i.attr("action")||window.location.href,n=Array.prototype.slice.call(arguments,1);i.attr("action",e),i.children(':not(.qor-form__actions,input[name="_method"])').trigger("DISABLE").remove();for(var o=function(e){n[e],n[e+1].forEach(function(t){i.append(s('<input type="hidden" name="'+n[e]+'" value="'+t+'">'))})},r=0;r<n.length;r+=2)o(r);return i.submit(),!1},a.prepareFormData=function(t){var e={},i={},n=void 0,o=!0,r=!1,s=void 0;try{for(var a,l=t.entries()[Symbol.iterator]();!(o=(a=l.next()).done);o=!0)if(n=a.value,/\.@enabled$/.test(n[0])){var d=n[0].substring(0,n[0].length-8);e.hasOwnProperty(d)||(e[d]="false"===n[1])}}catch(t){r=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}for(var c in e)if(e[c]){var h=!0,u=!1,f=void 0;try{for(var p,m=t.keys()[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;0===g.indexOf(c)&&(i[g]=1)}}catch(t){u=!0,f=t}finally{try{!h&&m.return&&m.return()}finally{if(u)throw f}}}for(var v in i)t.delete(v);for(var b in e)if(e[b])for(var y in e)b!==y&&0===y.indexOf(b)&&delete e[y];else delete e[b];for(var _ in e)t.append(_+"@enabled","false")},a.SUBMITER="qor.submiter";a.qorAjaxHandleFile=function(t,n,o,e){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.open("POST",t,!0),i.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:n}),e=window.URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=e,i.download=o||"download-"+s.now(),i.click()}else window.alert("server error, please try again!")},r.isObject(e)&&("[object FormData]"!=Object.prototype.toString.call(e)&&(e=function t(e,i){var n=i||new FormData,o=void 0;for(var r in e)e.hasOwnProperty(r)&&e[r]&&(o=r),e[r]instanceof Date?n.append(o,e[r].toISOString()):"object"!==_typeof(e[r])||e[r]instanceof File?n.append(o,e[r]):t(e[r],n);return n}(e)),i.send(e))};function t(){var t=s(".qor-linkify-object"),e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi;t.length&&t.each(function(){var t=s(this).data("video-link");t.match(e)&&s(this).html('<iframe width="100%" height="100%" src="//www.youtube.com/embed/'+t.replace(e,"$1")+'" frameborder="0" allowfullscreen></iframe>')})}(s.fn.qorSliderAfterShow.converVideoLinks=t)(),a.fireEvent=function(t,e){var i;if(t.ownerDocument)i=t.ownerDocument;else{if(9!=t.nodeType)throw new Error("Invalid node passed to fireEvent: "+t.id);i=t}if(t.dispatchEvent){var n="";switch(e){case"click":case"mousedown":case"mouseup":n="MouseEvents";break;case"focus":case"change":case"blur":case"select":n="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+e+"'."}var o="change"!=e;(r=i.createEvent(n)).initEvent(e,o,!0),r.synthetic=!0,t.dispatchEvent(r,!0)}else if(t.fireEvent){var r;(r=i.createEventObject()).synthetic=!0,t.fireEvent("on"+e,r)}}})}),function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(D){var t=D(window),o=window.document,p=D(o),r=window.Number,a="datepicker",i="click."+a,n="keyup."+a,s="focus."+a,e="resize."+a,l="show."+a,d="hide."+a,c="pick."+a,h=/(y|m|d)+/g,u=/\d+/g,f=/^\d{2,4}$/,m=a+"-top-left",g=a+"-bottom-left",v=[m,a+"-top-right",g,a+"-bottom-right"].join(" "),b=a+"-hide",y=Math.min,_=Object.prototype.toString;function q(t){return"string"==typeof t}function $(t){return"number"==typeof t&&!isNaN(t)}function w(t){return void 0===t}function k(t){return"date"===function(t){return _.call(t).slice(8,-1).toLowerCase()}(t)}function x(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):($(e)&&i.push(e),i.slice.apply(t,i))}function E(t,e){var i=x(arguments,2);return function(){return t.apply(e,i.concat(x(arguments)))}}function T(t,e){return[31,function(t){return t%4==0&&t%100!=0||t%400==0}(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function S(t){var e,i,n=String(t).toLowerCase(),o=n.match(h);if(!o||0===o.length)throw new Error("Invalid date format.");for(t={source:n,parts:o},e=o.length,i=0;i<e;i++)switch(o[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}function C(t,e){var i,n,o,r,s,a,l=[];if(k(e))return new Date(e.getFullYear(),e.getMonth(),e.getDate());if(q(e)&&(l=e.match(u)||[]),n=(e=new Date).getFullYear(),o=e.getDate(),r=e.getMonth(),i=t.parts.length,l.length===i)for(a=0;a<i;a++)switch(s=parseInt(l[a],10)||1,t.parts[a]){case"dd":case"d":o=s;break;case"mm":case"m":r=s-1;break;case"yy":n=2e3+s;break;case"yyyy":n=s}return new Date(n,r,o)}function j(t,e){e=D.isPlainObject(e)?e:{},this.$element=D(t),this.options=D.extend({},j.DEFAULTS,QOR.messages.datepicker,e),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}D.extend(!0,QOR.messages,{datepicker:{format:"yyyy-mm-dd",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}),j.formatDate=function(t,e){e||(e=QOR.messages.datepicker.format),q(e)&&(e=S(e));var i,n,o,r,s,a="";if(k(t))for(a=e.source,n=t.getFullYear(),(r={d:t.getDate(),m:t.getMonth()+1,yy:n.toString().substring(2),yyyy:n}).dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,i=e.parts.length,s=0;s<i;s++)o=e.parts[s],a=a.replace(o,r[o]);return a},j.prototype={constructor:j,init:function(){var t=this.options,e=this.$element,i=t.startDate,n=t.endDate,o=t.date;this.$trigger=D(t.trigger||e),this.isInput=e.is("input")||e.is("textarea"),this.isInline=t.inline&&(t.container||!this.isInput),this.format=S(t.format),this.initialValue=this.getValue(),o=this.parseDate(o||this.initialValue),i&&(i=this.parseDate(i),o.getTime()<i.getTime()&&(o=new Date(i)),this.startDate=i),n&&(n=this.parseDate(n),i&&n.getTime()<i.getTime()&&(n=new Date(i)),o.getTime()>n.getTime()&&(o=new Date(n)),this.endDate=n),this.date=o,this.viewDate=new Date(o),this.initialDate=new Date(this.date),this.bind(),(t.autoshow||this.isInline)&&this.show(),t.autopick&&this.pick()},build:function(){var t,e=this.options,i=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=t=D(e.template),this.$week=t.find('[data-view="week"]'),this.$yearsPicker=t.find('[data-view="years picker"]'),this.$yearsPrev=t.find('[data-view="years prev"]'),this.$yearsNext=t.find('[data-view="years next"]'),this.$yearsCurrent=t.find('[data-view="years current"]'),this.$years=t.find('[data-view="years"]'),this.$monthsPicker=t.find('[data-view="months picker"]'),this.$yearPrev=t.find('[data-view="year prev"]'),this.$yearNext=t.find('[data-view="year next"]'),this.$yearCurrent=t.find('[data-view="year current"]'),this.$months=t.find('[data-view="months"]'),this.$daysPicker=t.find('[data-view="days picker"]'),this.$monthPrev=t.find('[data-view="month prev"]'),this.$monthNext=t.find('[data-view="month next"]'),this.$monthCurrent=t.find('[data-view="month current"]'),this.$days=t.find('[data-view="days"]'),this.isInline?D(e.container||i).append(t.addClass("datepicker-inline")):(D(o.body).append(t.addClass("datepicker-dropdown")),t.addClass(b)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var t=this.options,e=this.$element;D.isFunction(t.show)&&e.on(l,t.show),D.isFunction(t.hide)&&e.on(d,t.hide),D.isFunction(t.pick)&&e.on(c,t.pick),this.isInput&&(e.on(n,D.proxy(this.keyup,this)),t.trigger||e.on(s,D.proxy(this.show,this))),this.$trigger.on(i,D.proxy(this.show,this))},unbind:function(){var t=this.options,e=this.$element;D.isFunction(t.show)&&e.off(l,t.show),D.isFunction(t.hide)&&e.off(d,t.hide),D.isFunction(t.pick)&&e.off(c,t.pick),this.isInput&&(e.off(n,this.keyup),t.trigger||e.off(s,this.show)),this.$trigger.off(i,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,n=this.$daysPicker,o=this.format;if(o.hasYear||o.hasMonth||o.hasDay)switch(r(t)){case 2:case"years":i.addClass(b),n.addClass(b),o.hasYear?(this.fillYears(),e.removeClass(b)):this.showView(0);break;case 1:case"months":e.addClass(b),n.addClass(b),o.hasMonth?(this.fillMonths(),i.removeClass(b)):this.showView(2);break;default:e.addClass(b),i.addClass(b),o.hasDay?(this.fillDays(),n.removeClass(b)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,n=p.outerWidth(),o=p.outerHeight(),r=e.outerWidth(),s=e.outerHeight(),a=i.width(),l=i.height(),d=e.offset(),c=d.left,h=d.top,u=parseFloat(t.offset)||10,f=m;l<h&&o<h+s+l?(h-=l+u,f=g):h+=s+u,n<c+a&&(c=c+r-a,f=f.replace("left","right")),i.removeClass(v).addClass(f).css({top:h,left:c,zIndex:parseInt(t.zIndex,10)})},trigger:function(t,e){var i=D.Event(t,e);return this.$element.trigger(i),i},createItem:function(t){var e=this.options,i=e.itemTag,n={text:"",view:"",muted:!1,picked:!1,disabled:!1};return D.extend(n,t),"<"+i+" "+(n.disabled?'class="'+e.disabledClass+'"':n.picked?'class="'+e.pickedClass+'"':n.muted?'class="'+e.mutedClass+'"':"")+(n.view?' data-view="'+n.view+'"':"")+">"+n.text+"</"+i+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){var t,e=this.options,i=parseInt(e.weekStart,10)%7,n=e.daysMin,o="";for(n=D.merge(n.slice(i),n.slice(0,i)),t=0;t<=6;t++)o+=this.createItem({text:n[t]});this.$week.html(o)},fillYears:function(){var t,e=this.options,i=e.disabledClass||"",n=e.yearSuffix||"",o=D.isFunction(e.filter)&&e.filter,r=this.startDate,s=this.endDate,a=this.viewDate,l=a.getFullYear(),d=a.getMonth(),c=a.getDate(),h=this.date,u=h.getFullYear(),f=!1,p=!1,m=!1,g=!1,v=!1,b="";for(t=-5;t<=6;t++)h=new Date(l+t,d,c),v=-5===t||6===t,g=l+t===u,m=!1,r&&(m=h.getFullYear()<r.getFullYear(),-5===t&&(f=m)),!m&&s&&(m=h.getFullYear()>s.getFullYear(),6===t&&(p=m)),!m&&o&&(m=!1===o.call(this.$element,h)),b+=this.createItem({text:l+t,view:m?"year disabled":g?"year picked":"year",muted:v,picked:g,disabled:m});this.$yearsPrev.toggleClass(i,f),this.$yearsNext.toggleClass(i,p),this.$yearsCurrent.toggleClass(i,!0).html(l+-5+n+" - "+(l+6)+n),this.$years.html(b)},fillMonths:function(){var t,e=this.options,i=e.disabledClass||"",n=e.monthsShort,o=D.isFunction(e.filter)&&e.filter,r=this.startDate,s=this.endDate,a=this.viewDate,l=a.getFullYear(),d=a.getDate(),c=this.date,h=c.getFullYear(),u=c.getMonth(),f=!1,p=!1,m=!1,g=!1,v="";for(t=0;t<=11;t++)c=new Date(l,t,d),g=l===h&&t===u,m=!1,r&&(m=(f=c.getFullYear()===r.getFullYear())&&c.getMonth()<r.getMonth()),!m&&s&&(m=(p=c.getFullYear()===s.getFullYear())&&c.getMonth()>s.getMonth()),!m&&o&&(m=!1===o.call(this.$element,c)),v+=this.createItem({index:t,text:n[t],view:m?"month disabled":g?"month picked":"month",picked:g,disabled:m});this.$yearPrev.toggleClass(i,f),this.$yearNext.toggleClass(i,p),this.$yearCurrent.toggleClass(i,f&&p).html(l+e.yearSuffix||""),this.$months.html(v)},fillDays:function(){var t,e,i,n=this.options,o=n.disabledClass||"",r=n.yearSuffix||"",s=n.monthsShort,a=parseInt(n.weekStart,10)%7,l=D.isFunction(n.filter)&&n.filter,d=this.startDate,c=this.endDate,h=this.viewDate,u=h.getFullYear(),f=h.getMonth(),p=u,m=f,g=u,v=f,b=this.date,y=b.getFullYear(),_=b.getMonth(),q=b.getDate(),$=!1,w=!1,k=!1,x=!1,E=[],S=[],C=[];for(0===f?(p-=1,m=11):m-=1,t=T(p,m),(i=(b=new Date(u,f,1)).getDay()-a)<=0&&(i+=7),d&&($=b.getTime()<=d.getTime()),e=t-(i-1);e<=t;e++)b=new Date(p,m,e),k=!1,d&&(k=b.getTime()<d.getTime()),!k&&l&&(k=!1===l.call(this.$element,b)),E.push(this.createItem({text:e,view:"day prev",muted:!0,disabled:k}));for(11===f?(g+=1,v=0):v+=1,t=T(u,f),i=42-(E.length+t),b=new Date(u,f,t),c&&(w=b.getTime()>=c.getTime()),e=1;e<=i;e++)b=new Date(g,v,e),k=!1,c&&(k=b.getTime()>c.getTime()),!k&&l&&(k=!1===l.call(this.$element,b)),S.push(this.createItem({text:e,view:"day next",muted:!0,disabled:k}));for(e=1;e<=t;e++)b=new Date(u,f,e),x=u===y&&f===_&&e===q,k=!1,d&&(k=b.getTime()<d.getTime()),!k&&c&&(k=b.getTime()>c.getTime()),!k&&l&&(k=!1===l.call(this.$element,b)),C.push(this.createItem({text:e,view:k?"day disabled":x?"day picked":"day",picked:x,disabled:k}));this.$monthPrev.toggleClass(o,$),this.$monthNext.toggleClass(o,w),this.$monthCurrent.toggleClass(o,$&&w).html(n.yearFirst?u+r+" "+s[f]:s[f]+" "+u+r),this.$days.html(E.join("")+C.join(" ")+S.join(""))},click:function(t){var e,i,n,o,r,s,a=D(t.target),l=this.viewDate;if(t.stopPropagation(),t.preventDefault(),!a.hasClass("disabled"))switch(e=l.getFullYear(),i=l.getMonth(),n=l.getDate(),s=a.data("view")){case"years prev":case"years next":e="years prev"===s?e-10:e+10,r=a.text(),(o=f.test(r))&&(e=parseInt(r,10),this.date=new Date(e,i,y(n,28))),this.viewDate=new Date(e,i,y(n,28)),this.fillYears(),o&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":e="year prev"===s?e-1:e+1,this.viewDate=new Date(e,i,y(n,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":e=parseInt(a.text(),10),this.date=new Date(e,i,y(n,28)),this.viewDate=new Date(e,i,y(n,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":i="month prev"===s?i-1:"month next"===s?i+1:i,this.viewDate=new Date(e,i,y(n,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":i=D.inArray(a.text(),this.options.monthsShort),this.date=new Date(e,i,y(n,28)),this.viewDate=new Date(e,i,y(n,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":i="day prev"===s?i-1:"day next"===s?i+1:i,n=parseInt(a.text(),10),this.date=new Date(e,i,n),this.viewDate=new Date(e,i,n),this.fillDays(),"day"===s&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,n=this.$trigger[0];i!==o;){if(i===n){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline?this.options.container&&(e=t.text()):e=t.text(),e},setValue:function(t){var e=this.$element;t=q(t)?t:"",this.isInput?e.val(t):this.isInline?this.options.container&&e.text(t):e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger(l).isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(b).on(i,D.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(t.on(e,this._place=E(this.place,this)),p.on(i,this._clickDoc=E(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger(d).isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(b).off(i,this.click),this.isInline||(t.off(e,this._place),p.off(i,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger(c,{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(i=this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(t,e){var i=this.options,n=i.months;return D.isNumeric(t)?t=r(t):w(e)&&(e=t),!0===e&&(n=i.monthsShort),n[$(t)?t:this.date.getMonth()]},getDayName:function(t,e,i){var n=this.options,o=n.days;return D.isNumeric(t)?t=r(t):(w(i)&&(i=e),w(e)&&(e=t)),(o=!0===i?n.daysMin:!0===e?n.daysShort:o)[$(t)?t:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},getDateFormat:function(){return this.options.format},setDate:function(t,e){var i=this.options.filter;if(k(t)||q(t)){if(t=this.parseDate(t),D.isFunction(i)&&!1===i.call(this.$element,t))return;this.date=t,this.viewDate=new Date(t),e||this.pick(),this.isBuilt&&this.fillAll()}},setStartDate:function(t){(k(t)||q(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){(k(t)||q(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){return C(this.format,t)},formatDate:function(t){return j.formatDate(t,this.format)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(a)}},j.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},j.setDefaults=function(t){D.extend(j.DEFAULTS,D.isPlainObject(t)&&t)},j.other=D.fn.qorDatepicker,D.fn.qorDatepicker=function(o){var r,s=x(arguments,1);return this.each(function(){var t,e,i=D(this),n=i.data(a);if(!n){if(/destroy/.test(o))return;t=D.extend({},i.data(),D.isPlainObject(o)&&o),i.data(a,n=new j(this,t))}q(o)&&D.isFunction(e=n[o])&&(r=e.apply(n,s))}),w(r)?this:r},D.fn.qorDatepicker.Constructor=j,D.fn.qorDatepicker.setDefaults=j.setDefaults,D.fn.qorDatepicker.formatDate=j.formatDate,D.fn.qorDatepicker.parseDate=function(t,e){return C(S(t),e)},D.fn.qorDatepicker.noConflict=function(){return D.fn.qorDatepicker=j.other,this},p.data("datepicker",function(t){return t.call(D.fn.qorDatepicker)})}),function(t){"function"==typeof define&&define.amd?define("formValidator",["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var l="remoteFormValidator",t="submit."+l;function d(t,e){e=a.isPlainObject(e)?e:{},this.$el=a(t),this.options=a.extend({},d.DEFAULTS,e),this.key=0,this.validators={},this.validating={},this.phase=0,this.running=0,this.destroyed=!1,this.errors=[],this.init()}d.prototype={constructor:d,init:function(){this.bind()},bind:function(){this.$el.on(t,this.validateOnSubmit.bind(this))},submit:function(t){var e=this.$el.data(QOR.SUBMITER);e?e(t):(this.unbind(),this.$el.submit(),this.bind())},unbind:function(){this.$el.off(t)},validateOnSubmit:function(t){return 0===Object.keys(this.validators).length||this.validate(this.submit.bind(this,t),t)},validate:function(t){var e=void 0,i=0;if(0<Object.keys(this.validating).length)return!1;for(e in this.validators)i++,this.validating[e]=!0;if(0===i)return!0;for(e in this.phase=1,this.validators)this.validating[e]=!0,this._callValidator(e,t);return!1},callValidator:function(t,e){this._callValidator(t,null,e)},_callValidator:function(t,e,i){this.destroyed||this.validators[t](this.validatorDone.bind(this,t,e,i))},done:function(t){0===this.errors.length?t&&t():(QOR.alert(this.errors.join("<hr />")),this.errors=[])},validatorDone:function(t,e,i,n){if(!this.destroyed)if(n&&t in this.validating&&this.errors.push(n),i)i(n);else{for(t in delete this.validating[t],this.validating)return;this.done(e)}},register:function(t,e){var i=this.key++;this.validators[i]=t,e&&e(this.callValidator.bind(this,i))},destroy:function(){this.destroyed=!0,this.unbind(),this.$el.removeData(l)}},d.DEFAULTS={},d.setDefaults=function(t){a.extend(d.DEFAULTS,a.isPlainObject(t)&&t)},d.other=a.fn.formValidator,a.fn.formValidator=function(o){var r=Array.prototype.slice.call(arguments,1),s=void 0;return this.each(function(){var t,e,i=a(this),n=i.data(l);if(!n){if(/destroy/.test(o))return;t=a.extend({},i.data(),a.isPlainObject(o)&&o),i.data(l,n=new d(this,t))}"string"==typeof o&&a.isFunction(e=n[o])&&(s=e.apply(n,r))}),void 0===s?this:s},a.fn.formValidator.Constructor=d,a.fn.formValidator.setDefaults=d.setDefaults,a.fn.formValidator.noConflict=function(){return a.fn.formValidator=d.other,this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(q){q.extend({},QOR.messages,{action:{bulk:{pleaseSelectAnItem:"You must select at least one item."},form:{areYouSure:"This action may not be undone. Are you sure you want to run anyway?"}}},!0);var i=window.Mustache,o="qor.action",t="enable."+o,n="click."+o,r=".qor-actions-bulk",f=".qor-page__header",p=".qor-actions-default",e="a.qor-action--button",m=".qor-table-container",g=".qor-search-container",$="is_undo",v=".qor-action--exit-bulk",w=".qor-slideout";function s(t,e){this.$element=q(t),this.$wrap=q(r),this.options=q.extend({},s.DEFAULTS,q.isPlainObject(e)&&e),this.ajaxForm={},this.init()}return s.prototype={constructor:s,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(n,this.click.bind(this)),this.$wrap.find(v).on(n,this.click.bind(this)),q(document).on(n,".qor-table--bulking tr",this.click.bind(this)).on(n,e,this.actionLink.bind(this))},unbind:function(){this.$element.off(n,this.click),q(document).off(n,".qor-table--bulking tr",this.click).off(n,e,this.actionLink)},initActions:function(){this.tables=q(m).find("table").length,this.tables||(q(".qor-action-bulk-buttons").find("button").attr("disabled",!0),q(e).attr("disabled",!0))},collectFormData:function(){var t=q(".qor-table--bulking").find(".mdl-checkbox__input:checked"),e=[],i=[],n=void 0;return t.length&&t.each(function(){var t=q(this).closest("tr").data("primary-key");n={},t&&(e.push({name:":pk",value:t.toString()}),n[":pk"]=t.toString(),i.push(n))}),this.ajaxForm.formData=e,this.ajaxForm.normalFormData=i,this.ajaxForm},actionLink:function(){if(!q(m).find("table").length)return!1},actionSubmit:function(t){var e=q(t);if((this.$actionButton=e).data().method)return e.data().ajaxForm&&(this.collectFormData(),this.ajaxForm.properties=e.data()),this.submit(),!1},click:function(t){var e=q(t.target),i=q(".qor-page > .qor-page__header"),n=q(".qor-page > .qor-page__body"),o=i.find(".qor-page-subnav__header").length?96:48;if(!(this.$actionButton=e).data().ajaxForm&&(e.is(".qor-action--bulk")&&(this.$wrap.removeClass("hidden"),q(".qor-table__inner-list").remove(),this.appendTableCheckbox(),q(m).addClass("qor-table--bulking"),q(f).find(p).addClass("hidden"),q(f).find(g).addClass("hidden"),i.height()>o&&n.css("padding-top",i.height())),e.is(v)&&(this.$wrap.addClass("hidden"),this.removeTableCheckbox(),q(m).removeClass("qor-table--bulking"),q(f).find(p).removeClass("hidden"),q(f).find(g).removeClass("hidden"),parseInt(n.css("padding-top"))>o&&n.css("padding-top","")),q(this).is("tr")&&!e.is("a"))){var r=q(this).find("td").first();if(r.find(".mdl-checkbox__input").get(0)){var s,a=q("body").hasClass("qor-bottomsheets-open")||q("body").hasClass("qor-slideout-open"),l=r.find(".mdl-js-checkbox"),d=q('[data-toggle="qor-action-slideout"]').find("form"),c=d.find(".js-primary-value"),h=q(this).data("primary-key"),u=c.filter('[value="'+h+'"]');return l.toggleClass("is-checked"),r.parents("tr").toggleClass("is-selected"),s=l.hasClass("is-checked"),r.find("input").prop("checked",s),d.length&&a&&(s&&!u.length&&d.prepend('<input class="js-primary-value" type="hidden" name=":pk" value="'+h+'" />'),!s&&u.length&&u.remove()),!1}}},renderFlashMessage:function(t){var e=s.FLASHMESSAGETMPL;return i.parse(e),i.render(e,t)},submit:function(){var h=this,u=this.$element,f=this.$actionButton,p=this.ajaxForm||{},m=p.properties||f.data(),g=m.url,v=m.undoUrl,b=f.hasClass($),y=f.closest(w).length,r=m.one,_=u&&!y,e={"X-Error-Body":"true"};if(m.disableSuccessRedirection&&(e["X-Disabled-Success-Redirection"]="true"),m.optional||!m.fromIndex||p.formData&&p.formData.length)if(m.passCurrentQuery&&location.search.length&&(g+=-1!==g.indexOf("?")?"&":"?",g+=location.search.substring(1)),m.confirm&&m.ajaxForm&&!m.fromIndex)QOR.qorConfirm(m,function(t){if(t){q.ajax(g,{method:"POST",data:{_method:m.method},headers:e,success:function(t,e,i){if(!m.reloadDisabled){var n=i.getResponseHeader("X-Location");if(n)window.location.href=n;else{var o=m.refreshUrl;o?window.location.href=o:(r&&f.remove(),window.location.reload())}}},error:function(t){QOR.showDialog({level:"error",ok:!0},t.responseText)}})}});else{if(b&&(g=m.undoUrl),m.targetWindow){var i='<form action="'+g+'" method="POST" target="_blank">';this.ajaxForm.formData.forEach(function(t){i+='<input type="hidden" name="'+t.name+'" value="'+t.value+'">'});var t=q(i+="</form>");return q("body").append(t),t.submit(),void t.remove()}q.ajax(g,{method:m.method,data:p.formData,dataType:m.datatype,headers:e,beforeSend:function(){v?f.prop("disabled",!0):_&&h.switchButtons(u,1)},success:function(t,e,i){if(m.readOnly){var n=this.$actionButton.text();q("body").qorBottomSheets("renderResponse",t,{url:g,title:n})}else if(!m.reloadDisabled){var o=i.getResponseHeader("X-Location");if(o)window.location.href=o;else{var r=m.refreshUrl;if(r)window.location.href=r;else{var s=i.getResponseHeader("content-type"),a=i.getResponseHeader("Content-Disposition");if(a&&-1!==a.indexOf("attachment")){var l=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(a),d={},c="";return null!=l&&l[1]&&(c=l[1].replace(/['"]/g,"")),m.method&&(d=q.extend({},p.normalFormData,{_method:m.method})),window.QOR.qorAjaxHandleFile(g,s,c,d),void(v?f.prop("disabled",!1):h.switchButtons(u))}if(v)return u.triggerHandler("undo.qor.action",[f,b,t]),b?f.removeClass($):f.addClass($),void f.prop("disabled",!1);-1<s.indexOf("json")?(q(".qor-alert").remove(),_&&h.switchButtons(u),q(y?w:".mdl-layout__content").find(".qor-page__body").prepend(h.renderFlashMessage(t))):window.location.reload()}}}}.bind(this),error:function(t,e,i){v?f.prop("disabled",!1):_&&h.switchButtons(u),QOR.alert([e,i].join(": "))}.bind(this)})}else QOR.alert(QOR.messages.action.bulk.pleaseSelectAnItem)},switchButtons:function(t,e){var i=!!e;t.find(".qor-action-button").prop("disabled",i)},destroy:function(){this.unbind(),this.$element.removeData(o)},removeTableCheckbox:function(){q(".qor-page__body .mdl-data-table__select").each(function(t,e){q(e).parents("td").remove()}).each(function(t,e){q(e).parents("th").remove()}),q(".qor-table-container tr.is-selected").removeClass("is-selected"),q(".qor-page__body table.mdl-data-table--selectable").removeClass("mdl-data-table--selectable"),q(".qor-page__body tr.is-selected").removeClass("is-selected")},appendTableCheckbox:function(){q(".qor-page__body .mdl-data-table__select").each(function(t,e){q(e).parents("td").remove()}).each(function(t,e){q(e).parents("th").remove()}),q(".qor-table-container tr.is-selected").removeClass("is-selected");var o=q(".qor-page__body table:eq(0)").addClass("mdl-data-table--selectable"),t=o.find("thead tr").length;new window.MaterialDataTable(o.get(0)),o.find("thead :checkbox").closest("th").attr("rowspan",t);var e=o.find("thead.is-hidden tr:first th:first").remove();e.clone().attr("rowspan",t).prependTo(o.find("thead.is-hidden tr:last")),e.prependTo(o.find("thead:not(.is-hidden) tr:last"));var i=o.find("thead:not(.is-fixed) .mdl-checkbox__input"),r=o.is(".qor-table--medialibrary"),s=q("body").hasClass("qor-bottomsheets-open")||q("body").hasClass("qor-slideout-open");r&&(i=q("thead .mdl-checkbox__input")),i.on("click",function(){r||(q(o,"thead.is-fixed tr th").eq(0).find("label").click(),q(this).closest("label").toggleClass("is-checked"));var t=q('[data-toggle="qor-action-slideout"]').find("form"),e=t.find(".js-primary-value");if(t.length&&s)if(q(this).is(":checked")){var i=q(o,"tbody tr"),n=[];i.each(function(){var t=q(this).data("primary-key");t&&(n[n.length]=t)}),0<n.length&&t.prepend('<input class="js-primary-value" type="hidden" name=":pk" value="'+n.join(":")+'" />')}else e.remove()})}},s.FLASHMESSAGETMPL='<div class="qor-alert qor-action-alert qor-alert--success [[#error]]qor-alert--error[[/error]]" [[#message]]data-dismissible="true"[[/message]] role="alert">\n          <button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert">\n            <i class="material-icons">close</i>\n          </button>\n          <span class="qor-alert-message">\n            [[#message]]\n              [[message]]\n            [[/message]]\n            [[#error]]\n              [[error]]\n            [[/error]]\n          </span>\n        </div>',s.DEFAULTS={},q.fn.qorSliderAfterShow.qorActionInit=function(t,e){var i=q(e).find('[data-toggle="qor-action-slideout"]').length,n=q('[data-toggle="qor-action-slideout"]').find("form"),o=q(".qor-page__body .mdl-checkbox__input:checked");if(i&&o.length){var r=[];o.each(function(t,e){var i=q(e).parents("tbody tr").data("primary-key");i&&(r[r.length]=i)}),r.length&&n.prepend('<input class="js-primary-value" type="hidden" name=":pk" value="'+r.join(":")+'" />')}},s.plugin=function(n){return this.each(function(){var t=q(this),e=t.data(o),i=void 0;e||t.data(o,e=new s(this,n)),"string"==typeof n&&q.isFunction(i=e[n])&&i.call(e)})},q(function(){var e={},i='[data-toggle="qor.action.bulk"]';q(document).on("disable.qor.action",function(t){s.plugin.call(q(i,t.target),"destroy")}).on(t,function(t){s.plugin.call(q(i,t.target),e)}).on(n,".qor-table__actions a[data-url],[data-url][data-method=POST],[data-url][data-method=PUT],[data-url][data-method=DELETE]",function(){return(new s).actionSubmit(this),!1}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s=window.location,a=window.QOR,o="qor.advancedsearch",t="enable."+o,e="click."+o;function l(t,e){this.$element=r(t),this.options=r.extend({},l.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return l.prototype={constructor:l,init:function(){this.$form=this.$element.find("form"),this.$modal=r(l.MODAL).appendTo("body"),this.bind()},bind:function(){this.$element.on("submit.qor.advancedsearch","form",this.submit.bind(this)).on(e,".qor-advanced-filter__save",this.showSaveFilter.bind(this)).on(e,".qor-advanced-filter__toggle",this.toggleFilterContent).on(e,".qor-advanced-filter__close",this.closeFilter).on(e,".qor-advanced-filter__delete",this.deleteSavedFilter),this.$modal.on("shown.qor.modal",this.start.bind(this))},closeFilter:function(){r(".qor-advanced-filter__dropdown").hide()},toggleFilterContent:function(t){r(t.target).closest(".qor-advanced-filter__toggle").parent().find(">[advanced-search-toggle]").toggle()},showSaveFilter:function(){this.$modal.qorModal("show")},deleteSavedFilter:function(t){var e=r(t.target).closest(".qor-advanced-filter__delete"),i=e.closest(".qor-advanced-filter__savedfilter"),n=e.data("filter-name"),o=s.pathname;return a.qorConfirm({confirm:"Are you sure you want to delete this saved filter?"},function(t){t&&r.get(o,r.param({delete_saved_filter:n})).done(function(){e.closest("li").remove(),0===i.find("li").length&&i.remove()}).fail(function(){a.qorConfirm("Server error, please try again!")})}),!1},start:function(){this.$modal.trigger("enable.qor.material").on(e,".qor-advanced-filter__savefilter",this.saveFilter.bind(this))},saveFilter:function(){var t=this.$modal.find("#qor-advanced-filter__savename").val();t&&this.$form.prepend('<input type="hidden" name="filter_saving_name" value='+t+"  />").submit()},submit:function(){var t=this.$form,e=t.find("input[name],select[name]"),i=[],n=void 0;if(e.each(function(){i.push(r(this).attr("name"))}),n=function(t){var e=decodeURIComponent(s.search.substr(1)).split("&"),i={},n=void 0,o=void 0;if(1==e.length&&""==e[0])return!1;for(o in e)""!==e[o]&&(n=e[o].split("="),i[n[0]]=n[1]);return t.forEach(function(t){delete i[t]}),i}(i),!r.isEmptyObject(n))for(var o in n)n.hasOwnProperty(o)&&t.prepend('<input type="hidden" name='+o+" value="+n[o]+"  />");this.$element.find(".qor-advanced-filter__dropdown").hide(),this.removeEmptyPairs(t)},removeEmptyPairs:function(t){t.find("advanced-filter-group").each(function(){var t=r(this);""==t.find("[filter-required]").val()&&t.remove()})},unbind:function(){},destroy:function(){this.unbind(),this.$element.removeData(o)}},l.DEFAULTS={},l.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">Save advanced filter</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                        \n                    <div class="mdl-textfield mdl-textfield--full-width mdl-js-textfield">\n                        <input class="mdl-textfield__input" type="text" id="qor-advanced-filter__savename">\n                        <label class="mdl-textfield__label" for="qor-advanced-filter__savename">Please enter name for this filter</label>\n                    </div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-advanced-filter__savefilter">Save This Filter</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">Cancel</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',l.plugin=function(n){return this.each(function(){var t=r(this),e=t.data(o),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(o,e=new l(this,n))}"string"==typeof n&&r.isFunction(i=e[n])&&i.apply(e)})},r(function(){var e='[data-toggle="qor.advancedsearch"]';r(document).on("disable.qor.advancedsearch",function(t){l.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(r(e,t.target),void 0)}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(q){var r="qor.asyncFormSubmiter",t="enable."+r,e="submit."+r;function s(t,e){this.$el=q(t),this.options=q.extend({},s.DEFAULTS,q.isPlainObject(e)&&e),this.init()}function o(t){return 0<t.length&&0===t.parents(".qor-slideout").length}return s.prototype={constructor:s,init:function(){this.bind(),this.successCallbacks=[]},onSuccess:function(t){this.successCallbacks.push(t)},bind:function(){this.$el.bind(e,this.submit.bind(this))},unbind:function(){this.$el.off(e)},destroy:function(){this.unbind(),this.$el.removeData(r)},updateOptions:function(t){this.options=q.extend(this.options,t)},submit:function(t){var e=t.target,m=q(e),g=m.find(":submit"),i=this.options.onBeforeSubmit,v=this.options.onSubmitSuccess,b=this.options.openPage;if(window.FormData){t.preventDefault();var n,y=m.prop("action"),o=/[?|&]continue_editing=true/.test(y),_=new FormData(e);if(t.originalEvent&&t.originalEvent.constructor===SubmitEvent){var r=q(t.originalEvent.submitter),s=r.attr("name"),a=r.attr("value");s&&a&&_.append(s,a)}QOR.prepareFormData(_),o&&(y=y.replace(/([?|&]continue_editing)=true/,"$1_url=true")),n={continueEditing:o,method:m.prop("method"),data:_,dataType:"html",processData:!1,contentType:!1,headers:{"X-Layout":"lite"},beforeSend:function(t,e){g.prop("disabled",!0)},success:function(e,i,n){if(m.parent().find(".qor-error").trigger("disable").remove(),m.closest(".qor-page__body").children("#flashes,.qor-error").trigger("disable").remove(),"render-body"!==n.getResponseHeader("X-Frame-Reload")){var t=n.getResponseHeader("Content-Disposition");if(t&&-1!==t.indexOf("attachment")){var o=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t),r=n.getResponseHeader("Content-Type"),s="";return null!=o&&o[1]&&(s=o[1].replace(/['"]/g,"")),window.QOR.qorAjaxHandleFile(y,r,s,_),void g.prop("disabled",!1)}var a=n.getResponseHeader("X-Location"),l=n.getResponseHeader("X-Location-Window");if(l)window.location.href=l;else{if(a)return q.isFunction(b)?void b(a):void(window.location.href=a);var d=m.data("returnUrl"),c=m.data("refreshUrl");if(c)window.location.href=c;else{if(d)return q.isFunction(b)?void b(d):void(location.href=d);if(q.isFunction(v))return v(e,i,n),void this.successCallbacks.forEach(function(t){return t(e,i,n)});var h="/"+location.pathname.split("/")[1],u=[];q(e).find(".qor-alert").each(function(t,e){var i=q(e).find(".qor-alert-message").text().trim(),n=q(e).data("type");""!==i&&u.push({Type:n,Message:i,Keep:!0})}),0<u.length&&(document.cookie="qor-flashes="+btoa(unescape(encodeURIComponent(JSON.stringify(u))))+"; path="+h),this.successCallbacks.forEach(function(t){return t(e,i,n)})}}}else if(m.closest(".qor-slideout").length)m.closest(".qor-page__body").trigger("disable").html(e).trigger("enable");else{var f=q(e).find(".qor-error");m.before(f),f.find("> li > label").each(function(){var t=q(this),e=t.attr("for");e&&m.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))});var p=m.closest(".qor-page__body").find("#flashes,.qor-error").eq(0);if(p.length)p.scrollParent().scrollTop(p.scrollTop()+p.offset().top);e=q(e).find(".qor-page__body form:eq(0)").html(),m.children().trigger("disable").remove(),m.html(e).children().trigger("enable")}}.bind(this),error:function(t,e,i){m.parent().find(".qor-error").remove(),m.closest(".qor-page__body").children("#flashes,.qor-error").remove();var n=void 0;if(422===t.status){m.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),n=q(t.responseText).find(".qor-error"),m.before(n),n.find("> li > label").each(function(){var t=q(this),e=t.attr("for");e&&m.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))});var o=m.closest(".qor-page__body").find("#flashes,.qor-error").eq(0);if(o.length)o.scrollParent().scrollTop(o.scrollTop()+o.offset().top)}else QOR.ajaxError.apply(this,arguments)}.bind(this),complete:function(){g.prop("disabled",!1)}},q.isFunction(i)&&i(this,n),q.ajax(y,n)}}},s.DEFAULTS={},s.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=q(this),e=t.data(r),i=null;if(t.is("form")){if(!e){if(/destroy/.test(n))return;e=new s(this,"string"==typeof n?{}:n),t.data(r,e)}"string"==typeof n&&q.isFunction(i=e[n])&&i.apply(e,o)}})},q.fn.qorAsyncFormSubmiter=s.plugin,q(function(){var i='form[data-async="true"]',n={};q(document).on("disable.qor.asyncFormSubmiter",function(t){var e=q(i,t.target);o(e)&&s.plugin.call(e,"destroy")}).on(t,function(t){var e=q(i,t.target);o(e)&&s.plugin.call(e,n)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var r="qor.autoheight",t="enable."+r;function s(t,e){this.$element=o(t),this.options=o.extend({},s.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on("input",o.proxy(this.resize,this))},unbind:function(){this.$element.off("input",this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(r)}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new s(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e="textarea.qor-js-autoheight";o(document).on("disable.qor.autoheight",function(t){s.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(o(e,t.target))}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(q){var o=window._,n=window.FormData,r="qor.bottomsheets",t="click."+r,$="bottomsheetSubmitComplete."+r,w="hidden."+r,i="qor-bottomsheets-open",s="is-shown",a="is-slided",k=".mdl-layout__content.qor-page",l=".qor-page__body",x=".qor-page__header",e=".qor-bottomsheets__search-button",d=".qor-bottomsheets__search-input";function c(t,e){var i=[],n="href";return e&&(n="src"),t.each(function(){i.push(q(this).attr(n))}),o.uniq(i)}function h(t,e){var i=q.fn.qorSliderAfterShow;for(var n in i)i.hasOwnProperty(n)&&!i[n].isLoaded&&(i[n].isLoaded=!0,i[n].call(this,t,e))}function E(t,e){this.$element=q(t),this.options=q.extend({},E.DEFAULTS,q.isPlainObject(e)&&e),this.disabled=!1,this.resourseData={},this.init()}return E.prototype={constructor:E,init:function(){this.filterURL="",this.searchParams="",this.renderedOpt={},this.build(),this.bind()},build:function(){var t=void 0;this.$bottomsheets=t=q(E.TEMPLATE).appendTo("body"),this.$body=t.find(".qor-bottomsheets__body"),this.$title=t.find(".qor-bottomsheets__title"),this.$header=t.find(".qor-bottomsheets__header"),this.$bodyClass=q("body").prop("class")},bind:function(){this.$bottomsheets.on(t,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(t,".qor-pagination a",this.pagination.bind(this)).on(t,e,this.search.bind(this)).on("keyup.qor.bottomsheets",this.keyup.bind(this)).on("selectorChanged.qor.selector",this.selectorChanged.bind(this)).on("filterChanged.qor.filter",this.filterChanged.bind(this)).on(t,'[data-dismiss="fullscreen"]',this.toggleMode.bind(this))},unbind:function(){this.$bottomsheets.off(t,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).off(t,".qor-pagination a",this.pagination.bind(this)).off(t,e,this.search.bind(this)).off("selectorChanged.qor.selector",this.selectorChanged.bind(this)).off("filterChanged.qor.filter",this.filterChanged.bind(this)).on(t,'[data-dismiss="fullscreen"]',this.toggleMode.bind(this))},toggleMode:function(){this.$bottomsheets.toggleClass("qor-bottomsheets__fullscreen").find('[data-dismiss="fullscreen"] span').toggle()},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="qor-action-slideout"]').find("form"),i=[],n=t.length-1;0<=n;n--)i.push(t[n]);0<i.length&&e.prepend('<input type="hidden" name=":pk" value="'+i.join(":")+'" />')},filterChanged:function(t,e,i){var n;return(n=this.constructloadURL(e,i))&&this.reload(n),!1},selectorChanged:function(t,e,i){var n;return(n=this.constructloadURL(e,i))&&this.reload(n),!1},keyup:function(t){var e=this.$bottomsheets.find(d);13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){var t=this.$bottomsheets,e=t.data().url,i=q.trim(t.find(d).val()||""),n=e+(-1===e.indexOf("?")?"?":"&")+"keyword="+encodeURIComponent(i);this.reload(n)},pagination:function(t){var e=q(t.target).prop("href");return e&&this.reload(e),!1},reload:function(t){var e=this.$bottomsheets.find(l);this.addLoading(e),this.fetchPage(t)},fetchPage:function(o){var r=this.$bottomsheets;q.ajax({url:o,headers:{"X-Layout":"lite"},success:function(t){var e=q(t).find(k),i=e.find(x),n=e.find(l);n.length?(r.find(l).html(n.html()).trigger("enable"),i.length&&(r.removeAttr("data-src"),this.$body.find(x).html(i.html()).attr("data-src",o).trigger("enable"),this.addHeaderClass()),r.trigger("reload.qor.bottomsheets")):this.reload(o)}.bind(this),error:QOR.ajaxError})},constructloadURL:function(t,e){var i,n=this.filterURL,o=this.$bottomsheets.data().url;if(!n){if(!o)return;n=o}return i=function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}(e,new URL("http://www.getqor.com/"+t).search),n=this.filterURL=function(t,e,i){var n=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),o=new RegExp("([?&])"+n+"=.*?(&|$)","i"),r=-1!==i.indexOf("?")?"&":"?";return i.match(o)?e?i.replace(o,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?i.replace(o,"$1"):i.replace(o,""):e?i+r+t+"="+e:void 0}(e,i,n)},addHeaderClass:function(){this.$body.find(x).remove(),this.$bottomsheets.find(x).children(".qor-bottomsheet__filter").length&&this.$body.addClass("has-header").find(x).show()},addLoading:function(t){t.html("");var e=q(E.TEMPLATE_LOADING).appendTo(t);window.componentHandler.upgradeElement(e.children()[0])},loadExtraResource:function(t){var e=function(t){var e=q("link"),i=c(t),n=c(e);return o.difference(i,n)}(t.$links),i=function(t){var e=q("script"),i=c(t,!0),n=c(e,!0);return o.difference(i,n)}(t.$scripts);e.length&&!function t(e){var i=document.createElement("link"),n=e.shift();i.type="text/css",i.rel="stylesheet",i.onload=function(){e.length&&t(e)},i.href=n,document.getElementsByTagName("head")[0].appendChild(i)}(e),i.length&&function(t,e,i){for(var n=0,o=0,r=t.length;o<r;o++){var s=document.createElement("script");s.onload=function(){++n===t.length&&q.isFunction(i)&&i(),e&&e.url&&e.response&&h(e.url,e.response)},s.src=t[o],document.body.appendChild(s)}}(i,t)},loadMedialibraryJS:function(t){var e=t.filter("script"),i=/theme=media_library/g,n=void 0,o=this;e.each(function(){if(n=q(this).prop("src"),i.test(n)){var t=document.createElement("script");t.src=n,document.body.appendChild(t),o.scriptAdded=!0}})},submit:function(t){var o=this.$body,e=t.target,d=q(e),c=this,h=d.prop("action"),u=new n(e),f=d.closest(".qor-bottomsheets"),p=f.data(),i=p.ajaxType,m=d.find(":submit");p.ignoreSubmit||d.data().normalSubmit||(q(document).trigger("bottomsheetBeforeSend.qor.bottomsheets"),t.preventDefault(),q.ajax(h,{method:d.prop("method"),data:u,dataType:i||"html",processData:!1,contentType:!1,headers:{"X-Layout":"lite"},beforeSend:function(){m.prop("disabled",!0)},success:function(t,e,i){if(p.ajaxMute)f.remove();else if(p.ajaxTakeover)p.$target.parent().trigger("ajaxSuccessed.qor.bottomsheets",[t,f]);else{var n=i.getResponseHeader("Content-Disposition");if(n&&-1!==n.indexOf("attachment")){var o=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(n),r=i.getResponseHeader("Content-Type"),s="";return null!=o&&o[1]&&(s=o[1].replace(/['"]/g,"")),window.QOR.qorAjaxHandleFile(h,r,s,u),void m.prop("disabled",!1)}q(".qor-error").remove();var a=d.data("returnUrl"),l=d.data("refreshUrl");l?window.location.href=l:"refresh"!==a?(a&&"refresh"!==a?c.load(a):c.refresh(),q(document).trigger($)):c.refresh()}},error:function(t,e,i){if(422===t.status){o.find(".qor-error").remove();var n=q(t.responseText).find(".qor-error");d.before(n),q(".qor-bottomsheets .qor-page__body").scrollTop(0),QOR.alert(n)}else QOR.ajaxError.apply(this,arguments)},complete:function(){m.prop("disabled",!1)}}))},render:function(t,e){this.$header.find(".qor-bottomsheets__title").html(t||""),"string"==typeof e?this.$body.html(e):(this.$body.html(""),this.$body.append(e)),this.options.persistent?this.$bottomsheets.trigger("enable"):(this.show(),this.$bottomsheets.one(w,function(){q(this).trigger("disable")}).trigger("enable"))},renderResponse:function(t,e){this.renderedOpt=e=q.extend({},e||{});var i=q(t),n=void 0,o=void 0,r={$scripts:i.filter("script"),$links:i.filter("link"),url:e.url,response:t},s=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);n=i.find(k),s&&(s=s.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),o=q(s).prop("class"),q("body").addClass(o)),n.length&&(this.loadExtraResource(r),e.removeHeader&&n.find(x).remove(),n.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),this.$body.removeAttr("data-src").html(n.html()),this.$title.html(e.title?e.title:e.titleSelector?i.find(e.titleSelector).html():""),this.show(),this.$bottomsheets.one(w,function(){q(this).trigger("disable")}).attr("data-src",e.url||"").trigger("enable"))},load:function(l,d,c){d=d||{};var h,t,u=this.options,e=void 0,f=d.actionData,p=this.resourseData,m=p.selectModal,g=p.ignoreSubmit,v=this.$bottomsheets,b=this.$header,y=this.$body;if(l){if(d.image)return y.css({overflow:"auto",padding:0}),void this.render(d.title,'<img style="max-width: inherit" src="'+l+'">');d.$element&&(l=QOR.Xurl(l,d.$element).toString()),this.show(),this.addLoading(y),this.filterURL=l,y.removeClass("has-header has-hint"),d=q.isPlainObject(d)?d:{},h=d.method?d.method:"GET",t=d.datatype?d.datatype:"html",f&&f.length&&(l+=(-1===l.indexOf("?")?"?":"&")+":pk="+f.join(":"));var _=function(t){if("GET"===h){var e=q(t),i=void 0,n=void 0,o={$scripts:e.filter("script"),$links:e.filter("link"),url:l,response:t},r=m&&e.find(".qor-search-container").length,s=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(i=e.find(k),s&&(s=s.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),n=q(s).prop("class"),q("body").addClass(n)),!i.length)return;this.loadExtraResource(o),g&&i.find(x).remove(),i.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),i.find("[data-order-by]").removeAttr("data-order-by").removeClass("is-not-sorted"),y.html(i.html()),this.$title.html(e.find(u.title).html()),d.selectDefaultCreating&&this.$title.append('<button class="mdl-button mdl-button--primary" type="button" data-load-inline="true" data-select-nohint="'+d.selectNohint+'" data-select-modal="'+d.selectModal+'" data-select-listing-url="'+d.selectListingUrl+'">'+d.selectBacktolistTitle+"</button>"),m&&(y.find(".qor-button--new").data("ignoreSubmit",!0).data("selectId",p.selectId).data("loadInline",!0).remove(),"one"===m||d.selectNohint||void 0!==p.maxItem&&"1"===p.maxItem||y.addClass("has-hint"),"mediabox"!==m||this.scriptAdded||this.loadMedialibraryJS(e)),b.find(".qor-button--new").remove(),this.$title.after(y.find(".qor-button--new")),r&&(v.addClass("has-search"),b.find(".qor-bottomsheets__search").remove(),b.append(E.TEMPLATE_SEARCH)),f&&f.length&&this.bindActionData(f),p.bottomsheetClassname&&v.addClass(p.bottomsheetClassname),this.addHeaderClass(),v.trigger("enable");var a=v.find(".qor-bottomsheets__body form");a.length&&(this.$bottomsheets.qorSelectCore("newFormHandle",a,this.load.bind(this)),a.qorAsyncFormSubmiter("onSuccess",function(t,e,i){q(document).trigger($),"render-body"!==i.getResponseHeader("X-Frame-Reload")?(this.hide({target:a[0]}),this.resourseData.windowReload&&(location.href=location.href)):_(t)}.bind(this))),y.find("form .qor-button--cancel:last").click(function(t){return this.hide(t),!1}.bind(this)),v.one(w,function(){q(this).trigger("disable")}),v.data(d),c&&q.isFunction(c)&&c(this.$bottomsheets),v.trigger("bottomsheetLoaded.qor.bottomsheets",[l,t])}else d.returnUrl?this.load(d.returnUrl):this.refresh()}.bind(this);e=q.proxy(function(){q.ajax(l,{headers:{"X-Layout":"lite"},method:h,dataType:t,success:_,error:function(t){var e=!1;if(t.responseText){var i=q(t.responseText).find(".qor-error span");if(0<i.length){e=!0;var n=i.map(function(){return q(this).text()}).get().join(", ");QOR.alert(n)}}e||QOR.ajaxError.apply(t,arguments)}.bind(this)})},this),e()}},open:function(t,e){t.loadInline||this.init(),this.resourseData=t,this.load(t.url,t,e)},show:function(){this.$bottomsheets.addClass(s+" "+a)},hide:function(t){var e=q(t.target).closest(".qor-bottomsheets");return this.options.persistent?e.removeClass(s+" "+a):(e.qorSelectCore("destroy"),e.trigger("bottomsheetClosed.qor.bottomsheets").trigger("disable").remove(),q(".qor-bottomsheets").is(":visible")||q("body").removeClass(i),this.destroy()),!1},refresh:function(){this.$bottomsheets.remove(),q("body").removeClass(i),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.$element.removeData(r)}},E.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},E.TEMPLATE_ERROR='<ul class="qor-error"><li><label><i class="material-icons">error</i><span>[[error]]</span></label></li></ul>',E.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',E.TEMPLATE_SEARCH='<div class="qor-bottomsheets__search">\n            <input autocomplete="off" type="text" class="mdl-textfield__input qor-bottomsheets__search-input" placeholder="Search" />\n            <button class="mdl-button mdl-js-button mdl-button--icon qor-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button>\n        </div>',E.TEMPLATE='<div class="qor-bottomsheets">\n            <div class="qor-bottomsheets__header">\n                <div class="qor-bottomsheets__header-control">\n                    <h3 class="qor-bottomsheets__title"></h3>\n                    <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect" data-dismiss="fullscreen">\n                        <span class="material-icons">fullscreen</span>\n                        <span class="material-icons" style="display: none;">fullscreen_exit</span>\n                    </button>\n                    <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-bottomsheets__close" data-dismiss="bottomsheets">\n                        <span class="material-icons">close</span>\n                    </button>\n                </div>\n            </div>\n            <div class="qor-bottomsheets__body"></div>\n        </div>',E.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=q(this),e=t.data(r),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(r,e=new E(this,n))}"string"==typeof n&&q.isFunction(i=e[n])?i.apply(e,o):q.isFunction(n)?n.call({},t,e):n&&(i=n.do)&&q.isFunction(i)&&i.call(n,t,e)})},q.fn.qorBottomSheets=E.plugin,E}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(t){function n(t){console.error("Error: ",t)}function e(t,e,i){this.$audioSelect=t,this.$videoSelect=e,this.$videoElement=i,this.init()}e.Available=function(){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return console.log("enumerateDevices() not supported."),!1;navigator.mediaDevices.enumerateDevices().then(function(t){t.forEach(function(t){console.log(t.kind+": "+t.label+" id = "+t.deviceId)})}).catch(function(t){console.log(t.name+": "+t.message)})},e.prototype={constructor:e,init:function(){},gotDevices:function(t){this.$audioSelect.html(""),this.$videoSelect.html(""),window.deviceInfos=t,console.log("Available input and output devices:",t);var e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value,a=document.createElement("option");a.value=s.deviceId,"audioinput"===s.kind?this.$audioSelect&&(a.text=s.label||"Microphone "+(audioSelect.length+1),this.$audioSelect.appendChild(a)):"videoinput"===s.kind&&this.$videoSelect&&(a.text=s.label||"Camera "+(videoSelect.length+1),this.$videoSelect.appendChild(a))}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}},getStream:function(){window.stream&&window.stream.getTracks().forEach(function(t){t.stop()});var t=this.$audioSelect?this.$audioSelect.val():null,e=this.$videoSelect?this.$videoSelect.val():null,i={audio:{deviceId:t?{exact:t}:void 0},video:{deviceId:e?{exact:e}:void 0}};return navigator.mediaDevices.getUserMedia(i).then(this.gotStream.bind(this)).catch(n)},gotStream:function(e){window.stream=e,this.$audioSelect.selectedIndex=[].concat(_toConsumableArray(audioSelect.options)).findIndex(function(t){return t.text===e.getAudioTracks()[0].label}),this.$videoSelect.selectedIndex=[].concat(_toConsumableArray(videoSelect.options)).findIndex(function(t){return t.text===e.getVideoTracks()[0].label}),this.$videoElement.srcObject=e}},window.QorMediaDevices=e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){var o="qor.chooser",t="enable."+o;function r(t,e){this.$element=c(t),this.options=c.extend({},r.DEFAULTS,c.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){var t,e=this.$element,i=e.data(),n=c.extend({minimumResultsForSearch:8,dropdownParent:e.parent()},i.select2||{}),o={displayKey:i.remoteDataDisplayKey,iconKey:i.remoteDataIconKey,getKey:function(t,e,i){if(e){for(var n=t,o=e.split("."),r=0;void 0!==n&&r<o.length;r++)n=n[r];if(void 0!==n)return n}return i}};if(i.remoteData){n.ajax=c.fn.select2.ajaxCommonOptions(i);var r=i.ajaxUrl||i.originalAjaxUrl,s=QOR.Xurl(r,e),a=i.remoteDataPrimaryKey;delete i.ajaxUrl,e.removeAttr("data-ajax-url"),e.attr("data-original-ajax-url",r),n.ajax.url=function(t){s.query.keyword=[t.term],s.query.page=t.page,s.query.per_page=20;var e=s.build();return e.notFound.length||e.empties.length?"https://unsolvedy.dependency.localhost/"+e.notFound.concat(e.empties).toString():e.url};var l=e.parents(".qor-field:eq(0)");this.$templateResult=l.find('[name="select2-result-template"]');var d=function(t,e){if(e.text&&(e.loading||e.selected||""===e.id))return e.text;if(t.length){if(t.data("raw")){var i=t.data("func");return i||(i=new Function("data",t.html()),t.data("func",i)),i(e)}var n=t.html().replace(/^\s+|\s+$/g,"").replace(/\[\[ *&amp;/g,"[[&");return Mustache.render(n,e)}return c.fn.select2.ajaxFormatResult(e,t)}.bind(this);n.templateResult=function(t){return t.QorChooserOptions=o,d(this.$templateResult,t).replace(/^\s+|\s+$/g,"")}.bind(this),this.$templateSelection=l.find('[name="select2-selection-template"]'),n.templateSelection=function(t){if(t.loading)return t.text;t.QorChooserOptions=o,t.element&&(a&&t.hasOwnProperty(a)?c(t.element).attr("data-value",t[a]):c(t.element).attr("data-value",t.id));var e=d(this.$templateSelection,t).replace(/^\s+|\s+$/g,"");return""===e?t.text:e}.bind(this)}e.on("select2:select",function(t){c(t.target).attr("chooser-selected","true")}).on("select2:unselect",function(t){c(t.target).attr("chooser-selected","")}),e.select2(n),this.resetSelect2Width(),t=window._.debounce(this.resetSelect2Width.bind(this),300),c(window).resize(t),e.val()&&e.attr("chooser-selected","true")},resetSelect2Width:function(){this.$element||this.destroy();var t=void 0,e=this.$element.data().select2;e&&e.$container&&(t=e.$container).width(t.parent().width())},destroy:function(){if(this.$element){var t=this.$element;this.$element=null,t.removeData(o);try{t.select2("destroy")}catch(t){}}}},r.DEFAULTS={},r.plugin=function(n){return this.each(function(){var t,e=c(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new r(this,n))}"string"==typeof n&&c.isFunction(t=i[n])&&t.apply(i)})},c(function(){var e='select[data-toggle="qor.chooser"]';c(document).on("disable.qor.chooser",function(t){r.plugin.call(c(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(c(e,t.target))}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){window.location;var o="qor.content_copy",t="enable."+o,e="click."+o;function s(t,e){this.$element=r(t),this.options=r.extend({},s.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){this.bind()},bind:function(){var t=this.options;this.$element.attr("href","javascript:void(0);").html('<i class="material-icons">content_copy</i>').on(e,t.label,r.proxy(this.do,this))},unbind:function(){this.$element.off(e,this.do)},do:function(t){var e=r(t.currentTarget),i=e.data("value");if(i||(i=e.data("value-b64"))&&(i=atob(i)),!i){var n=r(this).parent().find("[data-content-copy-value]");if(0===n.length)return;i=n.text()}var o=r("<input style='position: absolute; top: -200px'>");r("body").append(o),o.val(i).select(),document.execCommand("copy"),o.remove()},destroy:function(){this.unbind(),this.$element.removeData(o)}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new s(this,n))}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i)})},r(function(){var e="[data-content-copy]",i={};r(document).on("disable.qor.content_copy",function(t){s.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(r(e,t.target),i)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(y){var r=window.URL||window.webkitURL,s="qor.cropper",t="enable."+s,n="change."+s,u="click."+s,e="shown.qor.modal",i="hidden.qor.modal",_=".qor-cropper__toggle",f=".qor-cropper__wrapper",p=".qor-cropper__options",a=".qor-cropper__toggle--crop";function q(t,e){var i=String(e),n=i.toLowerCase(),o=i.toUpperCase(),r=function(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}(i);if(y.isPlainObject(t))return t[n]||t[r]||t[o]}function o(i,t){return"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&y.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i}function l(t){return/.svg$/.test(t)}function d(t,e){this.$element=y(t),this.options=y.extend(!0,{},d.DEFAULTS,y.isPlainObject(e)&&e),this.data=null,this.init()}return d.prototype={constructor:d,init:function(){var t,e=this.options,i=this.$element,n=i.closest(e.parent),o=n.closest("form"),r=void 0,s=void 0,a=void 0;n.length||(n=i.parent()),this.$parent=n,this.$takePicture=null,this.$output=n.find(e.output),this.$formCropInput=o.find('input[name="QorResource.MediaOption"]:hidden'),this.$list=n.find(e.list),(t=this.$output.data("fetchSizedata"))?y.getJSON(t,function(t){a=JSON.parse(t.MediaOption),this.$output.val(JSON.stringify(t)),this.$formCropInput.val(JSON.stringify(t)),this.data=a||{},l(a.URL||a.Url)&&this.resetImage(),this.build(),this.bind()}.bind(this)):((s=y.trim(this.$output.val()))&&l((r=JSON.parse(s)).URL||r.Url)&&this.resetImage(),this.data=r||{},this.build(),this.bind())},resetImage:function(){this.$parent.addClass("is-svg")},build:function(){var t=this.$output.data(),e={},i=void 0;if(t&&(e={title:t.cropperTitle,ok:t.cropperOk,cancel:t.cropperCancel},i=this.options.text),e.ok&&e.title&&e.cancel&&(i=e),this.wrap(),this.$modal=y(o(d.MODAL,i)).appendTo("body"),this.$takePicture){var n=void 0;t&&(n={title:t.tpTitle,ok:t.tpOk,cancel:t.tpCancel},i=this.options.takePictureText),n.ok&&n.title&&n.cancel&&(i=n),this.$takePictureModal=y(o(d.TAKE_PICTURE,i)).appendTo("body"),this.$takePicture.show()}},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t=this.$list,e=void 0;(e=t.find("img").not(".is-svg")).length?(t.find("li").append(d.TOGGLE),e.wrap(d.CANVAS),this.center(e)):t.find(a).remove()},unwrap:function(){var t=this.$list;t.find(_).remove(),t.find(".qor-cropper__canvas").each(function(){var t=y(this);t.before(t.html()).remove()})},bind:function(){this.$element.on(n,y.proxy(this.read,this)),this.$list.on(u,y.proxy(this.click,this)),this.$modal.on(e,y.proxy(this.start,this)).on(i,y.proxy(this.stop,this))},unbind:function(){this.$element.off(n,this.read),this.$list.off(u,this.click),this.$modal.off(e,this.start).off(i,this.stop)},click:function(t){var e=t.target,i=void 0,n=this.data,o=void 0;e!==this.$list[0]&&((i=y(e)).closest(".qor-cropper__toggle--delete").length&&(n.Delete=!0,this.$output.val(JSON.stringify(n)),this.$formCropInput.val(JSON.stringify(n)),this.$list.hide(),this.$parent.find("label").show(),(o=y(d.ALERT)).find(".qor-fieldset__undo").one(u,function(){o.remove(),this.$list.show(),delete n.Delete,this.$output.val(JSON.stringify(n)),this.$formCropInput.val(JSON.stringify(n))}.bind(this)),this.$parent.find(".qor-fieldset").append(o)),i.closest(a).length&&(i=i.closest("li").find("img"),this.$target=i,this.$modal.qorModal("show")))},read:function(t){var e=t.target.files,i=void 0,n=this.$list,o=this.$parent.find(".qor-fieldset__alert");n.show(),o.length&&o.remove(),e&&e.length&&(i=e[0],/^image\//.test(i.type)&&r?(this.fileType=i.type,this.load(r.createObjectURL(i)),this.$parent.find(".qor-medialibrary__image-desc").show()):n.empty().html(d.FILE_LIST.replace("{{filename}}",i.name)))},takePicture:function(t){var e=t.target.files,i=void 0,n=this.$list,o=this.$parent.find(".qor-fieldset__alert");n.show(),o.length&&o.remove(),e&&e.length&&(i=e[0],/^image\//.test(i.type)&&r?(this.fileType=i.type,this.load(r.createObjectURL(i)),this.$parent.find(".qor-medialibrary__image-desc").show()):n.empty().html(d.FILE_LIST.replace("{{filename}}",i.name)))},load:function(t,h,u){var f,p=this.options,m=this,g=this.$list,e=y(d.LIST),v=this.data||{},b=this.fileType,i=void 0;h||(g.find("ul").remove(),g.html(e)),i=g.find("img"),this.wrap(),f=i.length,i.one("load",function(){if("image/svg+xml"===b)return g.find(_).remove(),!1;var t=y(this),e=this.naturalWidth,i=this.naturalHeight,n=t.data(),o=n.sizeResolution,r=n.sizeName,s={},a={},l=void 0,d=n.sizeResolutionWidth,c=n.sizeResolutionHeight;o?(d||c||(d=q(o,"width"),c=q(o,"height")),e<i*(l=d/c)?c=(d=e)/l:d=(c=i)*l,s={naturalWidth:e,naturalHeight:i},a={x:Math.round((e-d)/2),y:Math.round((i-c)/2),width:Math.round(d),height:Math.round(c)},m.preview(t,s,a),r&&(v.Crop=!0,v[p.key]||(v[p.key]={}),"original"!=r&&(v[p.key][r]=a))):m.center(t),""!==v.Crop&&h||delete v.Crop,h||(v.CropOptions=null,delete v.Sizes),delete v.Delete,m.$output.val(JSON.stringify(v)),m.$formCropInput.val(JSON.stringify(v)),r&&v[p.key]&&Object.keys(v[p.key]).length>=f&&u&&y.isFunction(u)&&u()}).attr("data-cropper","data-cropper").attr("src",t).data("originalUrl",t),g.show(),this.$parent.find("label").hide()},start:function(){var t,o=this.options,r=this.$modal,e=this.$target.data(),s=e.sizeName||"original",i=e.sizeResolution,a=y("<img data-cropper src="+e.originalUrl+">"),l=this.data||{},d=this,n=NaN,c=e.sizeResolutionWidth,h=e.sizeResolutionHeight;i&&(c||h||(c=q(i,"width"),h=q(i,"height")),n=c/h),l[o.key]||(l[o.key]={}),r.trigger("enable.qor.material").find(f).html(a),(t=this.getList(n))&&r.find(p).show().append(t),a.cropper({aspectRatio:n,data:function(t){var e={},i=void 0;if(y.isPlainObject(t))for(i in t)t.hasOwnProperty(i)&&(e[String(i).toLowerCase()]=t[i]);return e}(l[o.key][s]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,autoCropArea:1,ready:function(){r.find(".qor-cropper__options-toggle").on(u,function(){r.find(".qor-cropper__options-input").prop("checked",y(this).prop("checked"))}).prop("checked",!0),r.find(".qor-cropper__save").one(u,function(){var t=a.cropper("getData",!0),e=a.cropper("getCroppedCanvas"),i=[],n=void 0;if(l.Crop=!0,l[o.key][s]=t,d.imageData=a.cropper("getImageData"),d.cropData=t,e)try{n=e.toDataURL()}catch(t){console.log(t),console.log("Please check image Cross-origin setting")}r.find(p+" input").each(function(){var t=y(this);t.prop("checked")&&i.push(t.attr("name"))}),d.output(n,i),r.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(f+" > img").cropper("destroy").remove().end().find(p).hide().find("ul").remove()},getList:function(r){var s=[];return this.$list.find("img").not(this.$target).each(function(){var t=y(this).data(),e=t.sizeResolution,i=t.sizeName,n=t.sizeResolutionWidth,o=t.sizeResolutionHeight;e&&(n||o||(n=q(e,"width"),o=q(e,"height")),n/o===r&&s.push('<label><input class="qor-cropper__options-input" type="checkbox" name="'+i+'" checked> <span>'+i+"<small>("+n+"&times;"+o+" px)</small></span></label>"))}),s.length?"<ul><li>"+s.join("</li><li>")+"</li></ul>":""},output:function(t,e){var i=this.$target;t?this.center(i.attr("src",t),!0):this.preview(i),y.isArray(e)&&e.length&&this.autoCrop(t,e),this.$output.val(JSON.stringify(this.data)).trigger(n),this.$formCropInput.val(JSON.stringify(this.data))},preview:function(t,e,i){var n,o=t.parent().parent(),r=o.width(),s=o.height(),a=e||this.imageData,l=y.extend({},i||this.cropData),d=l.width/l.height,c=r;0!=c&&0!=a.naturalWidth&&0!=a.naturalHeight&&(s*d<=r&&(c=s*d),n=l.width/c,t.css({maxWidth:a.naturalWidth/n,maxHeight:a.naturalHeight/n}),this.center(t))},center:function(t,i){t.each(function(){var t=y(this),n=t.parent(),o=n.parent();function e(){var t=o.height(),e=n.height(),i="auto";e<t&&(i=(t-e)/2),n.css("margin-top",i)}i&&n.add(t).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(i,n){var o=this.cropData,r=this.data[this.options.key],s=this;this.$list.find("img").not(this.$target).each(function(){var t=y(this),e=t.data("sizeName");-1<y.inArray(e,n)&&(r[e]=y.extend({},o),i?s.center(t.attr("src",i),!0):s.preview(t))})},destroy:function(){this.$element.removeData(s)}},d.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},d.TOGGLE='<div class="qor-cropper__toggle">\n            <div class="qor-cropper__toggle--crop"><i class="material-icons">crop</i></div>\n            <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n        </div>',d.ALERT='<div class="qor-fieldset__alert">\n            <button class="mdl-button mdl-button--accent qor-fieldset__undo" type="button">Undo delete</button>\n        </div>',d.CANVAS='<div class="qor-cropper__canvas"></div>',d.LIST="<ul><li><img data-cropper></li></ul>",d.FILE_LIST='<div class="qor-file__list-item">\n                                <span><span>{{filename}}</span></span>\n                                <div class="qor-cropper__toggle">\n                                    <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n                                </div>\n                            </div>',d.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-cropper__wrapper"></div>\n                    <div class="qor-cropper__options">\n                        <p>Sync cropping result to: <label><input type="checkbox" class="qor-cropper__options-toggle" checked/> All</label></p>\n                    </div>\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-cropper__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',d.TAKE_PICTURE='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <video autoplay="true" />\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-cropper__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',d.plugin=function(o){return this.each(function(){var t=y(this),e=t.data(s),i=void 0,n=void 0;if(!e){if(!y.fn.cropper)return;if(/destroy/.test(o))return;i=y.extend(!0,{},t.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),t.data(s,e=new d(this,i))}"string"==typeof o&&y.isFunction(n=e[o])&&n.apply(e)})},y(function(){var e=".qor-file__input:not([data-cropper='disabled'])",i={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};y(document).on(t,function(t){d.plugin.call(y(e,t.target),i)}).on("disable.qor.cropper",function(t){d.plugin.call(y(e,t.target),"destroy")}).triggerHandler(t)}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var r="qor.datepicker",t="enable."+r,l="pick."+r,d="click."+r,c=".qor-datepicker__embedded",h=".qor-datepicker__save",u="[data-picker-type]";function f(t,e){this.$element=a(t),this.options=a.extend(!0,{},{text:QOR.messages.datepicker.datepicker},a.isPlainObject(e)&&e),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.init()}a.extend(!0,QOR.messages,{datepicker:{datepicker:{title:"Pick a date",ok:"OK",cancel:"Cancel"}}}),f.prototype={init:function(){this.bind()},bind:function(){this.$element.on(d,a.proxy(this.show,this))},unbind:function(){this.$element.off(d,this.show)},build:function(){var t=void 0,e=this.$element,i=this.pickerData,n={date:e.val()?new Date(e.val()):new Date,inline:!0},o=e.closest(u);i.format&&(n.format=i.format);var r=o.find(i.targetInput);if(!this.built){if(this.$modal=t=a(function(i,t){return"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&a.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i}(f.TEMPLATE,this.options.text)).appendTo("body"),r.length){var s=r.val();s.length?n.date=n.format?a.fn.qorDatepicker.parseDate(n.format,s):new Date(s):n.date=new Date}i.targetInput&&r.data("start-date")&&(n.startDate=new Date),t.find(c).on(l,a.proxy(this.change,this)).qorDatepicker(n).triggerHandler(l),t.find(h).on(d,a.proxy(this.pick,this)),this.built=!0}},unbuild:function(){this.built&&this.$modal.find(c).off(l,this.change).qorDatepicker("destroy").end().find(h).off(d,this.pick).end().remove()},change:function(t){var e,i=this.$modal,n=a(t.target);this.date=e=n.qorDatepicker("getDate"),this.formatDate=n.qorDatepicker("getDate",!0),i.find(".qor-datepicker__picked-year").text(e.getFullYear()),i.find(".qor-datepicker__picked-date").text([n.qorDatepicker("getDayName",e.getDay(),!0)+",",String(n.qorDatepicker("getMonthName",e.getMonth(),!0)),e.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){var t=this.pickerData.targetInput,e=this.$element,i=e.closest(u),n=t?i.find(t):e,o=i.data("picker-type"),r=this.formatDate;if("datetime"===o){var s=/^\d{4}-\d{1,2}-\d{1,2}/,a=n.val();s.test(a)?r=a.replace(s,r):r+=" 00:00"}n.val(r).trigger("change"),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(r)}},f.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-datepicker__picked">\n                        <div class="qor-datepicker__picked-year"></div>\n                        <div class="qor-datepicker__picked-date"></div>\n                    </div>\n                    <div class="qor-datepicker__embedded"></div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored  mdl-button--raised qor-datepicker__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored " data-dismiss="modal">$[cancel]</a>\n                </div>\n            </div>\n        </div>',f.plugin=function(o){return this.each(function(){var t,e,i=a(this),n=i.data(r);if(!n){if(!a.fn.qorDatepicker)return;if(/destroy/.test(o))return;t=a.extend(!0,{},i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(r,n=new f(this,t))}"string"==typeof o&&a.isFunction(e=n[o])&&e.apply(n)})};var i=a(document);return i.data("qor.datepicker",function(t){return t.call(f)}),a(function(){var e='[data-toggle="qor.datepicker"]';i.on("disable.qor.datepicker",function(t){f.plugin.call(a(e,t.target),"destroy")}).on(t,function(t){f.plugin.call(a(e,t.target))}).triggerHandler(t)}),f}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="qor.dialog",t="enable."+s,e="click."+s,i="dialog.mdl-dialog",n="[data-dialog]";function a(t){this.dialog=t,this.$el=r(t),this.init()}function l(t,e){this.$el=r(t),this.init()}a.prototype={init:function(){this.dialog.showModal||dialogPolyfill.registerDialog(this.dialog),this.$closers=this.$el.find("> .mdl-dialog__actions .close"),this.bind()},bind:function(){this.$closers.on(e,this.hide.bind(this))},unbind:function(){this.$closers&&this.$closers.off(e)},hide:function(){this.dialog.close()},show:function(){this.dialog.showModal()},destroy:function(){this.unbind(),this.$el=this.$closers=this.dialog=null}},a.plugin=function(o){return this.each(function(){var t=r(this),e=t.data(s),i=void 0,n=void 0;if(e)/destroy/.test(o)&&t.removeData(s);else{if(/destroy/.test(o))return;i=r.extend(!0,{},t.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),t.data(s,e=new a(this,i))}"string"==typeof o&&r.isFunction(n=e[o])&&n.apply(e)})},l.prototype={init:function(t){var e=t&&t.target||this.$el.data().dialog,i=e&&r(e)||null;i&&(this.$dialog=i,this.bind())},bind:function(){this.$el.on(e,this.show.bind(this))},unbind:function(){this.$el.off(e)},show:function(){this.$dialog.data(s).show()},destroy:function(){this.unbind(),this.$el=this.$dialog=null}},l.plugin=function(o){return this.each(function(){var t=r(this),e=t.data(s),i=void 0,n=void 0;if(e)/destroy/.test(o)&&t.removeData(s);else{if(/destroy/.test(o))return;i=r.extend(!0,{},t.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),t.data(s,e=new l(this,i))}"string"==typeof o&&r.isFunction(n=e[o])&&n.apply(e)})},r(function(){r(document).on(t,function(t){a.plugin.call(r(i,t.target)),l.plugin.call(r(n,t.target))}).on("disable.qor.dialog",function(t){a.plugin.call(r(i,t.target),"destroy"),l.plugin.call(r(n,t.target),"destroy")}).triggerHandler(t)})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){c.fn.extend({dirtyForm:function a(t,l){var d=!1;return this instanceof jQuery?(l=t,t=this):t instanceof jQuery||(t=c(t)),t.each(function(t,e){var i=c(e);if(i.is("form")){if(i.hasClass("ignore-dirtyform"))return!1;if(d=a(i.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),l))return!1}else if(i.is(":checkbox")||i.is(":radio")){if(i.hasClass("ignore-dirtyform"))return!1;if(e.checked!=e.defaultChecked)return!(d=!0)}else if(i.is("input")||i.is("textarea")){if(i.hasClass("ignore-dirtyform"))return!1;if(e.value!=e.defaultValue)return!(d=!0)}else if(i.is("select")){if(i.hasClass("ignore-dirtyform"))return!1;for(var n,o=0,r=e.options.length,s=0;s<r;s++)n=e.options[s],d=d||n.selected!=n.defaultSelected,n.defaultSelected&&(o=s);if(d&&!e.multiple&&(d=o!=e.selectedIndex),d)return!1}}),d}}),c(function(){c(document).on("submit","form",function(){window.onbeforeunload=null,c.fn.qorSlideoutBeforeHide=null}),c(document).on("change","form",function(){c(this).dirtyForm()?(c.fn.qorSlideoutBeforeHide=!0,window.onbeforeunload=function(){return"You have unsaved changes on this page. If you leave this page, you will lose all unsaved changes."}):(c.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var a="qor.layout_drawer_fixer",i=".mdl-layout__drawer .qor-layout__sidebar",t="enable."+a,e="resize."+a,n=s(window);function l(t){this.$el=s(t),this.init()}l.prototype={init:function(){this.$header=this.$el.find(".sidebar-header"),this.$body=this.$el.find(".sidebar-body"),this.$footer=this.$el.find(".sidebar-footer"),this.bind(),this.resize()},bind:function(){n.on(e,this.resize.bind(this))},unbind:function(){n.off(e,this.resize)},destroy:function(){this.unbind(),this.$el=this.$header=$this.$body=this.$footer=null},resize:function(){this.$body.height(this.$el.height()-this.$header.height()-this.$footer.height()),this.$body.css("top",this.$header.height())}},l.plugin=function(n){var o=Array.prototype.slice.call(arguments,1),r=void 0;return this.each(function(){var t=s(this),e=t.data(a),i=void 0;if(!e){if(/destroy/.test(n))return;"object"===(void 0===n?"undefined":_typeof(n))&&(n=s.extend({},n,!0)),e=new l(this,n),t.data(a,e)}"string"==typeof n&&s.isFunction(i=e[n])&&(r=i.apply(e,o))}),void 0===r?this:r},s(function(){var e={};s(document).on("disable.qor.layout_drawer_fixer",function(t){l.plugin.call(s(i,t.target),"destroy")}).on(t,function(t){l.plugin.call(s(i,t.target),e)}).triggerHandler(t)})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var d=window.location,e=l(document),o="qor.filter",t="enable."+o,i="click."+o,r=".qor-bottomsheets",c=".qor-filter__dropdown",h="is-selected";function s(t,e){this.$element=l(t),this.options=l.extend({},s.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){this.bind();var t=this.$element,e=window.moment();this.$timeStart=t.find(".qor-filter__start"),this.$timeEnd=t.find(".qor-filter__end"),this.$searchParam=t.find("[data-search-param]"),this.$searchButton=t.find(this.options.button),this.startWeekDate=e.startOf("isoweek").toDate(),this.endWeekDate=e.endOf("isoweek").toDate(),this.startMonthDate=e.startOf("month").toDate(),this.endMonthDate=e.endOf("month").toDate(),this.initActionTemplate()},bind:function(){var t=this.options;this.$element.on(i,t.trigger,this.show.bind(this)).on(i,t.label,this.setFilterTime.bind(this)).on(i,t.clear,this.clear.bind(this)).on(i,t.button,this.search.bind(this)),e.on(i,this.close)},unbind:function(){this.$element.off(i)},initActionTemplate:function(){var t=this.getUrlParameter("schedule_start_at"),e=this.getUrlParameter("schedule_end_at"),i=l(this.options.trigger);(t||e)&&(this.$timeStart.val(t),this.$timeEnd.val(e),e=e?" - "+e:"",i.addClass("active clearable").find(".qor-selector-label").html(t+e),i.append('<i class="material-icons qor-selector-clear">clear</i>'))},show:function(){this.$element.find(c).toggle()},close:function(t){var e=l(t.target),i=l(c),n=i.is(":visible"),o=e.closest(c).length,r=e.closest(".qor-filter-toggle").length,s=e.closest(".qor-modal").length,a=e.closest(".ui-timepicker-wrapper").length;n&&(o||r||s||a)||i.hide()},setFilterTime:function(t){var e,i,n=l(t.target),o=n.data(),r=o.filterRange,s=void 0,a=void 0;if(!r)return!1;if(l(this.options.label).removeClass(h),n.addClass(h),"events"==r)return this.$timeStart.val(o.scheduleStartAt||""),this.$timeEnd.val(o.scheduleEndAt||""),this.$searchButton.click(),!1;switch(r){case"today":s=a=new Date;break;case"week":s=this.startWeekDate,a=this.endWeekDate;break;case"month":s=this.startMonthDate,a=this.endMonthDate}if(!s||!a)return!1;e=this.getTime(s)+" 00:00",i=this.getTime(a)+" 23:59",this.$timeStart.val(e),this.$timeEnd.val(i),this.$searchButton.click()},getTime:function(t){var e=t.getMonth()+1,i=t.getDate();return e=e<8?"0"+e:e,i=i<10?"0"+i:i,t.getFullYear()+"-"+e+"-"+i},clear:function(){var t=l(this.options.trigger),e=t.find(".qor-selector-label");return t.removeClass("active clearable"),e.html(e.data("label")),this.$timeStart.val(""),this.$timeEnd.val(""),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=d.search,i=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\?&]"+i+"=([^&#]*)").exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},updateQueryStringParameter:function(t,e,i){var n=i||d.href,o=n.match(/#\S*$/)||"",r=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp("([?&])"+r+"=.*?(&|$)","i"),a=-1!==n.indexOf("?")?"&":"?";return o&&(o=o[0],n=n.replace(o,"")),n.match(s)?n=e?n.replace(s,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?n.replace(s,"$1"):n.replace(s,""):e&&(n=n+a+t+"="+e),n+o},search:function(){var t=this.$searchParam,n=d.href,o=this;t.length&&(t.each(function(){var t=l(this),e=t.data().searchParam,i=t.val();n=o.updateQueryStringParameter(e,i,n)}),this.$element.closest(r).length?l(r).trigger("filterChanged.qor.filter",[n,"qor.filter.time"]):d.href=n)},destroy:function(){this.unbind(),this.$element.removeData(o)}},s.DEFAULTS={label:!1,trigger:!1,button:!1,clear:!1},s.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new s(this,n))}"string"==typeof n&&l.isFunction(t=i[n])&&t.apply(i)})},l(function(){var e='[data-toggle="qor.filter.time"]',i={label:".qor-filter__block-buttons button",trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};l(document).on("disable.qor.filter",function(t){s.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(l(e,t.target),i)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var c=window.location,o="qor.filter",t="enable."+o,e="click."+o,i="change."+o,n=".qor-bottomsheets",h=/([^&=]+)(=([^&]*))?/g,r=/\+/g;function u(t){return decodeURIComponent(t.replace(r," "))}function s(t,e){this.$element=d(t),this.options=d.extend({},s.DEFAULTS,d.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){this.bind()},bind:function(){var t=this.options;this.$element.on(e,t.label,d.proxy(this.toggle,this)).on(i,t.group,d.proxy(this.toggle,this))},unbind:function(){this.$element.off(e,this.toggle).off(i,this.toggle)},toggle:function(t){var e=d(t.currentTarget),i=function(t){var e=decodeURI(void 0===t?c.search:t),i={},n=void 0;for(e&&"?"===e[0]&&(e=e.substring(1));n=h.exec(e);){var o=u(n[1]),r=u(n[3]);"[]"===o.substring(o.length-2)?(i[o]||(i[o]=[])).push(r):i[o]=r}return{params:i,isArray:function(t){return"[]"===t.substring(t.length-2)},remove:function(t){delete this.params[t]},set:function(t,e){"[]"===t.substring(t.length-2)?(this.params[t]=this.params[t]||[],this.params[t].push(e)):this.params[t]=e},removeAny:function(t,e){this.params.hasOwnProperty(t)&&(this.params[t]=this.params[t].filter(function(t){return e.indexOf(t)<0}),this.params[t].length||this.remove(t))},removeItem:function(t,e){this.params.hasOwnProperty(t)&&(this.params[t]=this.params[t].filter(function(t){return t!==e}),this.params[t].length||this.remove(t))},encode:function(){var t=d.param(this.params);return t.length?"?"+t:""}}}(),n=void 0,o=void 0,r=void 0;if(e.is("select")){if(n=e.attr("name"),o=e.val(),i.isArray(n)){var s=[];e.children().each(function(t,e){return s[s.length]=d(e).prop("value")}),i.removeAny(n,s),o&&i.set(n,o)}else o?i.set(n,o):i.remove(n);r=i.encode()}else if(e.is("a")){t.preventDefault();var a=e.attr("href"),l=a.indexOf("?");r=0<=l?a.substring(0,l):"?"}else e.is("input")&&(n=e.attr("name"),(o=e.val())?i.set(n,o):i.remove(n),r=i.encode());this.applySearch(r,n)},applySearch:function(t,e){this.$element.closest(n).length?d(n).trigger("filterChanged.qor.filter",[t,e]):c.search=t},destroy:function(){this.unbind(),this.$element.removeData(o)}},s.DEFAULTS={label:!1,group:!1},s.plugin=function(n){return this.each(function(){var t,e=d(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new s(this,n))}"string"==typeof n&&d.isFunction(t=i[n])&&t.apply(i)})},d(function(){var e='[data-toggle="qor.filter"]',i={label:"a",group:"select,input"};d(document).on("disable.qor.filter",function(t){s.plugin.call(d(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(d(e,t.target),i)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var t=d(window),o="qor.flex-row-wraped-fixer",e="resize."+o,i="beforeprint."+o,n="afterprint."+o;function r(t,e){this.$el=d(t),this.options=d.extend({},r.DEFAULTS,d.isPlainObject(e)&&e),this.$children=this.$el.children(),this.$children.length&&this.init()}r.prototype={constructor:r,init:function(){this.bind(),this.fix()},bind:function(){t.on(e,this.fix.bind(this)).on(n,this.afterPrint.bind(this)).on(i,this.beforePrint.bind(this))},unbind:function(){t.off(e,this.fix).off(n,this.afterPrint).off(i,this.beforePrint)},beforePrint:function(){this.fix()},afterPrint:function(){this.fix()},fix:function(){var r=this.$el.css("--item-distance"),s=this.$children,n=parseInt(this.$el.width());if(r){var o=[],a=[o],l=0;s.each(function(){d(this).children().css({marginLeft:0,marginRight:0,width:"auto"})}),s.each(function(t){var e=d(this),i=parseInt(e.width());0<l&&n<l+i?(o=[],a[a.length]=o,l=i):l+=i,o[o.length]=[t,i]}),a.forEach(function(o){o.forEach(function(t,e){var i=d(s[t[0]]),n=i.width();1<o.length&&(0===e?i.children().css({marginRight:r/2,width:n-r/2}):e===o.length-1?i.children().css({marginLeft:r/2,width:n-r/2}):i.children().css({marginLeft:r/2,marginRight:r/2,width:n-r}))})})}},destroy:function(){this.unbind(),this.$el.removeData(o)}},r.DEFAULTS={header:!1,content:!1},r.plugin=function(n){return this.each(function(){var t,e=d(this),i=e.data(o);i||e.data(o,i=new r(this,n)),"string"==typeof n&&d.isFunction(t=i[n])&&t.call(i)})}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(e){e(window),window._;var t="qor.fixer",i="enable."+t;e(function(){e(document).on(i,function(t){e(".collection-edit-tabled",t.target).each(function(){var t=e(this).parent().parent();t.is(".sec-col")&&t.css({marginRight:0,marginLeft:0})})}).on("disable.qor.fixer",function(t){}).triggerHandler(i)})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var t=o(window),r=(window._,"qor.head-fixer"),e="resize."+r,i="beforeprint."+r,n="afterprint."+r,s=".qor-page__body";function a(t,e){this.$element=o(t),this.options=o.extend({},a.DEFAULTS,o.isPlainObject(e)&&e),this.$clone=null,this.init()}a.prototype={constructor:a,init:function(){this.bind(),this.fix()},bind:function(){t.on(e,this.fix.bind(this)).on(n,this.afterPrint.bind(this)).on(i,this.beforePrint.bind(this))},unbind:function(){t.off(e,this.fix).off(n,this.afterPrint).off(i,this.beforePrint)},beforePrint:function(){o(s).each(function(){o(this).removeAttr("style")})},afterPrint:function(){this.fix()},fix:function(){o(s).each(function(){var t=o(this),e=t.siblings(".qor-page__header");0!==e.length&&(t.css("paddingTop",0),"fixed"!==e.css("position")?t.css("marginTop",0):t.css("marginTop",e.height()),e.children(":visible").length?e.removeClass("no-visibile-items",!0).show():e.addClass("no-visibile-items",!0).hide())})},destroy:function(){this.unbind(),this.$element.removeData(r)}},a.DEFAULTS={header:!1,content:!1},a.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);i||e.data(r,i=new a(this,n)),"string"==typeof n&&o.isFunction(t=i[n])&&t.call(i)})},o(".qor-page > .qor-page__header").each(function(){var i=o(this).siblings(".qor-page__body").find("> .qor-table-container > table > thead");i.length&&new ResizeObserver(function(t){var e=t[0].contentRect;e.width,e.height;i.css({top:e.height})}).observe(this)})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var o="qor.inlineEdit",t="enable."+o,e="click."+o,i="mouseenter."+o,n="mouseleave."+o,d=".qor-field",c=".qor-field__show",h=".qor-field__show-inner",r=".qor-inlineedit__edit",s=".qor-inlineedit__save",u=".qor-inlineedit__buttons",a=".qor-inlineedit__cancel",f="qor-inlineedit__field";function p(t,e){this.$element=l(t),this.options=l.extend({},p.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return p.prototype={constructor:p,init:function(){var t=this.$element,e=t.data("button-save"),i=t.data("button-cancel");this.TEMPLATE_SAVE='<div class="qor-inlineedit__buttons">\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__cancel" type="button">'+i+'</button>\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__save" type="button">'+e+"</button>\n                                      </div>",this.bind()},bind:function(){this.$element.on(i,c,this.showEditButton).on(n,c,this.hideEditButton).on(e,a,this.hideEdit).on(e,s,this.saveEdit).on(e,r,this.showEdit.bind(this))},unbind:function(){this.$element.off(i,c,this.showEditButton).off(n,c,this.hideEditButton).off(e,a,this.hideEdit).off(e,s,this.saveEdit).off(e,r,this.showEdit)},showEditButton:function(t){var e=l(p.TEMPLATE_EDIT);if(l(t.target).closest(d).find("input:disabled, textarea:disabled,select:disabled").length)return!1;e.appendTo(l(this))},hideEditButton:function(){l(".qor-inlineedit__edit").remove()},showEdit:function(t){var e=l(t.target).closest(r).hide().closest(d).addClass(f);l(this.TEMPLATE_SAVE).appendTo(e)},hideEdit:function(){l(this).closest(d).removeClass(f).find(u).remove()},saveEdit:function(){var n=l(this),o=n.closest(d),t=n.closest("form"),e=o.closest(".qor-fieldset").find('input.qor-hidden__primary_key[type="hidden"]'),i=o.find('input[name*="QorResource"],textarea[name*="QorResource"],select[name*="QorResource"]'),r=t.find("input[name=_method]"),s=i.length&&i.prop("name").match(/\.\w+/g),a=i.serialize();e.length&&(a=a+"&"+e.serialize()),a+="&qorInlineEdit=true",0<r.length&&(a+="&_method="+r.val()),s.length&&l.ajax(t.prop("action"),{method:t.prop("method"),data:a,dataType:"json",beforeSend:function(){n.prop("disabled",!0)},success:function(t){var e=function(t,e){var i=void 0,n=e[t[0].slice(1)];if(1<t.length)for(var o=1;o<t.length;o++)i=t[o].slice(1),n=l.isArray(n)?n[0][i]:n[i];return n}(s,t),i=o.removeClass(f).find(c);i.find(h).length?i.find(h).html(e):i.html(e),o.find(u).remove(),n.prop("disabled",!1)},error:function(t,e,i){window.alert([e,i].join(": ")),n.prop("disabled",!1)}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},p.DEFAULTS={},p.TEMPLATE_EDIT='<button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored qor-inlineedit__edit" type="button"><i class="material-icons">mode_edit</i></button>',p.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);i||e.data(o,i=new p(this,n)),"string"==typeof n&&l.isFunction(t=i[n])&&t.call(i)})},l(function(){if(/\/admin\//.test(location.href))return this;var e='[data-toggle="qor.inlineEdit"]',i={};l(document).on("disable.qor.inlineEdit",function(t){p.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){p.plugin.call(l(e,t.target),i)}).triggerHandler(t)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function($){var NAMESPACE="qor.input_mask",EVENT_ENABLE="enable."+NAMESPACE,EVENT_DISABLE="disable."+NAMESPACE;function QorInputMask(t,e){var i=$(t),n=i.data("masker");n?(this.$el=i,this.masker=atob(n),this.options=$.extend({},QorInputMask.DEFAULTS,$.isPlainObject(e)&&e),this.init()):this.maker=null}return QorInputMask.prototype={constructor:QorInputMask,init:function(){this.bind()},bind:function bind(){(function(masker){eval(masker)}).call(this.$el,this.masker)},unbind:function(){this.$el.unmask()},destroy:function(){this.unbind(),this.$el.removeData(NAMESPACE)}},QorInputMask.DEFAULTS={},QorInputMask.plugin=function(n){return this.each(function(){var t=$(this),e=t.data(NAMESPACE),i=void 0;if(!e){if(/destroy/.test(n))return;if(!("masker"in(e=new QorInputMask(this,n))))return;t.data(NAMESPACE,e)}"string"==typeof n&&$.isFunction(i=e[n])&&i.apply(e)})},$(function(){var e="[data-masker]",i={};$(document).on(EVENT_DISABLE,function(t){QorInputMask.plugin.call($(e,t.target),"destroy")}).on(EVENT_ENABLE,function(t){QorInputMask.plugin.call($(e,t.target),i)}).triggerHandler(EVENT_ENABLE)}),QorInputMask}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="qor.input_money",i="input.input-money",t="enable."+s,e="change."+s;function a(t,e){this.$el=r(t);var i=this.$el.closest(".mdl-js-textfield");this.MDL=i.length?i[0].MaterialTextfield:null,this.init()}return a.prototype={constructor:a,init:function(){this.bind()},bind:function(){this.$el.maskMoney(),this.$el.on(e,this.changed.bind(this))},destroy:function(){this.$el.maskMoney("destroy"),this.$el.removeData(s),this.$el.off(e,this.changed),this.MDL=null},changed:function(t){if(!this.MDL){var e=this.$el.closest(".mdl-js-textfield");this.MDL=e.length?e[0].MaterialTextfield:null}this.MDL&&this.MDL.checkDirty()}},a.DEFAULTS={},a.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=r(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;if(!("$el"in(i=new a(this,n))))return;e.data(s,i)}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i,o)})},r(function(){var e={};r(document).on("disable.qor.input_money",function(t){a.plugin.call(r(i,t.target),"destroy")}).on(t,function(t){a.plugin.call(r(i,t.target),e)}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(e){var t="enable.qor.input_timer";e(function(){e(document).on(t,function(t){e('input.mdl-textfield__input[type="datetime-local"],input.mdl-textfield__input[type="date"]',t.target).each(function(){var t=e(this).closest(".mdl-textfield");1===t.length&&new MaterialTextfield(t[0])})}).triggerHandler(t)})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function($){var NAMESPACE="qor.input_remote_validation",EVENT_ENABLE="enable."+NAMESPACE,EVENT_DISABLE="disable."+NAMESPACE,EVENT_CHANGE="change."+NAMESPACE;function QorInputValidator(element,options){var $el=$(element),$form=$el.parents("form"),validator=$el.data("validator");options=$.extend({},QorInputValidator.DEFAULTS,$.isPlainObject(options)&&options),validator&&(eval("validator = function(){"+atob(validator)+"};"),this.validator=validator.call(this),$.isFunction(this.validator)?(this.$el=$el,this.$form=$form,this.options=options,this.init()):alert("ERROR: BAD input validator for '"+$el.attr("name")+"'"))}return QorInputValidator.prototype={constructor:QorInputValidator,init:function(){this.bind()},_do:function(){},bind:function(){this.$el.on(EVENT_CHANGE,this.validate.bind(this)),this.$form.formValidator("register",this._validateByForm.bind(this),function(t){this._do=t}.bind(this))},_validateByForm:function(t,e){this.validator(t,e)},validator:function(t,e){},validate:function(t){return this.$el.val()===this.$el[0].defaultValue||(this._do(function(t){t&&QOR.alert(t,function(){this.$el.focus()}.bind(this))}.bind(this),t),!1)},unbind:function(){this.$el.off(EVENT_CHANGE)},destroy:function(){this.unbind(),this.$el.removeData(NAMESPACE)}},QorInputValidator.DEFAULTS={},QorInputValidator.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=$(this),i=e.data(NAMESPACE);if(!i){if(/destroy/.test(n))return;if(!("$el"in(i=new QorInputValidator(this,n))))return;e.data(NAMESPACE,i)}"string"==typeof n&&$.isFunction(t=i[n])&&t.apply(i,o)})},$(function(){var e="[data-validator]",i={};$(document).on(EVENT_DISABLE,function(t){QorInputValidator.plugin.call($(e,t.target),"destroy")}).on(EVENT_ENABLE,function(t){QorInputValidator.plugin.call($(e,t.target),i)}).triggerHandler(EVENT_ENABLE)}),QorInputValidator}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="qor.logo",i=".qor-logo[data-src]",t="load."+s,e="error."+s,n="enable."+s;function a(t,e){this.$el=r(t),this.data=this.$el.data(),this.$img=r("<img />"),this.fallback=!1,this.init()}return a.prototype={constructor:a,init:function(){this.build()},build:function(){this.$img.attr("src",this.data.src).on(t,this.onload.bind(this)).on(e,this.onerror.bind(this)),this.data.alt&&this.$img.attr("alt",this.data.alt),this.data.title&&this.$img.attr("title",this.data.title),this.$el.show().append(this.$img)},onerror:function(t){this.fallback?this.destroy():this.data.fallback?(this.fallback=!0,this.$img.attr("src",this.data.fallback)):this.destroy()},onload:function(t){this.unbind()},unbind:function(){this.$img.off(t,this.onload).off(e,this.onerror)},destroy:function(){this.unbind(),this.$el.removeData(s),this.$el.hide(),this.$img.remove()}},a.DEFAULTS={},a.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=r(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;if(!("$el"in(i=new a(this,n))))return;e.data(s,i)}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i,o)})},r(function(){var e={};r(document).on("disable.qor.logo",function(t){a.plugin.call(r(i,t.target),"destroy")}).on(n,function(t){a.plugin.call(r(i,t.target),e)}).triggerHandler(n)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(i){var n=window.componentHandler,o='[class*="mdl-js"],[class*="mdl-tooltip"]';function e(t){var e=i(t);n&&(e.is(o)?n.upgradeElements(t):n.upgradeElements(i(o,t).toArray()))}function r(t){var e=i(t);n&&(e.is(o)?n.downgradeElements(t):n.downgradeElements(i(o,t).toArray()))}i(function(){i(document).on("enable.qor.material",function(t){e(t.target)}).on("disable.qor.material",function(t){r(t.target)}).on("update.qor.material",function(t){r(t.target),e(t.target)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var n=o(document),r="qor.modal",t="click."+r,e="keyup."+r,s="transitionend",a="qor-modal-open",l="in",i="aria-hidden";function d(t,e){this.$element=o(t),this.options=o.extend({},d.DEFAULTS,o.isPlainObject(e)&&e),this.transitioning=!1,this.fadable=!1,this.init()}return d.prototype={constructor:d,init:function(){this.fadable=this.$element.hasClass("fade"),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(t,o.proxy(this.click,this)),this.options.keyboard&&n.on(e,o.proxy(this.keyup,this))},unbind:function(){this.$element.off(t,this.click),this.options.keyboard&&n.off(e,this.keyup)},click:function(t){var e=this.$element[0],i=t.target;if(i===e&&this.options.backdrop)this.hide();else for(;i!==e;){if("modal"===o(i).data("dismiss")){this.hide();break}i=i.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(t){var e,i=this.$element;if(!this.transitioning&&!i.hasClass(l)&&(e=o.Event("show.qor.modal"),i.trigger(e),!e.isDefaultPrevented())){if(n.find("body").addClass(a),i.addClass("shown").scrollTop(0).get(0).offsetHeight,this.transitioning=!0,t||!this.fadable)return i.addClass(l),void this.shown();i.one(s,o.proxy(this.shown,this)),i.addClass(l)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(i,!1).trigger("shown.qor.modal").focus()},hide:function(t){var e,i=this.$element;if(!this.transitioning&&i.hasClass(l)&&(e=o.Event("hide.qor.modal"),i.trigger(e),!e.isDefaultPrevented())){if(n.find("body").removeClass(a),this.transitioning=!0,t||!this.fadable)return i.removeClass(l),void this.hidden();i.one(s,o.proxy(this.hidden,this)),i.removeClass(l)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass("shown").attr(i,!0).trigger("hidden.qor.modal")},toggle:function(){this.$element.hasClass(l)?this.hide():this.show()},destroy:function(){this.$element.removeData(r)}},d.DEFAULTS={backdrop:!1,keyboard:!0,show:!0},d.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new d(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o.fn.qorModal=d.plugin,o(function(){var e=".qor-modal";o(document).on(t,'[data-toggle="qor.modal"]',function(){var t=o(this),e=t.data(),i=o(e.target||t.attr("href"));d.plugin.call(i,i.data(r)?"toggle":e)}).on("disable.qor.modal",function(t){d.plugin.call(o(e,t.target),"destroy")}).on("enable.qor.modal",function(t){d.plugin.call(o(e,t.target))})}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="qor.password_visibility",i='[data-toggle="qor.password_visibility"]',t="enable."+s,e="click."+s;function a(t,e){this.$el=r(t),this.init()}return a.prototype={constructor:a,init:function(){this.flag=!1,this.$icon=this.$el.find("i"),this.$target=this.$el.parents("div:eq(0)").children("input[type=password]"),this.icons=[this.$icon.text(),this.$el.data("toggleIcon")],this.bind()},bind:function(){this.$el.bind(e,this.toggle.bind(this))},toggle:function(){this.flag=!this.flag,this.$icon.html(this.icons[+this.flag]),this.$target.attr("type",this.flag?"text":"password")},destroy:function(){this.$el.off(e,this.toggle),this.$el.removeData(s)}},a.DEFAULTS={},a.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=r(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;if(!("$el"in(i=new a(this,n))))return;e.data(s,i)}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i,o)})},r(function(){var e={};r(document).on("disable.qor.password_visibility",function(t){a.plugin.call(r(i,t.target),"destroy")}).on(t,function(t){a.plugin.call(r(i,t.target),e)}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var o="qor.tabbar.radio",t="enable."+o,e="click."+o,a="[data-tab-target]",l="is-active";function r(t,e){this.$element=s(t),this.options=s.extend({},r.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){this.bind()},bind:function(){this.$element.on(e,a,this.switchTab.bind(this))},unbind:function(){this.$element.off(e,a,this.switchTab)},switchTab:function(t){var e=s(t.target),i=this.$element,n=i.find(a),o=i.find("[data-tab-source]"),r=e.data().tabTarget;e.hasClass(l)||(n.removeClass(l),e.addClass(l),o.hide().filter('[data-tab-source="'+r+'"]').show(),i.trigger("switched.qor.tabbar.radio",[i,r]))},destroy:function(){this.unbind()}},r.DEFAULTS={},r.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new r(this,n))}"string"==typeof n&&s.isFunction(t=i[n])&&t.apply(i)})},s(function(){var e='[data-toggle="qor.tab.radio"]';s(document).on("disable.qor.tabbar.radio",function(t){r.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(s(e,t.target))}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var d="qor.redactor",t="enable."+d,c="click."+d,n="keyup."+d,e="addCrop."+d,i="removeCrop."+d,h="scroll."+d,o=".qor-cropper__toggle--redactor",u="#redactor-link-title",f="#redactor-link-url-text",p="#redactor-modal-button-cancel";function m(t){return t.replace(/&/g," ").replace(/</g," ").replace(/>/g," ").replace(/\"/g," ").replace(/\'/g," ").replace(/\`/g," ")}function g(t,e){this.$element=l(t),this.options=l.extend(!0,{},g.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return g.prototype={constructor:g,init:function(){var t=this.options,e=this.$element,i=e.closest(t.parent);i.length||(i=e.parent()),this.$parent=i,this.$button=l(g.BUTTON),this.$modal=l(function(i,t){return"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&l.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i}(g.MODAL,t.text)).appendTo("body"),this.bind()},bind:function(){this.$element.on(e,l.proxy(this.addButton,this)).on(i,l.proxy(this.removeButton,this))},unbind:function(){this.$element.off(e).off(i).off(h)},addButton:function(t,e){var i=l(e);this.$button.css("left",l(e).width()/2).prependTo(i.parent()).find(o).one(c,l.proxy(this.crop,this,i))},removeButton:function(){this.$button.find(o).off(c),this.$button.detach()},crop:function(i){var n=this.options,t=i.attr("src"),e=t,o=l("<img>"),r=this.$modal;l.isFunction(n.replace)&&(e=n.replace(e)),o.attr("src",e),r.one("shown.qor.modal",function(){o.cropper({data:function(t){var e=t&&t.split(",");return t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t}(i.attr("data-crop-options")),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){r.find(".qor-cropper__save").one(c,function(){var e=o.cropper("getData",!0);l.ajax(n.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:t,CropOptions:{original:function(t){var e,i,n={};if(l.isPlainObject(t))for(e in t)t.hasOwnProperty(e)&&(n[("string"==typeof(i=e)&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i)]=t[e]);return n}(e)},Crop:!0}),dataType:"json",success:function(t){l.isPlainObject(t)&&t.url&&(i.attr("src",t.url).attr("data-crop-options",function(t){var e=[];return l.isPlainObject(t)&&l.each(t,function(){e.push(arguments[1])}),e.join()}(e)).removeAttr("style").removeAttr("rel"),l.isFunction(n.complete)&&n.complete(),r.qorModal("hide"))}})})}})}).one("hidden.qor.modal",function(){o.cropper("destroy").remove()}).qorModal("show").find(".qor-cropper__wrapper").append(o)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(d)}},g.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},g.BUTTON='<div class="qor-redactor__image--buttons">\n            <span class="qor-redactor__image--edit" contenteditable="false">Edit</span>\n            <span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>\n        </div>',g.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n              <div class="mdl-card__title">\n                <h2 class="mdl-card__title-text">$[title]</h2>\n              </div>\n              <div class="mdl-card__supporting-text">\n                <div class="qor-cropper__wrapper"></div>\n              </div>\n              <div class="mdl-card__actions mdl-card--border">\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">$[ok]</a>\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n              </div>\n              <div class="mdl-card__menu">\n                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close">\n                  <i class="material-icons">close</i>\n                  </button>\n              </div>\n            </div>\n        </div>',g.plugin=function(i){return this.each(function(){var r=l(this),s=r.data(d),t=void 0,e=void 0;if(s)/destroy/.test(i)&&r.redactor("destroy");else{if(!l.fn.redactor)return;if(/destroy/.test(i))return;r.data(d,s={});var a=["html","format","bold","italic","deleted","lists","image","file","link","table"];t={imageUpload:r.data("uploadUrl"),fileUpload:r.data("uploadUrl"),imageResizable:!0,imagePosition:!0,toolbarFixed:!1,buttons:a,callbacks:{init:function(){var e=void 0,t=this.core.box(),i=l(".qor-slideout").is(":visible"),n=void 0,o=64;a.forEach(function(t){e=this.button.get(t),this.button.setIcon(e,'<i class="material-icons '+t+'"></i>')},this),i?(n=".qor-slideout",o=l(".qor-slideout__header").height()):o+=l(n=".qor-layout main.qor-page").find(".qor-page__header").height(),l(n).on(h,function(){!function(t,e){var i=t.find(".redactor-toolbar"),n=t.offset().top,o=t.height(),r={position:"relative",top:"auto",width:"auto",boxShadow:"none"},s={position:"fixed",boxShadow:"0 2px 4px rgba(0,0,0,.1)",top:e,width:t.width()};"relative"===i.css("position")&&(o=t.height()-50),n<e?o-50-e<Math.abs(n)?i.css(r):i.css(s):i.css(r)}(t,o)}),r.data("cropUrl")&&r.data(d,s=new g(r,{remote:r.data("cropUrl"),text:r.data("text"),parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:l.proxy(function(){this.code.sync()},this)}))},imageUpload:function(t,e){var i=l(t);e.filelink&&i.prop("src",e.filelink)},click:function(t){var e=l(this.selection.parent());e.is(".redactor-layer")&&(e=l(this.selection.current())),this.selection.$currentTag=e,this.link.linkDescription="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.is()&&(this.link.linkDescription=this.link.get().prop("title"),this.link.$linkHtml=l(t.target))},modalOpened:function(t,e){var i=this;"link"==t&&(l(e).find("#redactor-link-url-text").closest("section").after('<section><label>Description for Accessibility</label><input value="'+this.link.linkDescription+'" type="text" id="redactor-link-title" placeholder="If blank, will use Text value above" /></section>'),this.link.linkUrlText=l(f).val(),this.link.description=l(u).val(),l(u).off(n),l(f).off(n),l(p).off(c),l(p).on(c,function(){i.link.clickCancel=!0}),l(u).on(n,function(){i.link.valueChanged=!0,i.link.description=m(l(this).val())}),l(f).on(n,function(){i.link.valueChanged=!0,i.link.linkUrlText=m(l(this).val())}))},modalClosed:function(t){var e=this.link.$linkHtml,i=this.link.description;"link"==t&&!this.link.insertedTriggered&&e&&e.length&&this.link.valueChanged&&!this.link.clickCancel&&(i?e.prop("title",i):e.prop("title",this.link.linkUrlText)),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.clickCancel=!1},insertedLink:function(t){var e=l(t),i=this.link.description;e.prop("title",i||e.text()),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!0},fileUpload:function(t,e){l(t).prop("href",e.filelink).html(e.filename)}}},l.extend(t,r.data("redactorSettings")),r.redactor(t)}"string"==typeof i&&l.isFunction(e=s[i])&&e.apply(s)})},l(function(){var e='textarea[data-toggle="qor.redactor"]';l(document).on("disable.qor.redactor",function(t){g.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){g.plugin.call(l(e,t.target))}).triggerHandler(t)}),g}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(u){var r=window._,c={v:0},f="qor.replicator",t="enable."+f,s="click."+f,h=".qor-fieldset-container,.qor-replicator-container";function a(t,e){this.$element=u(t),this.options=u.extend({},a.DEFAULTS,{},u.isPlainObject(e)&&e),this.index=0,this.init()}return a.prototype={constructor:a,init:function(){var i=this,t=this.$element,e=t.find('> template[type="qor-collection-edit-new/html"]'),n=t.data(),o=t.find("> .qor-field__block "+(this.options.rootSelector||n.rootSelector||"")),r=void 0,s=u.extend({},this.options.alertTemplate,!0),a=void 0;for(var l in this.$root=o,this.baseClass=n.baseClass?n.baseClass:"fieldset",this.itemSelector=n.itemSelector?n.itemSelector:this.options.itemClass,this.isInSlideout=t.closest(".qor-slideout").length,this.hasInlineReplicator=t.find(h).length,this.maxitems=n.maxItem,this.isSortable=t.hasClass(this.options.sortableClass),this.$target=t.find("."+this.baseClass+"__target"),this.$target.length||(this.$target=null),n.alertTag&&(s.tag=n.alertTag),a=u("<"+s.tag+">"),s.attrs)a.attr(l,s.attrs[l]);a.html(s.body),this.alertTemplate=a.wrapAll("<div>").parent().html().replace("UNDO_DELETE_MESSAGE",QOR.messages.replicator.undoDelete),this.canCreate=0<e.length,this.isMultipleTemplate=t.data("isMultiple"),this.canCreate&&(this.isMultipleTemplate?(this.fieldsetName=[],this.template={},this.index=[],e.each(function(t,e){(r=u(e).data("fieldsetName"))&&(i.template[r]=u(e).html(),i.fieldsetName.push(r))}),this.parseMultiple()):(this.template=e.html(),this.prefix=e.attr("data-prefix"),this.index=e.data("next-index"))),this.id=""+(c.v++,c.v),this.$element.attr("data-qor-replicator",this.id),this.bind(),this.resetButton(),this.resetPositionButton();var d=this.del.bind(this);u(this.itemSelector+"[data-deleted]",o).each(function(){d({target:this})})},resetPositionButton:function(){var t=this.$element.find("> .qor-sortable__button");this.isSortable&&(1<this.getCurrentItems()?t.show():t.hide())},getCurrentItems:function(){return this.$root.find("> "+this.itemSelector).not(".is-deleted").length},toggleButton:function(t){var e=this.$element.find(this.options.addClass);t?e.hide():e.show()},resetButton:function(){this.maxitems<=this.getCurrentItems()?this.toggleButton(!0):this.toggleButton()},parseMultiple:function(){for(var t=void 0,e=void 0,i=this.fieldsetName,n=0,o=i.length;n<o;n++)e=i[n],t=this.initTemplate(this.template[e]),this.template[e]=t.template,this.index.push(t.index);this.multipleIndex=r.max(this.index)},bind:function(){var t=this.options;this.canCreate&&this.$element.on(s,t.addClass,this.add.bind(this)),this.$element.on(s,t.delClass,this.del.bind(this))},unbind:function(){this.$element.off(s),this.isInSlideout||u(document).off("submit.qor.replicator","form"),u(document).off("slideoutBeforeSend.qor.slideout.replicator",".qor-slideout").off("selectcoreBeforeSend.qor.selectcore.replicator bottomsheetBeforeSend.qor.bottomsheets.replicator")},add:function(t,e,i){if(this.accept(t.target)){var n=this.options,o=void 0,r=void 0;if(this.maxitems<=this.getCurrentItems())return!1;if(!i)var s=u(t.target).closest(n.addClass),a=s.data("template"),l=s.closest(this.$element).children(n.childrenClass),d=s.closest(n.childrenClass).children("fieldset");if(this.isMultipleTemplate){for(var c in this.parseNestTemplate(a),r=this.template[a],o=u(r.replace(/(["\s][^"\s]+?)(\{\{index\}\})/g,"$1"+this.multipleIndex)).data(f+".new",!0),s.data())if(c.match(/^sync/)){var h=c.replace(/^sync/,"");o.find("[name*='."+h+"']").val(s.data(c))}this.$target?this.$target.append(o.show()):d.length?d.last().after(o.show()):l.prepend(o.show()),o.data("itemIndex",this.multipleIndex).removeClass(this.options.newClass.substr(1)),this.multipleIndex++}else i?e&&e.length&&(this.addMultiple(e),u(document).trigger("addedMultipleDone.qor.replicator")):(o=this.addSingle(),this.$target?this.$target.append(o.show()):s.before(o.show()),this.index++);i||(o.trigger("enable"),u(document).trigger("added.qor.replicator",[o]),t.stopPropagation()),this.resetPositionButton(),this.resetButton()}},addMultiple:function(t){for(var e=void 0,i=0,n=t.length;i<n;i++)e=this.addSingle(),this.index++,u(document).trigger("addedMultiple.qor.replicator",[e,t[i]])},addSingle:function(){var i=this,t=void 0;if(t=u(this.template.replace(/(="\S*?)(\{\{index\}\})/g,function(t,e){return e+i.index})),this.isSortable){var e=this.$root.find("> .qor-sortable__item").length;t.attr("order-index",e).css("order",e)}return t.data("itemIndex",this.index).removeClass(this.options.newClass.substr(".")),t.data(f+".new",!0)},accept:function(t){return u(t).parents("[data-qor-replicator]:eq(0)").attr("data-qor-replicator")===this.id},del:function(t){var e=u(t.target);if(this.accept(e)){var i=e.is(this.itemSelector)?e:e.closest(this.itemSelector),n=this.options,o=this.parseName(i),r=void 0;i.data(f+".new")?i.remove():(i.addClass("is-deleted").children(":visible").addClass("hidden").hide(),(r=u(this.alertTemplate.replaceAll("{{name}}",o).replaceAll("{{id}}",i.data().primaryKey))).find(n.undoClass).one(s,function(){if(this.maxitems<=this.getCurrentItems())return window.QOR.qorConfirm(this.$element.data("maxItemHint")),!1;i.find("> "+this.options.alertClass).remove(),i.removeClass("is-deleted").children(".hidden").removeClass("hidden").show(),this.resetButton(),this.resetPositionButton()}.bind(this)),i.append(r)),this.resetButton(),this.resetPositionButton()}},parseNestTemplate:function(t){var e=this.$element,i=void 0;e.parents(".qor-fieldset-container").length&&(i=e.closest(this.itemSelector).data("itemIndex"))&&(t?this.template[t]=this.template[t].replace(/\[\d+\]/g,"["+i+"]"):this.template=this.template.replace(/\[\d+\]/g,"["+i+"]"))},parseName:function(t){var e=t.find("input[name],select[name]").eq(0).attr("name")||t.find("textarea[name]").attr("name");return e&&(e=e.split(".").slice(0,-1).join(".")),this.prefix&&(e=this.prefix+e.substr(this.prefix.length).replace(/^(.+)[.|\[].+$/i,"$1")),e},destroy:function(){this.unbind(),this.$element.removeData(f)}},u.extend({},QOR.messages,{replicator:{undoDelete:"Undo Delete"}},!0),a.DEFAULTS={rootSelector:"",itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",sortableClass:".qor-fieldset-sortable",alertClass:".qor-fieldset__alert",alertTemplate:{tag:"div",attrs:{class:"qor-fieldset__alert"},body:'<input type="hidden" name="{{name}}._destroy" value="1"><input type="hidden" name="{{name}}.id" value="{{id}}"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button" title="UNDO_DELETE_MESSAGE"><span class="material-icons">undo</span> </button>'}},a.plugin=function(o){return this.each(function(){var t=u(this),e=t.data(f),i=void 0;if(!e){if(!o)return;t.data(f,e=new a(this,o))}if(o){if("string"==typeof o)if(u.isFunction(i=e[o])){var n=i.apply(e,Array.prototype.slice.call(arguments,1));if(void 0!==n)return n}else if(o in e)return e[o]}else if(e)return e})},u.fn.qorReplicator=a.plugin,u(function(){var e=h,i={};u(document).on("disable.qor.replicator",function(t){a.plugin.call(u(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(u(e,t.target),i)}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var a="qor.load_resource",i='input[data-toggle="'+a+'"]',t="enable."+a,e="change."+a;function l(t,e){this.$el=s(t),this.options=s.extend({},this.$el.data(),e||{}),this.init()}return l.prototype={constructor:l,init:function(){function t(t){if(!t)return null;var e=i.find(t);return e.length?e:null}var i=this.$el.closest("form");i.length||(i=s("body")),this.$scope=i,this.url=this.options.resourceUrl,this.param=this.options.param||"id",this.loading=!1,this.$string=t(this.options.targetString),this.$error=t(this.options.targetError),this.$val=t(this.options.targetVal),this.$error&&this.$error.length&&(this.$error.is(".mdl-textfield__error")?this.errorHandler={show:function(){this.$el.parents(".mdl-textfield:eq(0)").addClass("is-invalid")}.bind(this),hide:function(){this.$el.parents(".mdl-textfield:eq(0)").removeClass("is-invalid")}.bind(this)}:this.errorHandler={show:function(){this.$error.show()}.bind(this),hide:function(){this.$error.hide()}.bind(this)}),this.$loading=this.options.targetLoading?i.find(this.options.targetLoading).hide():null,this.selectedTemplate=this.$el.siblings('template[name="selected-template"]').html().replace(/\[\[ *&amp;/g,"[[&"),this.bind()},bind:function(){this.$el.bind(e,this.find.bind(this))},enabledAll:function(){},setError:function(t){this.errorHandler?(this.$error.html(t),this.errorHandler.show(),this.$string.addClass("").html("").hide()):this.$string.addClass("mdl-textfield__error").html(t),this.$val&&this.$val.val("")},setStringValue:function(t,e){this.$string.removeClass("mdl-textfield__error").html(e).show(),this.errorHandler&&(this.$error.html(""),this.errorHandler.hide());var i=t[this.options.primaryField||"ID"];i&&(this.$el[0].value=i),this.$val&&this.$val.val(i||this.$el.val())},setResult:function(t){if(s.isArray(t))switch(t.length){case 1:t=t[0];break;default:t=null}null===t?this.setError(window.QOR.messages.common.recordNotFoundError):this.setStringValue(t,Mustache.render(this.selectedTemplate,t))},onResponse:function(t){if(this.findDone(),t.ok)return t.json();this.setError("HTTP ERROR: "+t.status)},findDone:function(t){this.$loading.hide(),this.$el.removeAttr("disabled"),this.loading=!1,t&&console.log(t)},find:function(){if(!this.loading){this.$el.removeClass("is-invalid");var t=this.$el.val().replace(/(^\s+|\s+$)/gms,""),e=this.url+(-1!==this.url.indexOf("?")?"&":"?")+this.param+"="+encodeURI(t);e=QOR.Xurl(e,this.$val).build().url,""!==t?(this.loading=!0,this.$loading&&this.$loading.show(),this.$el.attr("disabled","disabled"),fetch(e,{method:"GET",headers:new Headers({Accept:"application/json"}),cache:"no-store"}).then(this.onResponse.bind(this)).then(this.setResult.bind(this)).catch(this.findDone.bind(this))):this.setResult(null)}},destroy:function(){this.$el.off(e,this.find),this.$el.removeData(a),this.$el.unmask()}},l.DEFAULTS={},l.plugin=function(n){var o=Array.prototype.slice.call(arguments,1),r=void 0;return this.each(function(){var t=s(this),e=t.data(a),i=void 0;if(!e){if(/destroy/.test(n))return;if("object"===(void 0===n?"undefined":_typeof(n))&&(n=s.extend({},n,!0)),!("$el"in(e=new l(this,n))))return;t.data(a,e)}"string"==typeof n&&s.isFunction(i=e[n])&&(r=i.apply(e,o))}),void 0===r?this:r},s(function(){var e={};s(document).on("disable.qor.load_resource",function(t){l.plugin.call(s(i,t.target),"destroy")}).on(t,function(t){l.plugin.call(s(i,t.target),e)}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s=window.location,a=window.componentHandler,l=window.history,o="qor.globalSearch",t="enable."+o,e="click."+o,d=".qor-global-search--resource",c=".qor-global-search--results",h="is-active";function u(t,e){this.$element=r(t),this.options=r.extend({},u.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return u.prototype={constructor:u,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on(e,r.proxy(this.click,this))},unbind:function(){this.$element.off(e,this.check)},initTab:function(){var t,e=s.search;/resource_name/.test(e)&&(t=e.match(/resource_name=\w+/g).toString().split("=")[1],r(d).removeClass(h),r('[data-resource="'+t+'"]').addClass(h))},click:function(t){var e=r(t.target),i=e.data();if(e.is(d)){var n,o=QOR.Xurl(s.href,this.$element);i.resource?o.qset("resource_name",i.resource):o.qdel("resource_name"),o.qdel("keyword"),n=o.toString(),l.pushState?this.fetchSearch(n,e):s.href=n}},fetchSearch:function(i,n){var o=document.title;r.ajax(i,{method:"GET",dataType:"html",beforeSend:function(){r(".mdl-spinner").remove(),r(c).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".qor-section").hide(),a.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(t){var e=r(t).find(c).html();r(d).removeClass(h),n.addClass(h),l.pushState({Page:i,Title:o},o,i),r(".mdl-spinner").remove(),r(c).removeClass("loading").html(e),a.upgradeElements(document.querySelectorAll(".qor-table"))},error:function(t,e,i){r(c).find(".qor-section").show(),r(".mdl-spinner").remove(),window.alert([e,i].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},u.DEFAULTS={},u.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);i||e.data(o,i=new u(this,n)),"string"==typeof n&&r.isFunction(t=i[n])&&t.call(i)})},r(function(){var e='[data-toggle="qor.global.search"]',i={};r(document).on("disable.qor.globalSearch",function(t){u.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){u.plugin.call(r(e,t.target),i)}).triggerHandler(t)}),u}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var l=window.FormData,r="qor.selectcore",s="afterSelected."+r,t="click."+r;function d(t,e){this.$element=a(t),this.options=a.extend({},d.DEFAULTS,a.isPlainObject(e)&&e),this.init()}return d.prototype={constructor:d,init:function(){this.bind()},bind:function(){this.$element.on(t,".qor-table-container tbody tr",this.processingData.bind(this))},unbind:function(){this.$element.off(t,".qor-table tbody tr").off("submit.qor.selectcore","form")},newFormHandle:function(t,e){t.qorAsyncFormSubmiter("updateOptions",{onBeforeSubmit:function(t,e){e.continueEditing||(e.headers["X-Redirection-Disabled"]=!0,e.headers["X-Accept"]="json"),e.headers["X-Flash-Messages-Disabled"]=!0}.bind(this),onSubmitSuccess:function(t,e,i){var n=this.options.onSelect,o=void 0;try{o=JSON.parse(t)}catch(t){return}n&&a.isFunction(n)&&(n(o,void 0),a(document).trigger(s))}.bind(this),openPage:e})},processingData:function(e){var t,i=a(e.target).closest("tr"),n={},o=this.options.onSelect;return n=i.data(),(n=a.extend({},{},n)).$clickElement=i,(t=n.mediaLibraryUrl||n.url)?a.getJSON(t,function(t){t.MediaOption&&(t.MediaOption=JSON.parse(t.MediaOption)),n=a.extend({},t,n),o&&a.isFunction(o)&&(o(n,e),a(document).trigger(s))}):o&&a.isFunction(o)&&(o(n,e),a(document).trigger(s)),!1},submit:function(e){var t=e.target,o=a(t),i=this,n=o.find(":submit"),r=void 0,s=this.options.onSubmit;o.parents(".qor-page__new").length||(a(document).trigger("selectcoreBeforeSend.qor.selectcore"),l&&(e.preventDefault(),a.ajax(o.prop("action"),{method:o.prop("method"),data:new l(t),dataType:"json",processData:!1,contentType:!1,headers:{"X-Layout":"lite","X-Redirection-Disabled":!0},beforeSend:function(){o.parent().find(".qor-error").remove(),n.prop("disabled",!0)},success:function(t){(r=t).primaryKey=r.ID,a(".qor-error").remove(),s&&a.isFunction(s)?(s(r,e),a(document).trigger("afterSubmitted.qor.selectcore")):i.refresh()},error:function(t,e,i){var n=void 0;n=t.responseJSON?'<ul class="qor-error">\n                                        <li><label>\n                                            <i class="material-icons">error</i>\n                                            <span>'+t.responseJSON.errors[0]+"</span>\n                                        </label></li>\n                                    </ul>":'<ul class="qor-error">'+a(t.responseText).find("#errors").html()+"</ul>",a(".qor-bottomsheets .qor-page__body").scrollTop(0),422===t.status&&n?o.before(n):window.alert([e,i].join(": "))},complete:function(){n.prop("disabled",!1)}})))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},d.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=a(this),e=t.data(r),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(r,e=new d(this,n))}"string"==typeof n&&a.isFunction(i=e[n])&&i.apply(e,o)})},a.fn.qorSelectCore=d.plugin,d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var n=a("body"),t=a(document),l=window.Mustache,o="qor.selectone",e="click."+o,i="enable."+o,r="reload.qor.bottomsheets",s=".qor-selected-many__remove",d=".qor-selected-many__undo",c="qor-selected-many__deleted",h=".qor-field__selectmany",u="is_selected",f="qor-bottomsheets__select-many";function p(t,e){this.$element=a(t),this.options=a.extend({},p.DEFAULTS,a.isPlainObject(e)&&e),this.init()}var m={lock:!1};return p.prototype={constructor:p,init:function(){this.bind()},bind:function(){t.on(r,"."+f,this.reloadData.bind(this)),this.$element.on(e,s,this.clearSelect.bind(this)).on(e,'[data-select-modal="many"]',this.openBottomSheets.bind(this)).on(e,d,this.undoDelete.bind(this))},unbind:function(){t.off(r,"."+f),this.$element.off(e,s).off(e,'[data-select-modal="many"]').off(e,d)},clearSelect:function(t){var e=a(t.target),i=e.closest(h);return e.closest("[data-primary-key]").addClass(c),this.updateSelectInputData(i),!1},undoDelete:function(t){var e=a(t.target),i=e.closest(h);return e.closest("[data-primary-key]").removeClass(c),this.updateSelectInputData(i),!1},openBottomSheets:function(t){if(m.lock)return t.preventDefault(),!1;m.lock=!0,setTimeout(function(){m.lock=!1},3e3);var e=a(t.target),i=e.data();this.BottomSheets=n.data("qor.bottomsheets"),this.bottomsheetsData=i,this.$selector=i.selectId?a(i.selectId):e.closest(h).find("select"),this.$selectFeild=this.$selector.closest(h).find(".qor-field__selected-many"),this.SELECT_MANY_SELECTED_ICON=a('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=a('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=a('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=a('[name="select-many-template"]').html(),i.url=i.selectListingUrl,i.selectDefaultCreating&&(i.url=i.selectCreatingUrl),this.BottomSheets.open(i,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return l.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return l.render(this.SELECT_MANY_HINT,t)},initItems:function(){var i,t=this.$bottomsheets.find("tbody tr"),n=this.SELECT_MANY_SELECTED_ICON,o=this.SELECT_MANY_UNSELECTED_ICON,r=[];this.$selectFeild.find("[data-primary-key]").not("."+c).each(function(){r.push(a(this).data().primaryKey)}),t.each(function(){var t=a(this),e=t.find("td:first");i=t.data().primaryKey,"-1"!=r.indexOf(i)?(t.addClass(u),e.append(n)):e.append(o)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){return{selectedNum:this.$selectFeild.find("[data-primary-key]").not("."+c).length}},updateHint:function(t){var e;a.extend(t,this.bottomsheetsData),e=this.renderHint(t),this.$bottomsheets.find(".qor-selectmany__hint").remove(),this.$bottomsheets.find(".qor-page__body").before(e)},updateSelectInputData:function(t){var e,i,n,o=(t||this.$selectFeild).find("[data-primary-key]").not("."+c),r=t?t.find(".qor-field__selectmany-input"):this.$selector,s=r.find("option");s.prop("selected",!1),o.each(function(){if(n=a(this).data().primaryKey,!(e=s.filter('[value="'+n+'"]')).length){i={primaryKey:n,displayName:""};var t=l.render(p.SELECT_MANY_OPTION_TEMPLATE,i);e=a(t),r.append(e)}e.prop("selected",!0)})},changeIcon:function(t,e){t.find(".qor-select__select-icon").remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').find(s).click(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(t,e){var i,n=this.renderSelectMany(t),o=this.$selectFeild.find('[data-primary-key="'+t.primaryKey+'"]');if(o.length)return o.hasClass(c)?(o.removeClass(c),this.updateSelectInputData(),void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0;if(this.$selectFeild.append(n),e){var r=l.render(p.SELECT_MANY_OPTION_TEMPLATE,t);return(i=a(r)).appendTo(this.$selector),i.prop("selected",!0),this.$bottomsheets.remove(),void(a(".qor-bottomsheets").is(":visible")||a("body").removeClass("qor-bottomsheets-open"))}this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON)},handleSelectMany:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(f),this.$bottomsheets=t,this.initItems()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t,e){var i;if(t.displayName=t.Text||t.Name||t.Title||t.Code||t.Value||t[1<(i=Object.keys(t)).length&&"ID"==i[0]?i[1]:i[0]],e)this.addItem(t,!0);else{var n=t.$clickElement;n.toggleClass(u),n.hasClass(u)?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData()}},destroy:function(){this.unbind(),this.$element.removeData(o)}},p.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',p.plugin=function(n){return this.each(function(){var t,e=a(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new p(this,n))}"string"==typeof n&&a.isFunction(t=i[n])&&t.apply(i)})},a(function(){var e='[data-toggle="qor.selectmany"]';a(document).on("disable.qor.selectone",function(t){p.plugin.call(a(e,t.target),"destroy")}).on(i,function(t){p.plugin.call(a(e,t.target))}).triggerHandler(i)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function($){var $body=$("body"),$document=$(document),Mustache=window.Mustache,NAMESPACE="qor.selectone",PARENT_NAMESPACE="qor.bottomsheets",EVENT_CLICK="click."+NAMESPACE,EVENT_ENABLE="enable."+NAMESPACE,EVENT_DISABLE="disable."+NAMESPACE,EVENT_RELOAD="reload."+PARENT_NAMESPACE,CLASS_CLEAR_SELECT=".qor-selected__remove",CLASS_CHANGE_SELECT=".qor-selected__change",CLASS_SELECT_FIELD=".qor-field__selected",CLASS_SELECT_INPUT=".qor-field__selectone-input",CLASS_SELECT_TRIGGER=".qor-field__selectone-trigger",CLASS_PARENT=".qor-field__selectone",CLASS_SELECTED="is_selected",CLASS_ONE="qor-bottomsheets__select-one";function QorSelectOne(t,e){this.$element=$(t),this.options=$.extend({},QorSelectOne.DEFAULTS,$.isPlainObject(e)&&e),this.selectedRender=null,this.init()}function firstTextKey(t){var e=Object.keys(t);return 1<e.length&&"ID"===e[0]?e[1]:e[0]}var glock={lock:!1,id:0};function gunlock(){glock.lock=!1}return QorSelectOne.prototype={constructor:QorSelectOne,id:void 0,init:function init(){var selectedRender=this.$element.data().selectedRender;selectedRender&&eval("this.selectedRender = function(data){"+atob(selectedRender)+"};"),this.id=glock.id++,this.$selectOneSelectedTemplate=this.$element.find('[name="select-one-selected-template"]'),this.$selectOneSelectedIconTemplate=this.$element.find('[name="select-one-selected-icon"]'),this.lock={$parent:null,$select:null},this.bind()},bind:function(){$document.on(EVENT_RELOAD,"."+CLASS_ONE,this.reloadData.bind(this)),this.$element.on(EVENT_CLICK,CLASS_CLEAR_SELECT,this.clearSelect.bind(this)).on(EVENT_CLICK,"[data-selectone-url],[data-selectone-url] .material-icons",this.openBottomSheets.bind(this)).on(EVENT_CLICK,CLASS_CHANGE_SELECT,this.changeSelect)},unbind:function(){$document.off(EVENT_RELOAD,"."+CLASS_ONE),this.$element.off(EVENT_CLICK,CLASS_CLEAR_SELECT).off(EVENT_CLICK,"[data-selectone-url]").off(EVENT_CLICK,CLASS_CHANGE_SELECT)},clearSelect:function(t){var e=$(t.target).closest(CLASS_PARENT);return e.find(CLASS_SELECT_FIELD).remove(),e.find(CLASS_SELECT_INPUT).html('<option value="" selected></option>'),e.find(CLASS_SELECT_INPUT)[0].value="",e.find(CLASS_SELECT_TRIGGER).show(),e.trigger("qor.selectone.unselected"),!1},changeSelect:function(){$(this).closest(CLASS_PARENT).find(CLASS_SELECT_TRIGGER).trigger("click")},openBottomSheets:function(t){if(glock.lock)return t.preventDefault(),!1;glock.lock=!0,setTimeout(gunlock,3e3);var e=$(t.target);e.is(".material-icons")&&(e=e.parent()),this.lock.currentData=e.data(),this.lock.$parent=e.closest(CLASS_PARENT),this.lock.$select=this.lock.$parent.find("select"),this.lock.currentData.url=this.lock.currentData.selectoneUrl,this.lock.primaryField=this.lock.currentData.remoteDataPrimaryKey,this.lock.displayField=this.lock.currentData.remoteDataDisplayKey,this.lock.iconField=this.lock.currentData.remoteDataIconKey,this.lock.SELECT_ONE_SELECTED_ICON=this.$selectOneSelectedIconTemplate.html();var i=$.extend({},this.lock.currentData);this.lock.$select.length&&(i.$element=this.lock.$select),$("body").qorBottomSheets("open",i,this.handleSelectOne.bind(this))},initItem:function(){var t,e=this.lock.$parent.find(CLASS_SELECT_FIELD),i=this.lock.currentData.remoteRecordeUrl;i&&this.lock.$bottomsheets.find("tr[data-primary-key]").each(function(){var t=$(this).data();t.url=i.replace("{ID}",t.primaryKey)}),e.length&&(t=e.data().primaryKey)&&this.lock.$bottomsheets.find('tr[data-primary-key="'+t+'"]').addClass(CLASS_SELECTED).find("td:first").append(this.lock.SELECT_ONE_SELECTED_ICON)},reloadData:function(){this.initItem()},renderSelectOne:function(t){return Mustache.render(this.$selectOneSelectedTemplate.html().replace(/\[\[ *&amp;/g,"[[&"),t)},handleSelectOne:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(CLASS_ONE),this.lock.$bottomsheets=t,this.initItem()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t){var e,i=this.lock.$parent,n=i.find(CLASS_SELECT_FIELD);if(t.displayName=this.lock.displayField?t[this.lock.displayField]:t.Text||t.Name||t.Title||t.Value||t.Code||firstTextKey(t),t.selectoneValue=this.lock.primaryField?t[this.lock.primaryField]:t.primaryKey||t.ID,this.lock.iconField&&(t.icon=t[this.lock.iconField]),t.icon&&/\.svg/.test(t.icon)&&(t.iconSVG=!0),this.lock.$select.length){this.selectedRender&&(t.displayText=this.selectedRender(t)),e=this.renderSelectOne(t),n.length&&n.remove(),i.prepend(e),i.find(CLASS_SELECT_TRIGGER).hide();var o=Mustache.render(QorSelectOne.SELECT_ONE_OPTION_TEMPLATE,t);this.lock.$select.html(o),i.trigger("qor.selectone.selected",[t]),this.lock.$bottomsheets.qorSelectCore("destroy").remove(),$(".qor-bottomsheets").is(":visible")||$("body").removeClass("qor-bottomsheets-open")}},destroy:function(){this.unbind(),this.$element.removeData(NAMESPACE),this.lock=void 0}},QorSelectOne.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ selectoneValue ]]" selected>[[ displayName ]]</option>',QorSelectOne.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=$(this),e=t.data(NAMESPACE),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(NAMESPACE,e=new QorSelectOne(this,n))}"string"==typeof n&&$.isFunction(i=e[n])&&i.apply(e,o)})},$(function(){var e='[data-toggle="qor.selectone"]';$(document).on(EVENT_DISABLE,function(t){QorSelectOne.plugin.call($(e,t.target),"destroy")}).on(EVENT_ENABLE,function(t){QorSelectOne.plugin.call($(e,t.target))}).triggerHandler(EVENT_ENABLE)}),QorSelectOne}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var t=d(document),r="qor.selector",i="enable."+r,e="click."+r,c="selected",h="disabled",s="clearable",a="."+c,u=".qor-selector-toggle",l=".qor-selector-label",f=".qor-selector-menu",p=".qor-bottomsheets";function m(t,e){this.options=e,this.$element=d(t),this.init()}return m.prototype={constructor:m,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var t=this.$element,e=d(m.TEMPLATE),i=this.options.aligned+"-aligned",a={},n=t.data(),o=n.hover,l=t.attr("name");this.isBottom="bottom"==n.position,o&&e.addClass("hover"),e.addClass(i).find(f).html(function(){var s=[];return t.children().each(function(){var t=d(this),e=t.attr("selected"),i=t.attr("disabled"),n=t.attr("value"),o=t.text(),r=[];e&&(r.push(c),a.value=n,a.label=o,a.paramName=l),i&&r.push(h),s.push("<li"+(r.length?' class="'+r.join(" ")+'"':"")+' data-value="'+n+'" data-label="'+o+'" data-param-name="'+l+'">'+o+"</li>")}),s.join("")}),this.$selector=e,t.hide().after(e),e.find(u).data("paramName",l),this.pick(a,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(e,d.proxy(this.click,this)),t.on(e,d.proxy(this.close,this))},unbind:function(){this.$selector.off(e,this.click),t.off(e,this.close)},click:function(t){var e=d(t.target);t.stopPropagation(),e.is(".qor-selector-clear")?this.clear():e.is("li")?(e.hasClass(c)||e.hasClass(h)||this.pick(e.data()),this.close()):e.closest(u).length&&this.open()},pick:function(t,e){var i=this.$selector,n=!!t.value,o=this.$element;i.find(u).toggleClass("active",n).toggleClass(s,n&&this.options.clearable).find(l).text(t.label||this.placeholder),e||(i.find(f).children('[data-value="'+t.value+'"]').addClass(c).siblings(a).removeClass(c),o.val(t.value),o.closest(p).length&&!o.closest('[data-toggle="qor.filter"]').length?d(p).trigger("selectorChanged.qor.selector",[t.value,t.paramName]):o.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(u).removeClass("active").removeClass(s).find(l).text(this.placeholder).end().end().find(f).children(a).removeClass(c),t.val("").trigger("change")},open:function(){t.triggerHandler(e),d(".qor-filter__dropdown").hide(),this.$selector.addClass("open"),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass("open"),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(r)}},m.DEFAULTS={aligned:"left",clearable:!1},m.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',m.plugin=function(o){return this.each(function(){var t,e,i=d(this),n=i.data(r);if(!n){if(/destroy/.test(o))return;t=d.extend({},m.DEFAULTS,i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(r,n=new m(this,t))}"string"==typeof o&&d.isFunction(e=n[o])&&e.apply(n)})},d(function(){var e='[data-toggle="qor.selector"]';d(document).on("disable.qor.selector",function(t){m.plugin.call(d(e,t.target),"destroy")}).on(i,function(t){m.plugin.call(d(e,t.target))}).triggerHandler(i)}),m}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var r="qor.single_edit",t="enable."+r,e="change."+r;function s(t,e){var i=o(t),n=i.data("name");n?(this.$el=i,this.$block=i.find(".qor-field__block:eq(0)"),this.$toggle=this.$el.find("[name='"+n+".@enabled']"),this.init()):this.maker=null}return s.prototype={constructor:s,init:function(){this.bind(),this.$toggle.length&&this.toggle()},bind:function(){this.$toggle.on(e,this.toggle.bind(this))},unbind:function(){this.$toggle.off(e)},destroy:function(){this.unbind(),this.$el.removeData(r)},toggle:function(){this.$toggle.is(":checked")?this.$block.show():this.$block.hide()}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var t=o(this),e=t.data(r),i=void 0;if(!e){if(/destroy/.test(n))return;if(!("masker"in(e=new s(this,n))))return;t.data(r,e)}"string"==typeof n&&o.isFunction(i=e[n])&&i.apply(e)})},o(function(){var e=".single-edit",i={};o(document).on("disable.qor.single_edit",function(t){s.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(o(e,t.target),i)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(f){var t=f(document),u=window.FormData,o=window._,r="qor.slideout",e="keyup."+r,i="click."+r,n="submit."+r,s="slideoutLoaded."+r,p="shown."+r,m="hidden."+r,a="transitionend",l="qor-slideout-open",d="qor-slideout-mini",c="is-shown",h="is-slided",g=".qor-body__loading";function v(t,e){var i=[],n="href";return e&&(n="src"),t.each(function(){i.push(f(this).attr(n))}),o.uniq(i)}function b(t,e){var i=f.fn.qorSliderAfterShow;for(var n in i)i.hasOwnProperty(n)&&!i[n].isLoaded&&(i[n].isLoaded=!0,i[n].call(this,t,e))}function y(t,e,i){for(var n=0,o=0,r=t.length;o<r;o++){var s=document.createElement("script");s.onload=function(){++n===t.length&&i&&f.isFunction(i)&&i(),e&&e.url&&e.response&&b(e.url,e.response)},s.src=t[o],document.body.appendChild(s)}}function _(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&_(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function q(t){var e=f("script"),i=v(t,!0),n=v(e,!0);return o.difference(i,n)}function $(t){var e=f("link"),i=v(t),n=v(e);return o.difference(i,n)}function w(t,e){this.$element=t?f(t):null,this.options=f.extend({},w.DEFAULTS,f.isPlainObject(e)&&e),this.options.language=this.options.language||(this.$element?this.$element.attr("lang"):null)||f("html").attr("lang"),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}return w.prototype={constructor:w,init:function(){this.build(),this.bind()},build:function(){var t;this.$slideout=t=f(w.TEMPLATE).appendTo("body"),this.$slideoutTemplate=t.html()},unbuild:function(){this.$slideout.remove()},bind:function(){this.$slideout.on(n,"form",this.submit.bind(this)).on(i,".qor-slideout__fullscreen",this.toggleSlideoutMode.bind(this)).on(i,'[data-dismiss="slideout"]',this.closeSlideout.bind(this)),t.on(e,this.keyup.bind(this))},unbind:function(){this.$slideout.off(n,this.submit).off(i),t.off(e,this.keyup)},keyup:function(t){if(27===t.which){if(f(".qor-bottomsheets").is(":visible")||f(".qor-modal").is(":visible")||f("#redactor-modal-box").length||f("#dialog").is(":visible"))return;this.hide(),this.removeSelectedClass()}},loadExtraResource:function(t){var e=$(t.$links),i=q(t.$scripts);e.length&&_(e),i.length&&y(i,t)},removeSelectedClass:function(){this.$element&&this.$element.find("[data-url]").removeClass("is-selected")},addLoading:function(){f(g).remove(),f(w.TEMPLATE_LOADING).appendTo(f("body")).trigger("enable")},toggleSlideoutMode:function(){this.$slideout.toggleClass("qor-slideout__fullscreen").find(".qor-slideout__fullscreen i").toggle()},submit:function(l){var d=this.$slideout,t=l.target,c=f(t),e=c.find(":submit"),i=new u(t);if(l.originalEvent&&l.originalEvent.constructor===SubmitEvent){var n=f(l.originalEvent.submitter),o=n.attr("name"),r=n.attr("value");o&&r&&i.append(o,r)}d.trigger("slideoutBeforeSend.qor.slideout"),l.preventDefault();var h=c.prop("action"),s=/[?|&]continue_editing=true/.test(h),a={"X-Layout":"lite"};QOR.prepareFormData(i),s?h=h.replace(/([?|&]continue_editing)=true/,"$1_url=true"):a["X-Redirection-Disabled"]="true",f.ajax(h,{method:c.prop("method"),data:i,dataType:"html",processData:!1,contentType:!1,headers:a,beforeSend:function(){e.prop("disabled",!0),f.fn.qorSlideoutBeforeHide=null},success:function(t,e,i){c.parent().find(".qor-error").remove(),d.trigger("slideoutSubmitComplete.qor.slideout");var n=i.getResponseHeader("X-Location");if("render-body"===i.getResponseHeader("X-Frame-Reload"))return this.hide(!0),void this.$slideout.one(m,function(){this.render(this.options,h,t)}.bind(this));if(n){if(l.originalEvent&&l.originalEvent.explicitOriginalTarget)if("window"===f(l.originalEvent.explicitOriginalTarget).data().submitSuccessTarget)return void(window.location.href=n);return"true"===i.getResponseHeader("X-Steps-Done")?void(window.location.href=n):void this.load(n)}var o=c.data("returnUrl"),r=c.data("refreshUrl");if(r)window.location.href=r;else if("refresh"!==o)if(o&&"refresh"!==o)this.load(o);else{var s="/"+location.pathname.split("/")[1],a=[];f(t).find(".qor-alert").each(function(t,e){var i=f(e).find(".qor-alert-message").text().trim(),n=f(e).data("type");""!==i&&a.push({Type:n,Message:i,Keep:!0})}),0<a.length&&(document.cookie="qor-flashes="+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+"; path="+s),this.refresh()}else this.refresh()}.bind(this),error:function(t,e,i){c.parent().find(".qor-error").remove();var n=void 0;if(422===t.status){c.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),n=f(t.responseText).find(".qor-error"),c.before(n),n.find("> li > label").each(function(){var t=f(this),e=t.attr("for");e&&c.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))});var o=c.closest(".qor-page__body").find("#flashes,.qor-error").eq(0);if(o.length)o.scrollParent().scrollTop(o.scrollTop()+o.offset().top)}else QOR.ajaxError.apply(this,arguments)}.bind(this),complete:function(){e.prop("disabled",!1)}})},showOnLoad:function(t,e){var i=f.fn.qorSliderAfterShow;if(i)for(var n in i)i.hasOwnProperty(n)&&f.isFunction(i[n])&&(i[n].isLoaded=!0,i[n].call(this,t,e));this.$slideout.one(s,function(){this.show()}.bind(this)),this.$slideout.trigger(s,[t,e])},render:function(t,e,i){var n,o,r=this.$slideout,s=void 0,a=void 0,l=void 0,d=void 0,c=void 0;if((a=(s=f(i)).find(".mdl-layout__content.qor-page")).length){a.find(".qor-action-button").attr("data-disable-success-redirection","true"),a.find(".qor-page__footer_copy-rigth").remove(),l=a.find(".qor-form-container"),this.slideoutType=l.length&&l.data().slideoutType,1===(d=l.find("form")).length&&d.data(QOR.SUBMITER,this.submit.bind(this));var h=i.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(h){h=h.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),c=f(h).prop("class"),f("body").addClass(c);var u={$scripts:s.filter("script"),$links:s.filter("link"),url:e,response:i};this.loadExtraResource(u)}if(a.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),n=q(a.find("script[src]")),o=$(a.find("link[href]")),n.length)y(n,{url:e||window.location.href,response:i});o.length&&_(o),a.find("script[src],link[href]").remove(),r.trigger("disable"),r.html(this.$slideoutTemplate),this.$title=r.find(".qor-slideout__title"),this.$body=r.find(".qor-slideout__body"),this.$title.html(s.find(t.title).html()),function(t,e){var i="string"==typeof t?document.getElementById(t):t,n=i.cloneNode(!1);n.innerHTML=e,i.parentNode.replaceChild(n,i)}(r.find(".qor-slideout__body")[0],a.html()),this.$body.find(".qor-actions__locale").remove(),r.attr("data-src",e).one(p,function(){f(this).trigger("enable")}).one(m,function(){f(this).trigger("disable")}),r.find(".qor-slideout__opennew").attr("href",e),r.find(".qor-slideout__print").attr("href",e+(-1!==e.indexOf("?")?"&":"?")+"print"),this.showOnLoad(e,i)}},load:function(e,i){var n,t,o=void 0,r=this.$slideout;if(e){if((i=f.isPlainObject(i)?i:{}).image){r.trigger("disable"),r.html(this.$slideoutTemplate);var s=r.find(".qor-slideout__title");i.title?s.html(i.title):s.remove(),this.$body=r.find(".qor-slideout__body");var a='<div class="center-text"><img src="'+e+'"></div>';return this.$body.html(a),f(g).remove(),r.attr("data-src",e).one(p,function(){f(this).trigger("enable")}).one(m,function(){f(this).trigger("disable")}),void this.showOnLoad(e,a,!1)}n=i.method?i.method:"GET",t=i.datatype?i.datatype:"html",o=function(){f.ajax(e,{method:n,dataType:t,cache:!0,ifModified:!0,headers:{"X-Layout":"lite","X-Requested-Frame":"Action"},success:function(t){f(g).remove(),"GET"===n?this.render(this.options,e,t):i.returnUrl?this.load(i.returnUrl):this.refresh()}.bind(this),error:function(){if(f(g).remove(),0<f(".qor-error span").length){var t=t.map(function(){return f(this).text()}).get().join(", ");QOR.alert(t)}else QOR.ajaxError.apply(this,arguments)}.bind(this)})}.bind(this),this.slided?(this.hide(!0),this.$slideout.one(m,o)):o()}},open:function(t){return this.addLoading(),"string"==typeof t&&(t={url:t}),this.load(t.url,t.data||t)},reload:function(t){this.hide(!0),this.load(t)},show:function(){var t=this.$slideout,e=void 0;this.slided||(e=f.Event("show.qor.slideout"),t.trigger(e),e.isDefaultPrevented()||(t.removeClass(d),"mini"===this.slideoutType&&t.addClass(d),t.addClass(c).get(0).offsetWidth,t.one(a,this.shown.bind(this)).addClass(h).scrollTop(0)))},shown:function(){this.slided=!0,f("body").addClass(l),this.$slideout.trigger("beforeEnable.qor.slideout").trigger(p).trigger("afterEnable.qor.slideout")},closeSlideout:function(){this.hide()},hide:function(e){var i=this,t=QOR.messages.slideout;f.fn.qorSlideoutBeforeHide?window.QOR.qorConfirm(t,function(t){t&&i.hideSlideout(e)}):this.hideSlideout(e),this.removeSelectedClass()},hideSlideout:function(t){var e=this.$slideout,i=void 0,n=f(".qor-datepicker").not(".hidden");window.onbeforeunload=null,f.fn.qorSlideoutBeforeHide=null,n.length&&n.addClass("hidden"),this.slided&&(i=f.Event("hide.qor.slideout"),e.trigger(i),i.isDefaultPrevented()||(e.one(a,this.hidden.bind(this)).removeClass(h+" qor-slideout__fullscreen"),t||e.trigger("slideoutClosed.qor.slideout")))},hidden:function(){this.slided=!1,f("body").removeClass(l),this.$slideout.removeClass(c).trigger(m),this.$slideout.find(".qor-slideout__header").trigger("disable"),this.$slideout.find(".qor-slideout__body").trigger("disable")},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element&&this.$element.removeData(r)}},f.extend({},QOR.messages,{slideout:{confirm:"You have unsaved changes on this slideout. If you close this slideout, you will lose all unsaved changes. Are you sure you want to close the slideout?"}},!0),w.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},w.TEMPLATE='<div class="qor-slideout">\n            <div class="qor-slideout__header">\n                <div class="qor-slideout__header-link">\n                    <a href="#" target="_blank" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__print"><i class="material-icons">print</i></a>\n                    <a href="#" target="_blank" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__opennew"><i class="material-icons">open_in_new</i></a>\n                    <a href="#" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__fullscreen">\n                        <i class="material-icons">fullscreen</i>\n                        <i class="material-icons" style="display: none;">fullscreen_exit</i>\n                    </a>\n                </div>\n                <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout">\n                    <span class="material-icons">close</span>\n                </button>\n                <h3 class="qor-slideout__title"></h3>\n            </div>\n            <div class="qor-slideout__body"></div>\n        </div>',w.TEMPLATE_LOADING='<div class="qor-body__loading">\n            <div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>\n        </div>',QOR.slideout=function(t){return new w(null,t)},w.plugin=function(n){return this.each(function(){var t=f(this),e=t.data(r),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(r,e=new w(this,n))}"string"==typeof n&&f.isFunction(i=e[n])&&i.apply(e)})},f.fn.qorSlideout=w.plugin,t.data("qor.slideout",function(t){return t.call(w)}),w}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var r=window.location,s="qor.sorter",t="enable."+s,e="click."+s,i="is-sortable";function a(t,e){this.$element=o(t),this.options=o.extend({},a.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){this.$element.addClass(i),this.bind()},bind:function(){window.PRINT_MODE||this.$element.on(e,"> thead > tr > th",this.sort.bind(this))},unbind:function(){this.$element.off(e,this.sort)},sort:function(t){if(t.target===t.currentTarget){var e=o(t.currentTarget).data("orderBy"),i=r.search,n="order_by="+e;e&&(/order_by/.test(i)?i=i.replace(/order_by(=[.\w:]+)?/,function(){return n}):i+=-1<i.indexOf("?")?"&"+n:n,r.search=i)}},destroy:function(){this.unbind(),this.$element.removeClass(i).removeData(s)}},a.DEFAULTS={},a.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;e.data(s,i=new a(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e=".qor-js-table";o(document).on("disable.qor.sorter",function(t){a.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(o(e,t.target))}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="qor.table",t="enable."+s,e=".qor-table";function a(t,e){this.$el=r(t),this.init()}a.prototype={init:function(t){this.$el.resizableColumns()},bind:function(){},unbind:function(){},destroy:function(){this.unbind(),this.$el=null}},a.plugin=function(o){return this.each(function(){var t=r(this),e=t.data(s),i=void 0,n=void 0;if(e)/destroy/.test(o)&&t.removeData(s);else{if(/destroy/.test(o))return;i=r.extend(!0,{},t.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),t.data(s,e=new a(this,i))}"string"==typeof o&&r.isFunction(n=e[o])&&n.apply(e)})},r(function(){r(document).on(t,function(t){a.plugin.call(r(e,t.target))}).on("disable.qor.table",function(t){a.plugin.call(r(e,t.target),"destroy")}).triggerHandler(t)})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var e=window._,r=s("body"),o="qor.tabbar",t="enable."+o,i="click."+o,a=".qor-layout__tab-button",l=".qor-layout__tab-content",d=".mdl-layout__tab-bar-container",c=".qor-layout__tab-right",h=".qor-layout__tab-left",u="is-active";function f(t,e){this.$element=s(t),this.options=s.extend({},f.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return f.prototype={constructor:f,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(i,a,this.switchTab.bind(this)),this.$element.on(i,c,this.scrollTabRight.bind(this)),this.$element.on(i,h,this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(i,a,this.switchTab),this.$element.off(i,c,this.scrollTabRight),this.$element.off(i,h,this.scrollTabLeft)},initTab:function(){var t=this.$element.data();t.scopeActive?r.data("tabScopeActive",t.scopeActive):(s(a).first().addClass(u),r.data("tabScopeActive",s(a).first().data("name"))),this.tabWidth=0,this.slideoutWidth=s(l).outerWidth(),e.each(s(a),function(t){this.tabWidth=this.tabWidth+s(t).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(d).append(f.ARROW_RIGHT)},scrollTabLeft:function(t){t.stopPropagation();var e=s(d),i=e.scrollLeft(),n=i-this.slideoutWidth;0<i&&e.animate({scrollLeft:n},400,function(){s(c).show(),0==e.scrollLeft()&&s(h).hide()})},scrollTabRight:function(t){t.stopPropagation();var e=s(d),i=e.scrollLeft(),n=this.tabWidth,o=this.slideoutWidth,r=i+o;r<n&&(e.animate({scrollLeft:r},400,function(){s(h).show(),e.scrollLeft()+o>=n&&s(c).hide()}),s(h).length||this.$element.find(d).prepend(f.ARROW_LEFT))},switchTab:function(t){var i=s(t.target),e=this.$element,n=i.data(),o=r.data().tabScopeActive;if(s(".qor-slideout").is(":visible"))return i.hasClass(u)||(e.find(a).removeClass(u),i.addClass(u),s.ajax(n.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){s(".qor-layout__tab-spinner").remove();s(l).hide().before('<div class="mdl-spinner mdl-js-spinner is-active qor-layout__tab-spinner"></div>'),window.componentHandler.upgradeElement(s(".qor-layout__tab-spinner")[0])},success:function(t){s(".qor-layout__tab-spinner").remove(),r.data("tabScopeActive",i.data("name"));var e=s(t).find(l).html();s(l).show().html(e).trigger("enable")},error:function(){s(".qor-layout__tab-spinner").remove(),r.data("tabScopeActive",o)}})),!1},destroy:function(){this.unbind(),r.removeData("tabScopeActive")}},f.ARROW_RIGHT='<a href="javascript://" class="qor-layout__tab-right"></a>',f.ARROW_LEFT='<a href="javascript://" class="qor-layout__tab-left"></a>',f.DEFAULTS={},f.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new f(this,n))}"string"==typeof n&&s.isFunction(t=i[n])&&t.apply(i)})},s(function(){var e='[data-toggle="qor.tab"]';s(document).on("disable.qor.tabbar",function(t){f.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){f.plugin.call(s(e,t.target))}).triggerHandler(t)}),f}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var l="qor.take_picture",e="[data-take-picture]",t="click."+l,i="change."+l,n="enable."+l;function d(t,e){this.$el=a(t),this.message=QOR.messages.takePicture,this.init()}return d.prototype={constructor:d,init:function(){var t=this.$el.data();this.$target=this.$el.closest("form").find(t.takePicture),this.build(),this.bind()},bind:function(){this.$el.bind(t,this.open.bind(this)),this.$body.find("[take-picture__take]").bind(t,this.take.bind(this)),this.$invert.bind(i,this.toggleInverter.bind(this)),this.$devs.bind(i,this.chooseDevice.bind(this))},build:function(){var t=this.$el,e=d.DEFAULTS.TEMPLATE.VIDEO;this.$body=a(e),this.$body.find("[take-picture__show-video]").html(this.message.openCamera),this.$body.find("[take-picture__invert] span").html(this.message.invertImage),this.$body.find("[take-picture__dev] span").html(this.message.chooseDevice),this.$video=this.$body.find("video"),this.$invert=this.$body.find("[take-picture__invert] input"),this.$devs=this.$body.find("[take-picture__dev] select"),this.$errors=this.$body.find("[take-picture__errors]"),t.removeClass("hidden"),t.qorBottomSheets({persistent:!0,do:function(t,e){(this.bs=e).render(this.message.title,this.$body)}.bind(this)})},open:function(t){this.bs.show(),this.openCamera(t)},destroy:function(){this.$el.removeData(l),this.bs.destroy(),this.bs=null},errorMsg:function(t,e){document.querySelector("#errorMsg");void 0!==e&&(console.error(e),this.$errors.append(a("<p>"+t+"</p>")))},toggleInverter:function(t){t.target.checked?console.log("INVERT"):console.log("NO INVERT")},chooseDevice:function(t){this.deviceId=t.target.value,this.openCamera()},take:function(t){},stop:function(){window.stream&&(window.stream.getTracks().forEach(function(t){t.stop()}),window.stream=null)},openCamera:function(t){this.stop()}},a.extend(!0,QOR.messages,{takePicture:{title:"Capture Image",openCamera:"Open Camera",invertImage:"Invert Image",chooseDevice:"Choose Device",camera:"Camera {}"}}),d.DEFAULTS={TEMPLATE:{VIDEO:'<div class="center-text"><video id="gum-local" autoplay playsinline style="background: #222; --width: 100%;width: var(--width);height: calc(var(--width) * 0.75); margin-bottom: 20px"></video>\n<div class="qor-field">\n\n    <label take-picture__dev>\n      <span class="mdl-checkbox__label">Device</span>\n      <select>\n      \n       </select>\n    </label>\n    <button take-picture__take type="button" class="close mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored"><i class="material-icons">camera_alt</i></button>\n    <label take-picture__invert class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect">\n      <input type="checkbox" class="mdl-checkbox__input">\n      <span class="mdl-checkbox__label">Invert</span>\n    </label>\n    <div take-picture__errors style="color: darkred"></div>\n    </div>'}},d.plugin=function(r){var s=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=a(this),e=t.data(l),i="string"==typeof r?{}:a.extend({},r||{},!0),n="string"==typeof r?r:"",o=void 0;if(!e){if(/destroy/.test(r))return;if(!("$el"in(e=new d(this,i))))return;t.data(l,e)}""!==n&&a.isFunction(o=e[r])&&o.apply(e,s)})},a(function(){a(document).on("disable.qor.take_picture",function(t){d.plugin.call(a(e,t.target),"destroy")}).on(n,function(t){d.plugin.call(a(e,t.target),{})}).triggerHandler(n)}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="qor.timepicker",t="enable."+s,e="click."+s,i="focus."+s,n="keydown."+s,o="blur."+s,a="selectTime."+s,l="[data-picker-type]";function d(t,e){this.$element=r(t),this.options=r.extend(!0,{},d.DEFAULTS,r.isPlainObject(e)&&e),this.formatDate=null,this.pickerData=this.$element.data(),this.targetInputClass=this.pickerData.targetInput,this.parent=this.$element.closest(l),this.isDateTimePicker=this.targetInputClass&&this.parent.length,this.$targetInput=this.parent.find(this.targetInputClass),this.init()}return d.prototype={init:function(){this.bind(),this.oldValue=this.$targetInput.val();var t=new Date,e=t.getMonth()+1,i=t.getDate();e=e<8?"0"+e:e,i=i<10?"0"+i:i,this.dateValueNow=t.getFullYear()+"-"+e+"-"+i},bind:function(){this.isDateTimePicker&&this.$targetInput.qorTimepicker({timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"}).on(a,r.proxy(this.changeTime,this)).on(o,r.proxy(this.blur,this)).on(i,r.proxy(this.focus,this)).on(n,r.proxy(this.keydown,this)),this.$element.on(e,r.proxy(this.show,this))},unbind:function(){this.$element.off(e,this.show),this.isDateTimePicker&&this.$targetInput.off(a,this.changeTime).off(o,this.blur).off(i,this.focus).off(n,this.keydown)},focus:function(){},blur:function(){var t,e,i,n,o,r,s=this.$targetInput.val(),a=s.split(" "),l=a.length,d=/\d{1,2}:\d{1,2}/,c=/^\d{4}-\d{1,2}-\d{1,2}/;if(s){if(1==l)c.test(a[0])&&(e=a[0],i="00:00"),d.test(a[0])&&(e=this.dateValueNow,i=a[0]);else for(var h=0;h<l;h++){n=c.test(a[h]),o=d.test(a[h]),n&&(e=a[h],r="-"),o&&(i=a[h],r=":"),t=a[h].split(r);for(var u=0;u<t.length;u++)t[u].length<2&&(t[u]="0"+t[u]);n&&(e=t.join(r)),o&&(i=t.join(r))}this.checkDate(e)&&this.checkTime(i)?(this.$targetInput.val(e+" "+i),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)}},keydown:function(t){var e=t.keyCode;-1==[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105].indexOf(e)&&t.preventDefault()},checkDate:function(t){return/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/.test(t)},checkTime:function(t){return/^([01]\d|2[0-3]):?([0-5]\d)$/.test(t)},changeTime:function(){var t,e=this.$targetInput,i=this.oldValue,n=/\d{1,2}:\d{1,2}/,o=n.test(i),r=e.data().timepickerList.find(".ui-timepicker-selected").html();t=i?o?i.replace(n,r):i+" "+r:this.dateValueNow+" "+r,e.val(t)},show:function(){this.isDateTimePicker&&(this.$targetInput.qorTimepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.qorTimepicker("remove"),this.$element.removeData(s)}},d.DEFAULTS={},d.plugin=function(o){return this.each(function(){var t,e,i=r(this),n=i.data(s);if(!n){if(!r.fn.qorDatepicker)return;if(/destroy/.test(o))return;t=r.extend(!0,{},i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(s,n=new d(this,t))}"string"==typeof o&&r.isFunction(e=n[o])&&e.apply(n)})},r(function(){var e='[data-toggle="qor.timepicker"]';r(document).on("disable.qor.timepicker",function(t){d.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){d.plugin.call(r(e,t.target))}).triggerHandler(t)}),d}),$(function(){$(document).on("click.qor.alert",'[data-dismiss="alert"]',function(){$(this).closest(".qor-alert").remove()}),setTimeout(function(){$('.qor-alert[data-dismissible="true"]').remove()},5e3)}),$(function(){var i=$(".qor-page__body > .qor-form-container > form");$(".qor-error > li > label").each(function(){var t=$(this),e=t.attr("for");e&&i.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))})}),$(function(){$(document).on("click",".qor-dialog--global-search",function(t){t.stopPropagation(),$(t.target).parents(".qor-dialog-content").length||$(t.target).is(".qor-dialog-content")||$(".qor-dialog--global-search").remove()}),$(document).on("click",".qor-global-search--show",function(t){t.preventDefault();var e=$(this).data(),i=window.Mustache.render('<div class="qor-dialog qor-dialog--global-search" tabindex="-1" role="dialog" aria-hidden="true"><div class="qor-dialog-content"><form action=[[actionUrl]]><div class="mdl-textfield mdl-js-textfield" id="global-search-textfield"><input class="mdl-textfield__input ignore-dirtyform" name="keyword" id="globalSearch" value="" type="text" placeholder="" /><label class="mdl-textfield__label" for="globalSearch">[[placeholder]]</label></div></form></div></div>',e);$("body").append(i),window.componentHandler.upgradeElement(document.getElementById("global-search-textfield")),$("#globalSearch").focus()})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){function r(t,e){"#"===t[0]&&(t=t.substr(1));var i=t.lastIndexOf(":");if(0<i){var n=t.substr(i+1);t=t.substr(0,i),e.find('[data-mark="QorResource.'+t+'"][data-primary-key="'+n+'"]:first').addClass("qor-marked").focus()}}window.QOR.Mark=r,o(function(){o(document).on("enable.qor.marked",function(t){var e=o(t.target),i=e.attr("data-src"),n=void 0;i&&("/"===i[0]&&(i=location.protocol+"//"+location.host+i),(n=new URL(i))&&n.hash&&r(n.hash,e))}),""!==location.hash&&r(location.hash,o(document))})}),$(function(){var o=[],r="qoradmin_menu_status",t=localStorage.getItem(r);t&&t.length&&(o=t.split(",")),$(".qor-menu-container").on("click","> ul > li > a",function(){var t=$(this),e=t.parent(),i=t.next("ul"),n=e.attr("qor-icon-name");i.length&&(i.hasClass("in")?(o.push(n),e.removeClass("is-expanded"),i.one("transitionend",function(){i.removeClass("collapsing in")}).addClass("collapsing").height(0)):(o=_.without(o,n),e.addClass("is-expanded"),i.one("transitionend",function(){i.removeClass("collapsing")}).addClass("collapsing in").height(i.prop("scrollHeight"))),localStorage.setItem(r,o))}).find("> ul > li > a").each(function(){var t=$(this),e=t.parent(),i=t.next("ul"),n=e.attr("qor-icon-name");i.length&&(i.addClass("collapse"),e.addClass("has-menu"),-1!=o.indexOf(n)?i.height(0):(e.addClass("is-expanded"),i.addClass("in").height(i.prop("scrollHeight"))))});var e=$(".qor-page > .qor-page__header");$(".qor-page > .qor-page__body"),e.find(".qor-page-subnav__header").length;e.length&&(e.height(),$(".qor-page").addClass("has-header"),$("header.mdl-layout__header").addClass("has-action"))}),$(function(){$(".qor-mobile--show-actions").on("click",function(){var t=$(".qor-page__header").toggleClass("actions-show");t.is(":visible")?t.hide():t.show()})}),$(function(){if(window.PRINT_MODE)return $("a").attr("href","javascript:void(0)"),void $(document).on("enable",function(t){$("a",t.target).each(function(){$(this).attr("href","javascript:void(0)")})});function f(){return p.hasClass("qor-bottomsheets-open")}var p=$("body"),m=void 0,g=void 0,v="is-selected";function b(t){$("[data-url]").removeClass(v),t&&t.length&&t.addClass(v)}p.qorBottomSheets(),p.qorSlideout(),m=p.data("qor.slideout"),g=p.data("qor.bottomsheets"),$(document).on("click.qor.openUrl","[data-url]",function(t){var e=$(this),i=$(t.target),n=e.hasClass("qor-button--new"),o=e.hasClass("qor-button--edit"),r=(e.is(".qor-table tr[data-url]")||e.closest(".qor-js-table").length)&&!e.closest(".qor-slideout").length,s=e.data(),a=void 0,l=s.openType,d=e.parents(".qor-theme-slideout").length,c=e.hasClass("qor-action-button")&&!l,h=e.hasClass("qor-action-button--form"),u=void 0;if(("bottomsheet"===l||h||!i.is(".mdl-data-table__select,.qor-table__actions")&&!i.parents(".mdl-data-table__select,.qor-table__actions,.qor-actions-bulk").length)&&!(i.closest(".qor-button--actions").length||""===(u=i.data("url"))||!u&&i.is("a")||r&&f())&&((u=i.data("url"))&&c&&(a=function(){var t=$(".qor-js-table tbody").find(".mdl-checkbox__input:checked"),e=[];return!!t.length&&(t.each(function(){e.push($(this).closest("tr").data("primary-key"))}),e)}())&&(s=$.extend({},s,{actionData:a})),s.url))return s.$target=i,s.method&&"GET"!==s.method.toUpperCase()?void 0:(c||"bottomsheet"===l||i.closest(".qor-bottomsheets__body").length?c&&!a&&e.closest('[data-toggle="qor.action.bulk"]').length?window.QOR.qorConfirm(s.errorNoItem):g.open(s):r||n&&!f()||o||"slideout"===l?d||"slideout"===l?e.hasClass(v)?(m.hide(),b()):(m.open(s),b(e)):window.location=s.url:p.hasClass("qor-slideout-open")||n&&f()?g.open(s):d?m.open(s):g.open(s),!1)})}),$(function(){var o=window.location;$(".qor-search").each(function(){var t=$(this),e=t.find(".qor-search__input"),i=t.find(".qor-search__clear"),n=!!e.val();t.closest(".qor-page__header").addClass("has-search"),$("header.mdl-layout__header").addClass("has-search"),i.on("click",function(){e.val()||n?"?"===o.search.replace(new RegExp(e.attr("name")+"\\=?\\w*"),"")?o.href=o.href.split("?")[0]:o.search=o.search.replace(new RegExp(e.attr("name")+"\\=?\\w*"),""):t.removeClass("is-dirty")})})});