"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){a.fn.qorSliderAfterShow=a.fn.qorSliderAfterShow||{},window.Mustache&&(window.Mustache.tags=["[[","]]"]),a(document).ajaxComplete(function(t,e,i){"POST"!==i.type&&"PUT"!==i.type||a.fn.qorSlideoutBeforeHide&&(a.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)}),a.fn.select2=a.fn.select2||function(){},a.fn.select2.ajaxCommonOptions=function(t){var n=t.remoteDataPrimaryKey,o=t.remoteDataDisplayKey,r=t.remoteDataIconKey;return{dataType:"json",cache:!("false"===t.remoteDataCache),delay:250,data:function(t){return{keyword:t.term||"",page:t.page,per_page:20}},processResults:function(t,e){e.page=e.page||1;var i=a.map(t,function(t){if(t.id=t[n]||t.primaryKey||t.Id||t.ID,!t.text)if(o)t.text=t[o];else if(!(t.text=t.text=t.value||t.Label||t.Value)){var e=[];for(var i in t)"id"!==i.toLowerCase()&&t[i]&&(e[e.length]=t[i]);t.text=e.join(" ")}return r&&(t.icon=t[r],t.icon&&/\.svg/.test(t.icon)&&(t.iconSVG=!0)),t});return{results:i,pagination:{more:20<=i.length}}}}},a.fn.select2.ajaxFormatResult=function(t,e){var i="";return i=0<e.length?window.Mustache.render(e.html().replace(/{{(.*?)}}/g,"[[$1]]"),t):t.text||t.html||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],/<(.*)(\/>|<\/.+>)/.test(i)?a(i):i}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var s={messages:{common:{ajaxError:"Server error, please try again later!",alert:{ok:"Ok"},confirm:{ok:"Ok",cancel:"Cancel"}}}};window.QOR=s,a(function(){var r=window._,o=a('<div id="dialog" style="display: none;">\n                  <div class="mdl-dialog-bg"></div>\n                  <div class="mdl-dialog">\n                      <div class="mdl-dialog__content">\n                        <p><i class="material-icons">warning</i></p>\n                        <p class="mdl-dialog__message dialog-message">\n                        </p>\n                      </div>\n                      <div class="mdl-dialog__actions">\n                        <button type="button" class="mdl-button mdl-button--raised mdl-button--colored dialog-ok dialog-button" data-type="confirm">\n                          ok\n                        </button>\n                        <button type="button" class="mdl-button dialog-cancel dialog-button" data-type="">\n                          cancel\n                        </button>\n                      </div>\n                    </div>\n                </div>').appendTo("body");a(document).on("keyup.qor.confirm",function(t){27===t.which&&o.is(":visible")&&setTimeout(function(){o.hide()},100)}).on("click.qor.confirm",".dialog-button",function(){var t=a(this).data("type"),e=s.qorConfirmCallback;return o.hide(),s.qorConfirmCallback=void 0,a.isFunction(e)&&e(t),!1}),s.qorConfirm=function(t,e){var i=o.find(".dialog-ok"),n=o.find(".dialog-cancel").show();return r.isString(t)?(o.find(".dialog-message").text(t),i.text(s.messages.common.confirm.ok),n.text(s.messages.common.confirm.cancel)):r.isObject(t)&&(t.confirmOk&&t.confirmCancel?(i.text(t.confirmOk),n.text(t.confirmCancel)):(i.text(s.messages.common.confirm.ok),n.text(s.messages.common.confirm.cancel)),o.find(".dialog-message").text(t.confirm)),o.show(),s.qorConfirmCallback=e,!1},s.alert=function(t,e){var i=o.find(".dialog-ok");return o.find(".dialog-cancel").hide(),r.isString(t)?(o.find(".dialog-message").html(t),i.text(s.messages.common.alert.ok)):t.jquery?(i.text(s.messages.common.alert.ok),o.find(".dialog-message").html(t)):r.isObject(t)&&(t.ok?i.text(t.ok):i.text(s.messages.common.alert.ok),o.find(".dialog-message").html(t.message)),o.show(),s.qorConfirmCallback=e,!1},s.ajaxError=function(t,e,i){s.alert(s.ajaxErrorString.apply(this,arguments))},s.ajaxErrorString=function(t,e,i){return"<strong>"+s.messages.common.ajaxError+"<strong></strong>:<br/>"+[e,i].join(": ")},s.Xurl=function(t,e){return new Xurl(t,e.valuerOf())},s.submitContinueEditing=function(t){var e=a(t).parents("form"),i=e.attr("action")||window.location.href;if(!/(\?|&)continue_editing=/.test(i)){var n="continue_editing=true";-1===i.indexOf("?")?i+="?"+n:"?"!==i[i.length-1]?i+="&"+n:i+=n}return e.attr("action",i),e.submit(),!1},s.SUBMITER="qor.submiter";s.qorAjaxHandleFile=function(t,n,o,e){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.open("POST",t,!0),i.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:n}),e=window.URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=e,i.download=o||"download-"+a.now(),i.click()}else window.alert("server error, please try again!")},r.isObject(e)&&("[object FormData]"!=Object.prototype.toString.call(e)&&(e=function t(e,i){var n=i||new FormData,o=void 0;for(var r in e)e.hasOwnProperty(r)&&e[r]&&(o=r),e[r]instanceof Date?n.append(o,e[r].toISOString()):"object"!==_typeof(e[r])||e[r]instanceof File?n.append(o,e[r]):t(e[r],n);return n}(e)),i.send(e))};function t(){var t=a(".qor-linkify-object"),e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi;t.length&&t.each(function(){var t=a(this).data("video-link");t.match(e)&&a(this).html('<iframe width="100%" height="100%" src="//www.youtube.com/embed/'+t.replace(e,"$1")+'" frameborder="0" allowfullscreen></iframe>')})}(a.fn.qorSliderAfterShow.converVideoLinks=t)()})}),function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(T){var t=T(window),o=window.document,p=T(o),r=window.Number,s="datepicker",i="click."+s,n="keyup."+s,a="focus."+s,e="resize."+s,l="show."+s,d="hide."+s,c="pick."+s,h=/(y|m|d)+/g,u=/\d+/g,f=/^\d{2,4}$/,m=s+"-top-left",g=s+"-bottom-left",b=[m,s+"-top-right",g,s+"-bottom-right"].join(" "),v=s+"-hide",y=Math.min,_=Object.prototype.toString;function q(t){return"string"==typeof t}function $(t){return"number"==typeof t&&!isNaN(t)}function w(t){return void 0===t}function k(t){return"date"===function(t){return _.call(t).slice(8,-1).toLowerCase()}(t)}function E(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):($(e)&&i.push(e),i.slice.apply(t,i))}function C(t,e){var i=E(arguments,2);return function(){return t.apply(e,i.concat(E(arguments)))}}function D(t,e){return[31,function(t){return t%4==0&&t%100!=0||t%400==0}(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function x(t){var e,i,n=String(t).toLowerCase(),o=n.match(h);if(!o||0===o.length)throw new Error("Invalid date format.");for(t={source:n,parts:o},e=o.length,i=0;i<e;i++)switch(o[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}function S(t,e){var i,n,o,r,a,s,l=[];if(k(e))return new Date(e.getFullYear(),e.getMonth(),e.getDate());if(q(e)&&(l=e.match(u)||[]),n=(e=new Date).getFullYear(),o=e.getDate(),r=e.getMonth(),i=t.parts.length,l.length===i)for(s=0;s<i;s++)switch(a=parseInt(l[s],10)||1,t.parts[s]){case"dd":case"d":o=a;break;case"mm":case"m":r=a-1;break;case"yy":n=2e3+a;break;case"yyyy":n=a}return new Date(n,r,o)}function j(t,e){e=T.isPlainObject(e)?e:{},this.$element=T(t),this.options=T.extend({},j.DEFAULTS,QOR.messages.datepicker,e),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}T.extend(!0,QOR.messages,{datepicker:{format:"yyyy-mm-dd",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}),j.formatDate=function(t,e){e||(e=QOR.messages.datepicker.format),q(e)&&(e=x(e));var i,n,o,r,a,s="";if(k(t))for(s=e.source,n=t.getFullYear(),(r={d:t.getDate(),m:t.getMonth()+1,yy:n.toString().substring(2),yyyy:n}).dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,i=e.parts.length,a=0;a<i;a++)o=e.parts[a],s=s.replace(o,r[o]);return s},j.prototype={constructor:j,init:function(){var t=this.options,e=this.$element,i=t.startDate,n=t.endDate,o=t.date;this.$trigger=T(t.trigger||e),this.isInput=e.is("input")||e.is("textarea"),this.isInline=t.inline&&(t.container||!this.isInput),this.format=x(t.format),this.initialValue=this.getValue(),o=this.parseDate(o||this.initialValue),i&&(i=this.parseDate(i),o.getTime()<i.getTime()&&(o=new Date(i)),this.startDate=i),n&&(n=this.parseDate(n),i&&n.getTime()<i.getTime()&&(n=new Date(i)),o.getTime()>n.getTime()&&(o=new Date(n)),this.endDate=n),this.date=o,this.viewDate=new Date(o),this.initialDate=new Date(this.date),this.bind(),(t.autoshow||this.isInline)&&this.show(),t.autopick&&this.pick()},build:function(){var t,e=this.options,i=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=t=T(e.template),this.$week=t.find('[data-view="week"]'),this.$yearsPicker=t.find('[data-view="years picker"]'),this.$yearsPrev=t.find('[data-view="years prev"]'),this.$yearsNext=t.find('[data-view="years next"]'),this.$yearsCurrent=t.find('[data-view="years current"]'),this.$years=t.find('[data-view="years"]'),this.$monthsPicker=t.find('[data-view="months picker"]'),this.$yearPrev=t.find('[data-view="year prev"]'),this.$yearNext=t.find('[data-view="year next"]'),this.$yearCurrent=t.find('[data-view="year current"]'),this.$months=t.find('[data-view="months"]'),this.$daysPicker=t.find('[data-view="days picker"]'),this.$monthPrev=t.find('[data-view="month prev"]'),this.$monthNext=t.find('[data-view="month next"]'),this.$monthCurrent=t.find('[data-view="month current"]'),this.$days=t.find('[data-view="days"]'),this.isInline?T(e.container||i).append(t.addClass("datepicker-inline")):(T(o.body).append(t.addClass("datepicker-dropdown")),t.addClass(v)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var t=this.options,e=this.$element;T.isFunction(t.show)&&e.on(l,t.show),T.isFunction(t.hide)&&e.on(d,t.hide),T.isFunction(t.pick)&&e.on(c,t.pick),this.isInput&&(e.on(n,T.proxy(this.keyup,this)),t.trigger||e.on(a,T.proxy(this.show,this))),this.$trigger.on(i,T.proxy(this.show,this))},unbind:function(){var t=this.options,e=this.$element;T.isFunction(t.show)&&e.off(l,t.show),T.isFunction(t.hide)&&e.off(d,t.hide),T.isFunction(t.pick)&&e.off(c,t.pick),this.isInput&&(e.off(n,this.keyup),t.trigger||e.off(a,this.show)),this.$trigger.off(i,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,n=this.$daysPicker,o=this.format;if(o.hasYear||o.hasMonth||o.hasDay)switch(r(t)){case 2:case"years":i.addClass(v),n.addClass(v),o.hasYear?(this.fillYears(),e.removeClass(v)):this.showView(0);break;case 1:case"months":e.addClass(v),n.addClass(v),o.hasMonth?(this.fillMonths(),i.removeClass(v)):this.showView(2);break;default:e.addClass(v),i.addClass(v),o.hasDay?(this.fillDays(),n.removeClass(v)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,n=p.outerWidth(),o=p.outerHeight(),r=e.outerWidth(),a=e.outerHeight(),s=i.width(),l=i.height(),d=e.offset(),c=d.left,h=d.top,u=parseFloat(t.offset)||10,f=m;l<h&&o<h+a+l?(h-=l+u,f=g):h+=a+u,n<c+s&&(c=c+r-s,f=f.replace("left","right")),i.removeClass(b).addClass(f).css({top:h,left:c,zIndex:parseInt(t.zIndex,10)})},trigger:function(t,e){var i=T.Event(t,e);return this.$element.trigger(i),i},createItem:function(t){var e=this.options,i=e.itemTag,n={text:"",view:"",muted:!1,picked:!1,disabled:!1};return T.extend(n,t),"<"+i+" "+(n.disabled?'class="'+e.disabledClass+'"':n.picked?'class="'+e.pickedClass+'"':n.muted?'class="'+e.mutedClass+'"':"")+(n.view?' data-view="'+n.view+'"':"")+">"+n.text+"</"+i+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){var t,e=this.options,i=parseInt(e.weekStart,10)%7,n=e.daysMin,o="";for(n=T.merge(n.slice(i),n.slice(0,i)),t=0;t<=6;t++)o+=this.createItem({text:n[t]});this.$week.html(o)},fillYears:function(){var t,e=this.options,i=e.disabledClass||"",n=e.yearSuffix||"",o=T.isFunction(e.filter)&&e.filter,r=this.startDate,a=this.endDate,s=this.viewDate,l=s.getFullYear(),d=s.getMonth(),c=s.getDate(),h=this.date,u=h.getFullYear(),f=!1,p=!1,m=!1,g=!1,b=!1,v="";for(t=-5;t<=6;t++)h=new Date(l+t,d,c),b=-5===t||6===t,g=l+t===u,m=!1,r&&(m=h.getFullYear()<r.getFullYear(),-5===t&&(f=m)),!m&&a&&(m=h.getFullYear()>a.getFullYear(),6===t&&(p=m)),!m&&o&&(m=!1===o.call(this.$element,h)),v+=this.createItem({text:l+t,view:m?"year disabled":g?"year picked":"year",muted:b,picked:g,disabled:m});this.$yearsPrev.toggleClass(i,f),this.$yearsNext.toggleClass(i,p),this.$yearsCurrent.toggleClass(i,!0).html(l+-5+n+" - "+(l+6)+n),this.$years.html(v)},fillMonths:function(){var t,e=this.options,i=e.disabledClass||"",n=e.monthsShort,o=T.isFunction(e.filter)&&e.filter,r=this.startDate,a=this.endDate,s=this.viewDate,l=s.getFullYear(),d=s.getDate(),c=this.date,h=c.getFullYear(),u=c.getMonth(),f=!1,p=!1,m=!1,g=!1,b="";for(t=0;t<=11;t++)c=new Date(l,t,d),g=l===h&&t===u,m=!1,r&&(m=(f=c.getFullYear()===r.getFullYear())&&c.getMonth()<r.getMonth()),!m&&a&&(m=(p=c.getFullYear()===a.getFullYear())&&c.getMonth()>a.getMonth()),!m&&o&&(m=!1===o.call(this.$element,c)),b+=this.createItem({index:t,text:n[t],view:m?"month disabled":g?"month picked":"month",picked:g,disabled:m});this.$yearPrev.toggleClass(i,f),this.$yearNext.toggleClass(i,p),this.$yearCurrent.toggleClass(i,f&&p).html(l+e.yearSuffix||""),this.$months.html(b)},fillDays:function(){var t,e,i,n=this.options,o=n.disabledClass||"",r=n.yearSuffix||"",a=n.monthsShort,s=parseInt(n.weekStart,10)%7,l=T.isFunction(n.filter)&&n.filter,d=this.startDate,c=this.endDate,h=this.viewDate,u=h.getFullYear(),f=h.getMonth(),p=u,m=f,g=u,b=f,v=this.date,y=v.getFullYear(),_=v.getMonth(),q=v.getDate(),$=!1,w=!1,k=!1,E=!1,C=[],x=[],S=[];for(0===f?(p-=1,m=11):m-=1,t=D(p,m),(i=(v=new Date(u,f,1)).getDay()-s)<=0&&(i+=7),d&&($=v.getTime()<=d.getTime()),e=t-(i-1);e<=t;e++)v=new Date(p,m,e),k=!1,d&&(k=v.getTime()<d.getTime()),!k&&l&&(k=!1===l.call(this.$element,v)),C.push(this.createItem({text:e,view:"day prev",muted:!0,disabled:k}));for(11===f?(g+=1,b=0):b+=1,t=D(u,f),i=42-(C.length+t),v=new Date(u,f,t),c&&(w=v.getTime()>=c.getTime()),e=1;e<=i;e++)v=new Date(g,b,e),k=!1,c&&(k=v.getTime()>c.getTime()),!k&&l&&(k=!1===l.call(this.$element,v)),x.push(this.createItem({text:e,view:"day next",muted:!0,disabled:k}));for(e=1;e<=t;e++)v=new Date(u,f,e),E=u===y&&f===_&&e===q,k=!1,d&&(k=v.getTime()<d.getTime()),!k&&c&&(k=v.getTime()>c.getTime()),!k&&l&&(k=!1===l.call(this.$element,v)),S.push(this.createItem({text:e,view:k?"day disabled":E?"day picked":"day",picked:E,disabled:k}));this.$monthPrev.toggleClass(o,$),this.$monthNext.toggleClass(o,w),this.$monthCurrent.toggleClass(o,$&&w).html(n.yearFirst?u+r+" "+a[f]:a[f]+" "+u+r),this.$days.html(C.join("")+S.join(" ")+x.join(""))},click:function(t){var e,i,n,o,r,a,s=T(t.target),l=this.viewDate;if(t.stopPropagation(),t.preventDefault(),!s.hasClass("disabled"))switch(e=l.getFullYear(),i=l.getMonth(),n=l.getDate(),a=s.data("view")){case"years prev":case"years next":e="years prev"===a?e-10:e+10,r=s.text(),(o=f.test(r))&&(e=parseInt(r,10),this.date=new Date(e,i,y(n,28))),this.viewDate=new Date(e,i,y(n,28)),this.fillYears(),o&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":e="year prev"===a?e-1:e+1,this.viewDate=new Date(e,i,y(n,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":e=parseInt(s.text(),10),this.date=new Date(e,i,y(n,28)),this.viewDate=new Date(e,i,y(n,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":i="month prev"===a?i-1:"month next"===a?i+1:i,this.viewDate=new Date(e,i,y(n,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":i=T.inArray(s.text(),this.options.monthsShort),this.date=new Date(e,i,y(n,28)),this.viewDate=new Date(e,i,y(n,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":i="day prev"===a?i-1:"day next"===a?i+1:i,n=parseInt(s.text(),10),this.date=new Date(e,i,n),this.viewDate=new Date(e,i,n),this.fillDays(),"day"===a&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,n=this.$trigger[0];i!==o;){if(i===n){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline?this.options.container&&(e=t.text()):e=t.text(),e},setValue:function(t){var e=this.$element;t=q(t)?t:"",this.isInput?e.val(t):this.isInline?this.options.container&&e.text(t):e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger(l).isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(v).on(i,T.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(t.on(e,this._place=C(this.place,this)),p.on(i,this._clickDoc=C(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger(d).isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(v).off(i,this.click),this.isInline||(t.off(e,this._place),p.off(i,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger(c,{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(i=this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(t,e){var i=this.options,n=i.months;return T.isNumeric(t)?t=r(t):w(e)&&(e=t),!0===e&&(n=i.monthsShort),n[$(t)?t:this.date.getMonth()]},getDayName:function(t,e,i){var n=this.options,o=n.days;return T.isNumeric(t)?t=r(t):(w(i)&&(i=e),w(e)&&(e=t)),(o=!0===i?n.daysMin:!0===e?n.daysShort:o)[$(t)?t:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},getDateFormat:function(){return this.options.format},setDate:function(t,e){var i=this.options.filter;if(k(t)||q(t)){if(t=this.parseDate(t),T.isFunction(i)&&!1===i.call(this.$element,t))return;this.date=t,this.viewDate=new Date(t),e||this.pick(),this.isBuilt&&this.fillAll()}},setStartDate:function(t){(k(t)||q(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){(k(t)||q(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){return S(this.format,t)},formatDate:function(t){return j.formatDate(t,this.format)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},j.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},j.setDefaults=function(t){T.extend(j.DEFAULTS,T.isPlainObject(t)&&t)},j.other=T.fn.qorDatepicker,T.fn.qorDatepicker=function(o){var r,a=E(arguments,1);return this.each(function(){var t,e,i=T(this),n=i.data(s);if(!n){if(/destroy/.test(o))return;t=T.extend({},i.data(),T.isPlainObject(o)&&o),i.data(s,n=new j(this,t))}q(o)&&T.isFunction(e=n[o])&&(r=e.apply(n,a))}),w(r)?this:r},T.fn.qorDatepicker.Constructor=j,T.fn.qorDatepicker.setDefaults=j.setDefaults,T.fn.qorDatepicker.formatDate=j.formatDate,T.fn.qorDatepicker.parseDate=function(t,e){return S(x(t),e)},T.fn.qorDatepicker.noConflict=function(){return T.fn.qorDatepicker=j.other,this},p.data("datepicker",function(t){return t.call(T.fn.qorDatepicker)})}),function(t){"function"==typeof define&&define.amd?define("formValidator",["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var l="remoteFormValidator",t="submit."+l;function d(t,e){e=s.isPlainObject(e)?e:{},this.$el=s(t),this.options=s.extend({},d.DEFAULTS,e),this.key=0,this.validators={},this.validating={},this.phase=0,this.running=0,this.destroyed=!1,this.errors=[],this.init()}d.prototype={constructor:d,init:function(){this.bind()},bind:function(){this.$el.on(t,this.validateOnSubmit.bind(this))},submit:function(t){var e=this.$el.data(QOR.SUBMITER);e?e(t):(this.unbind(),this.$el.submit(),this.bind())},unbind:function(){this.$el.off(t)},validateOnSubmit:function(t){return 0===Object.keys(this.validators).length||this.validate(this.submit.bind(this,t),t)},validate:function(t){var e=void 0,i=0;if(0<Object.keys(this.validating).length)return!1;for(e in this.validators)i++,this.validating[e]=!0;if(0===i)return!0;for(e in this.phase=1,this.validators)this.validating[e]=!0,this._callValidator(e,t);return!1},callValidator:function(t,e){this._callValidator(t,null,e)},_callValidator:function(t,e,i){this.destroyed||this.validators[t](this.validatorDone.bind(this,t,e,i))},done:function(t){0===this.errors.length?t&&t():(QOR.alert(this.errors.join("<hr />")),this.errors=[])},validatorDone:function(t,e,i,n){if(!this.destroyed)if(n&&t in this.validating&&this.errors.push(n),i)i(n);else{for(t in delete this.validating[t],this.validating)return;this.done(e)}},register:function(t,e){var i=this.key++;this.validators[i]=t,e&&e(this.callValidator.bind(this,i))},destroy:function(){this.destroyed=!0,this.unbind(),this.$el.removeData(l)}},d.DEFAULTS={},d.setDefaults=function(t){s.extend(d.DEFAULTS,s.isPlainObject(t)&&t)},d.other=s.fn.formValidator,s.fn.formValidator=function(o){var r=Array.prototype.slice.call(arguments,1),a=void 0;return this.each(function(){var t,e,i=s(this),n=i.data(l);if(!n){if(/destroy/.test(o))return;t=s.extend({},i.data(),s.isPlainObject(o)&&o),i.data(l,n=new d(this,t))}"string"==typeof o&&s.isFunction(e=n[o])&&(a=e.apply(n,r))}),void 0===a?this:a},s.fn.formValidator.Constructor=d,s.fn.formValidator.setDefaults=d.setDefaults,s.fn.formValidator.noConflict=function(){return s.fn.formValidator=d.other,this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(_){_.extend({},QOR.messages,{action:{bulk:{pleaseSelectAnItem:"You must select at least one item."},form:{areYouSure:"This action may not be undone. Are you sure you want to run anyway?"}}},!0);var i=window.Mustache,o="qor.action",t="enable."+o,n="click."+o,r=".qor-actions-bulk",f=".qor-page__header",p=".qor-actions-default",e="a.qor-action--button",m=".qor-table-container",g=".qor-search-container",q="is_undo",b=".qor-action--exit-bulk",$=".qor-slideout",a="primary_values[]";function s(t,e){this.$element=_(t),this.$wrap=_(r),this.options=_.extend({},s.DEFAULTS,_.isPlainObject(e)&&e),this.ajaxForm={},this.init()}return s.prototype={constructor:s,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(n,_.proxy(this.click,this)),this.$wrap.find(b).on(n,_.proxy(this.click,this)),_(document).on(n,".qor-table--bulking tr",this.click).on(n,e,this.actionLink)},unbind:function(){this.$element.off(n,this.click),_(document).off(n,".qor-table--bulking tr",this.click).off(n,e,this.actionLink)},initActions:function(){this.tables=_(m).find("table").length,this.tables||(_(".qor-action-bulk-buttons").find("button").attr("disabled",!0),_(e).attr("disabled",!0))},collectFormData:function(){var t=_(".qor-table--bulking").find(".mdl-checkbox__input:checked"),e=[],i=[],n=void 0;return t.length&&t.each(function(){var t=_(this).closest("tr").data("primary-key");n={},t&&(e.push({name:a,value:t.toString()}),n[a]=t.toString(),i.push(n))}),this.ajaxForm.formData=e,this.ajaxForm.normalFormData=i,this.ajaxForm},actionLink:function(){if(!_(m).find("table").length)return!1},actionSubmit:function(t){var e=_(t);if((this.$actionButton=e).data().method)return e.data().ajaxForm&&(this.collectFormData(),this.ajaxForm.properties=e.data()),this.submit(),!1},click:function(t){var e=_(t.target),i=_(".qor-page > .qor-page__header"),n=_(".qor-page > .qor-page__body"),o=i.find(".qor-page-subnav__header").length?96:48;if((this.$actionButton=e).data().ajaxForm)return this.collectFormData(),this.ajaxForm.properties=e.data(),this.submit(),!1;if(e.is(".qor-action--bulk")&&(this.$wrap.removeClass("hidden"),_(".qor-table__inner-list").remove(),this.appendTableCheckbox(),_(m).addClass("qor-table--bulking"),_(f).find(p).addClass("hidden"),_(f).find(g).addClass("hidden"),i.height()>o&&n.css("padding-top",i.height())),e.is(b)&&(this.$wrap.addClass("hidden"),this.removeTableCheckbox(),_(m).removeClass("qor-table--bulking"),_(f).find(p).removeClass("hidden"),_(f).find(g).removeClass("hidden"),parseInt(n.css("padding-top"))>o&&n.css("padding-top","")),_(this).is("tr")&&!e.is("a")){var r=_(this).find("td").first();if(r.find(".mdl-checkbox__input").get(0)){var a,s=_("body").hasClass("qor-bottomsheets-open")||_("body").hasClass("qor-slideout-open"),l=r.find(".mdl-js-checkbox"),d=_('[data-toggle="qor-action-slideout"]').find("form"),c=d.find(".js-primary-value"),h=_(this).data("primary-key"),u=c.filter('[value="'+h+'"]');return l.toggleClass("is-checked"),r.parents("tr").toggleClass("is-selected"),a=l.hasClass("is-checked"),r.find("input").prop("checked",a),d.length&&s&&(a&&!u.length&&d.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+h+'" />'),!a&&u.length&&u.remove()),!1}}},renderFlashMessage:function(t){var e=s.FLASHMESSAGETMPL;return i.parse(e),i.render(e,t)},submit:function(){var c=this,h=this.$element,u=this.$actionButton,f=this.ajaxForm||{},p=f.properties||u.data(),m=p.url,g=p.undoUrl,b=u.hasClass(q),v=u.closest($).length,r=p.one,y=h&&!v,e={};if(p.disableSuccessRedirection&&(e["X-Disabled-Success-Redirection"]="true"),p.optional||!p.fromIndex||f.formData&&f.formData.length)if(p.passCurrentQuery&&location.search.length&&(m+=-1!==m.indexOf("?")?"&":"?",m+=location.search.substring(1)),p.confirm&&p.ajaxForm&&!p.fromIndex)QOR.qorConfirm(p,function(t){if(t){_.ajax(m,{method:"POST",data:{_method:p.method},headers:e,success:function(t,e,i){var n=i.getResponseHeader("X-Location");if(n)window.location.href=n;else{var o=p.refreshUrl;o?window.location.href=o:(r&&u.remove(),window.location.reload())}}})}});else{if(b&&(m=p.undoUrl),p.targetWindow){var i='<form action="'+m+'" method="POST" target="_blank">';this.ajaxForm.formData.forEach(function(t){i+='<input type="hidden" name="'+t.name+'" value="'+t.value+'">'});var t=_(i+="</form>");return _("body").append(t),t.submit(),void t.remove()}_.ajax(m,{method:p.method,data:f.formData,dataType:p.datatype,headers:e,beforeSend:function(){g?u.prop("disabled",!0):y&&c.switchButtons(h,1)},success:function(t,e,i){var n=i.getResponseHeader("X-Location");if(n)window.location.href=n;else{var o=p.refreshUrl;if(o)window.location.href=o;else{var r=i.getResponseHeader("content-type"),a=i.getResponseHeader("Content-Disposition");if(a&&-1!==a.indexOf("attachment")){var s=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(a),l={},d="";return null!=s&&s[1]&&(d=s[1].replace(/['"]/g,"")),p.method&&(l=_.extend({},f.normalFormData,{_method:p.method})),window.QOR.qorAjaxHandleFile(m,r,d,l),void(g?u.prop("disabled",!1):c.switchButtons(h))}if(g)return h.triggerHandler("undo.qor.action",[u,b,t]),b?u.removeClass(q):u.addClass(q),void u.prop("disabled",!1);-1<r.indexOf("json")?(_(".qor-alert").remove(),y&&c.switchButtons(h),_(v?$:".mdl-layout__content").find(".qor-page__body").prepend(c.renderFlashMessage(t))):window.location.reload()}}},error:function(t,e,i){g?u.prop("disabled",!1):y&&c.switchButtons(h),QOR.alert([e,i].join(": "))}})}else QOR.alert(QOR.messages.action.bulk.pleaseSelectAnItem)},switchButtons:function(t,e){var i=!!e;t.find(".qor-action-button").prop("disabled",i)},destroy:function(){this.unbind(),this.$element.removeData(o)},removeTableCheckbox:function(){_(".qor-page__body .mdl-data-table__select").each(function(t,e){_(e).parents("td").remove()}),_(".qor-page__body .mdl-data-table__select").each(function(t,e){_(e).parents("th").remove()}),_(".qor-table-container tr.is-selected").removeClass("is-selected"),_(".qor-page__body table.mdl-data-table--selectable").removeClass("mdl-data-table--selectable"),_(".qor-page__body tr.is-selected").removeClass("is-selected")},appendTableCheckbox:function(){_(".qor-page__body .mdl-data-table__select").each(function(t,e){_(e).parents("td").remove()}),_(".qor-page__body .mdl-data-table__select").each(function(t,e){_(e).parents("th").remove()}),_(".qor-table-container tr.is-selected").removeClass("is-selected"),_(".qor-page__body table").addClass("mdl-data-table--selectable"),new window.MaterialDataTable(_(".qor-page__body table").get(0)),_('thead.is-hidden tr th:not(".mdl-data-table__cell--non-numeric")').clone().prependTo(_('thead:not(".is-hidden") tr'));var t=_('thead:not(".is-fixed") .mdl-checkbox__input'),i=_(".qor-table--medialibrary").length,n=_("body").hasClass("qor-bottomsheets-open")||_("body").hasClass("qor-slideout-open");i&&(t=_("thead .mdl-checkbox__input")),t.on("click",function(){i||(_("thead.is-fixed tr th").eq(0).find("label").click(),_(this).closest("label").toggleClass("is-checked"));var e=_('[data-toggle="qor-action-slideout"]').find("form"),t=e.find(".js-primary-value");e.length&&n&&(_(this).is(":checked")?_(".qor-table--bulking tbody tr").each(function(){var t=_(this).data("primary-key");t&&e.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+t+'" />')}):t.remove())})}},s.FLASHMESSAGETMPL='<div class="qor-alert qor-action-alert qor-alert--success [[#error]]qor-alert--error[[/error]]" [[#message]]data-dismissible="true"[[/message]] role="alert">\n          <button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert">\n            <i class="material-icons">close</i>\n          </button>\n          <span class="qor-alert-message">\n            [[#message]]\n              [[message]]\n            [[/message]]\n            [[#error]]\n              [[error]]\n            [[/error]]\n          </span>\n        </div>',s.DEFAULTS={},_.fn.qorSliderAfterShow.qorActionInit=function(t,e){var i=_(e).find('[data-toggle="qor-action-slideout"]').length,n=_('[data-toggle="qor-action-slideout"]').find("form"),o=_(".qor-page__body .mdl-checkbox__input:checked");i&&o.length&&o.each(function(t,e){var i=_(e).parents("tbody tr").data("primary-key");i&&n.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+i+'" />')})},s.plugin=function(n){return this.each(function(){var t=_(this),e=t.data(o),i=void 0;e||t.data(o,e=new s(this,n)),"string"==typeof n&&_.isFunction(i=e[n])&&i.call(e)})},_(function(){var e={},i='[data-toggle="qor.action.bulk"]';_(document).on("disable.qor.action",function(t){s.plugin.call(_(i,t.target),"destroy")}).on(t,function(t){s.plugin.call(_(i,t.target),e)}).on(n,".qor-table__actions a[data-url],[data-url][data-method=POST],[data-url][data-method=PUT],[data-url][data-method=DELETE]",function(){return(new s).actionSubmit(this),!1}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var a=window.location,s=window.QOR,o="qor.advancedsearch",t="enable."+o,e="click."+o;function l(t,e){this.$element=r(t),this.options=r.extend({},l.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return l.prototype={constructor:l,init:function(){this.$form=this.$element.find("form"),this.$modal=r(l.MODAL).appendTo("body"),this.bind()},bind:function(){this.$element.on("submit.qor.advancedsearch","form",this.submit.bind(this)).on(e,".qor-advanced-filter__save",this.showSaveFilter.bind(this)).on(e,".qor-advanced-filter__toggle",this.toggleFilterContent).on(e,".qor-advanced-filter__close",this.closeFilter).on(e,".qor-advanced-filter__delete",this.deleteSavedFilter),this.$modal.on("shown.qor.modal",this.start.bind(this))},closeFilter:function(){r(".qor-advanced-filter__dropdown").hide()},toggleFilterContent:function(t){r(t.target).closest(".qor-advanced-filter__toggle").parent().find(">[advanced-search-toggle]").toggle()},showSaveFilter:function(){this.$modal.qorModal("show")},deleteSavedFilter:function(t){var e=r(t.target).closest(".qor-advanced-filter__delete"),i=e.closest(".qor-advanced-filter__savedfilter"),n=e.data("filter-name"),o=a.pathname;return s.qorConfirm({confirm:"Are you sure you want to delete this saved filter?"},function(t){t&&r.get(o,r.param({delete_saved_filter:n})).done(function(){e.closest("li").remove(),0===i.find("li").length&&i.remove()}).fail(function(){s.qorConfirm("Server error, please try again!")})}),!1},start:function(){this.$modal.trigger("enable.qor.material").on(e,".qor-advanced-filter__savefilter",this.saveFilter.bind(this))},saveFilter:function(){var t=this.$modal.find("#qor-advanced-filter__savename").val();t&&this.$form.prepend('<input type="hidden" name="filter_saving_name" value='+t+"  />").submit()},submit:function(){var t=this.$form,e=t.find("input[name],select[name]"),i=[],n=void 0;if(e.each(function(){i.push(r(this).attr("name"))}),n=function(t){var e=decodeURIComponent(a.search.substr(1)).split("&"),i={},n=void 0,o=void 0;if(1==e.length&&""==e[0])return!1;for(o in e)""!==e[o]&&(n=e[o].split("="),i[n[0]]=n[1]);return t.forEach(function(t){delete i[t]}),i}(i),!r.isEmptyObject(n))for(var o in n)n.hasOwnProperty(o)&&t.prepend('<input type="hidden" name='+o+" value="+n[o]+"  />");this.$element.find(".qor-advanced-filter__dropdown").hide(),this.removeEmptyPairs(t)},removeEmptyPairs:function(t){t.find("advanced-filter-group").each(function(){var t=r(this);""==t.find("[filter-required]").val()&&t.remove()})},unbind:function(){},destroy:function(){this.unbind(),this.$element.removeData(o)}},l.DEFAULTS={},l.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">Save advanced filter</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                        \n                    <div class="mdl-textfield mdl-textfield--full-width mdl-js-textfield">\n                        <input class="mdl-textfield__input" type="text" id="qor-advanced-filter__savename">\n                        <label class="mdl-textfield__label" for="qor-advanced-filter__savename">Please enter name for this filter</label>\n                    </div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-advanced-filter__savefilter">Save This Filter</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">Cancel</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',l.plugin=function(n){return this.each(function(){var t=r(this),e=t.data(o),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(o,e=new l(this,n))}"string"==typeof n&&r.isFunction(i=e[n])&&i.apply(e)})},r(function(){var e='[data-toggle="qor.advancedsearch"]';r(document).on("disable.qor.advancedsearch",function(t){l.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(r(e,t.target),void 0)}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var r="qor.autoheight",t="enable."+r;function a(t,e){this.$element=o(t),this.options=o.extend({},a.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on("input",o.proxy(this.resize,this))},unbind:function(){this.$element.off("input",this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(r)}},a.DEFAULTS={},a.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new a(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e="textarea.qor-js-autoheight";o(document).on("disable.qor.autoheight",function(t){a.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(o(e,t.target))}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(y){var o=window._,n=window.FormData,r="qor.bottomsheets",t="click."+r,e="submit."+r,a="qor-bottomsheets-open",_=".mdl-layout__content.qor-page",s=".qor-page__body",q=".qor-page__header",i=".qor-bottomsheets__search-button",l=".qor-bottomsheets__search-input";function d(t,e){var i=[],n="href";return e&&(n="src"),t.each(function(){i.push(y(this).attr(n))}),o.uniq(i)}function c(t,e){var i=y.fn.qorSliderAfterShow;for(var n in i)i.hasOwnProperty(n)&&!i[n].isLoaded&&(i[n].isLoaded=!0,i[n].call(this,t,e))}function $(t,e){this.$element=y(t),this.options=y.extend({},$.DEFAULTS,y.isPlainObject(e)&&e),this.disabled=!1,this.resourseData={},this.init()}return $.prototype={constructor:$,init:function(){this.build(),this.bind()},build:function(){var t=void 0;this.$bottomsheets=t=y($.TEMPLATE).appendTo("body"),this.$body=t.find(".qor-bottomsheets__body"),this.$title=t.find(".qor-bottomsheets__title"),this.$header=t.find(".qor-bottomsheets__header"),this.$bodyClass=y("body").prop("class"),this.filterURL="",this.searchParams=""},bind:function(){this.$bottomsheets.on(e,"form",this.submit.bind(this)).on(t,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(t,".qor-pagination a",this.pagination.bind(this)).on(t,i,this.search.bind(this)).on("keyup.qor.bottomsheets",this.keyup.bind(this)).on("selectorChanged.qor.selector",this.selectorChanged.bind(this)).on("filterChanged.qor.filter",this.filterChanged.bind(this))},unbind:function(){this.$bottomsheets.off(e,"form",this.submit.bind(this)).off(t,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).off(t,".qor-pagination a",this.pagination.bind(this)).off(t,i,this.search.bind(this)).off("selectorChanged.qor.selector",this.selectorChanged.bind(this)).off("filterChanged.qor.filter",this.filterChanged.bind(this))},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="qor-action-slideout"]').find("form"),i=t.length-1;0<=i;i--)e.prepend('<input type="hidden" name="primary_values[]" value="'+t[i]+'" />')},filterChanged:function(t,e,i){var n;return(n=this.constructloadURL(e,i))&&this.reload(n),!1},selectorChanged:function(t,e,i){var n;return(n=this.constructloadURL(e,i))&&this.reload(n),!1},keyup:function(t){var e=this.$bottomsheets.find(l);13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){var t=this.$bottomsheets,e=t.data().url,i=y.trim(t.find(l).val()||""),n=e+(-1==e.indexOf("?")?"?":"&")+"keyword="+i;this.reload(n)},pagination:function(t){var e=y(t.target).prop("href");return e&&this.reload(e),!1},reload:function(t){var e=this.$bottomsheets.find(s);this.addLoading(e),this.fetchPage(t)},fetchPage:function(o){var r=this.$bottomsheets;y.ajax({url:o,headers:{"X-Layout":"lite"},success:function(t){var e=y(t).find(_),i=e.find(q),n=e.find(s);n.length?(r.find(s).html(n.html()),i.length&&(this.$body.find(q).html(i.html()).trigger("enable"),this.addHeaderClass()),r.trigger("reload.qor.bottomsheets")):this.reload(o)}.bind(this),error:QOR.ajaxError})},constructloadURL:function(t,e){var i,n=this.filterURL,o=this.$bottomsheets.data().url;if(!n){if(!o)return;n=o}return i=function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}(e,new URL("http://www.getqor.com/"+t).search),n=this.filterURL=function(t,e,i){var n=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),o=new RegExp("([?&])"+n+"=.*?(&|$)","i"),r=-1!==i.indexOf("?")?"&":"?";return i.match(o)?e?i.replace(o,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?i.replace(o,"$1"):i.replace(o,""):e?i+r+t+"="+e:void 0}(e,i,n)},addHeaderClass:function(){this.$body.find(q).remove(),this.$bottomsheets.find(q).children(".qor-bottomsheet__filter").length&&this.$body.addClass("has-header").find(q).show()},addLoading:function(t){t.html("");var e=y($.TEMPLATE_LOADING).appendTo(t);window.componentHandler.upgradeElement(e.children()[0])},loadExtraResource:function(t){var e=function(t){var e=y("link"),i=d(t),n=d(e);return o.difference(i,n)}(t.$links),i=function(t){var e=y("script"),i=d(t,!0),n=d(e,!0);return o.difference(i,n)}(t.$scripts);e.length&&!function t(e){var i=document.createElement("link"),n=e.shift();i.type="text/css",i.rel="stylesheet",i.onload=function(){e.length&&t(e)},i.href=n,document.getElementsByTagName("head")[0].appendChild(i)}(e),i.length&&function(t,e,i){for(var n=0,o=0,r=t.length;o<r;o++){var a=document.createElement("script");a.onload=function(){++n===t.length&&y.isFunction(i)&&i(),e&&e.url&&e.response&&c(e.url,e.response)},a.src=t[o],document.body.appendChild(a)}}(i,t)},loadMedialibraryJS:function(t){var e,i=t.filter("script"),n=/theme=media_library/g,o=this;i.each(function(){if(e=y(this).prop("src"),n.test(e)){var t=document.createElement("script");t.src=e,document.body.appendChild(t),o.scriptAdded=!0}})},submit:function(t){var o=this.$body,e=t.target,d=y(e),c=this,h=d.prop("action"),u=new n(e),f=d.closest(".qor-bottomsheets"),p=f.data(),i=p.ajaxType,m=d.find(":submit");p.ingoreSubmit||d.data().normalSubmit||(y(document).trigger("bottomsheetBeforeSend.qor.bottomsheets"),t.preventDefault(),y.ajax(h,{method:d.prop("method"),data:u,dataType:i||"html",processData:!1,contentType:!1,headers:{"X-Layout":"lite"},beforeSend:function(){m.prop("disabled",!0)},success:function(t,e,i){if(p.ajaxMute)f.remove();else if(p.ajaxTakeover)p.$target.parent().trigger("ajaxSuccessed.qor.bottomsheets",[t,f]);else{var n=i.getResponseHeader("Content-Disposition");if(n&&-1!==n.indexOf("attachment")){var o=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(n),r=i.getResponseHeader("Content-Type"),a="";return null!=o&&o[1]&&(a=o[1].replace(/['"]/g,"")),window.QOR.qorAjaxHandleFile(h,r,a,u),void m.prop("disabled",!1)}y(".qor-error").remove();var s=d.data("returnUrl"),l=d.data("refreshUrl");l?window.location.href=l:"refresh"!=s?(s&&"refresh"!=s?c.load(s):c.refresh(),y(document).trigger("bottomsheetSubmitComplete.qor.bottomsheets")):c.refresh()}},error:function(t,e,i){if(422===t.status){o.find(".qor-error").remove();var n=y(t.responseText).find(".qor-error");d.before(n),y(".qor-bottomsheets .qor-page__body").scrollTop(0),QOR.alert(n)}else QOR.ajaxError.apply(this,arguments)},complete:function(){m.prop("disabled",!1)}}))},load:function(s,l,d){var c,t,e,h=this.options,u=l.actionData,f=this.resourseData,p=f.selectModal,m=f.ingoreSubmit,g=this.$bottomsheets,b=this.$header,v=this.$body;s&&(l.$element&&(s=QOR.Xurl(s,l.$element).toString()),this.show(),this.addLoading(v),this.filterURL=s,v.removeClass("has-header has-hint"),l=y.isPlainObject(l)?l:{},c=l.method?l.method:"GET",t=l.datatype?l.datatype:"html",e=y.proxy(function(){y.ajax(s,{headers:{"X-Layout":"lite"},method:c,dataType:t,success:y.proxy(function(t){if("GET"===c){var e=y(t),i=void 0,n=void 0,o={$scripts:e.filter("script"),$links:e.filter("link"),url:s,response:t},r=p&&e.find(".qor-search-container").length,a=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(i=e.find(_),a&&(a=a.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),n=y(a).prop("class"),y("body").addClass(n)),!i.length)return;this.loadExtraResource(o),m&&i.find(q).remove(),i.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),v.html(i.html()),this.$title.html(e.find(h.title).html()),l.selectDefaultCreating&&this.$title.append('<button class="mdl-button mdl-button--primary" type="button" data-load-inline="true" data-select-nohint="'+l.selectNohint+'" data-select-modal="'+l.selectModal+'" data-select-listing-url="'+l.selectListingUrl+'">'+l.selectBacktolistTitle+"</button>"),p&&(v.find(".qor-button--new").data("ingoreSubmit",!0).data("selectId",f.selectId).data("loadInline",!0),"one"===p||l.selectNohint||void 0!==f.maxItem&&"1"===f.maxItem||v.addClass("has-hint"),"mediabox"!==p||this.scriptAdded||this.loadMedialibraryJS(e)),b.find(".qor-button--new").remove(),this.$title.after(v.find(".qor-button--new")),r&&(g.addClass("has-search"),b.find(".qor-bottomsheets__search").remove(),b.prepend($.TEMPLATE_SEARCH)),u&&u.length&&this.bindActionData(u),f.bottomsheetClassname&&g.addClass(f.bottomsheetClassname),this.addHeaderClass(),g.trigger("enable"),g.one("hidden.qor.bottomsheets",function(){y(this).trigger("disable")}),g.data(l),d&&y.isFunction(d)&&d(this.$bottomsheets),g.trigger("bottomsheetLoaded.qor.bottomsheets",[s,t])}else l.returnUrl?this.load(l.returnUrl):this.refresh()},this),error:y.proxy(function(){if(this.$bottomsheets.remove(),y(".qor-bottomsheets").is(":visible")||y("body").removeClass(a),0<y(".qor-error span").length){var t=y(".qor-error span").map(function(){return y(this).text()}).get().join(", ");QOR.alert(t)}else QOR.ajaxError.apply(this,arguments)},this)})},this),e())},open:function(t,e){t.loadInline||this.init(),this.resourseData=t,this.load(t.url,t,e)},show:function(){this.$bottomsheets.addClass("is-shown").get(0).offsetHeight,this.$bottomsheets.addClass("is-slided"),y("body").addClass(a)},hide:function(t){var e=y(t.target).closest(".qor-bottomsheets"),i=y(".qor-datepicker").not(".hidden");return i.length&&i.addClass("hidden"),e.qorSelectCore("destroy"),e.trigger("bottomsheetClosed.qor.bottomsheets").remove(),y(".qor-bottomsheets").is(":visible")||y("body").removeClass(a),!1},refresh:function(){this.$bottomsheets.remove(),y("body").removeClass(a),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.$element.removeData(r)}},$.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},$.TEMPLATE_ERROR='<ul class="qor-error"><li><label><i class="material-icons">error</i><span>[[error]]</span></label></li></ul>',$.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',$.TEMPLATE_SEARCH='<div class="qor-bottomsheets__search">\n            <input autocomplete="off" type="text" class="mdl-textfield__input qor-bottomsheets__search-input" placeholder="Search" />\n            <button class="mdl-button mdl-js-button mdl-button--icon qor-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button>\n        </div>',$.TEMPLATE='<div class="qor-bottomsheets">\n            <div class="qor-bottomsheets__header">\n            <h3 class="qor-bottomsheets__title"></h3>\n            <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-bottomsheets__close" data-dismiss="bottomsheets">\n            <span class="material-icons">close</span>\n            </button>\n            </div>\n            <div class="qor-bottomsheets__body"></div>\n        </div>',$.plugin=function(n){return this.each(function(){var t,e=y(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new $(this,n))}"string"==typeof n&&y.isFunction(t=i[n])&&t.apply(i)})},y.fn.qorBottomSheets=$.plugin,$}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var o="qor.chooser",t="enable."+o;function r(t,e){this.$element=l(t),this.options=l.extend({},r.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){var t,n=this.$element,e=n.data(),i={minimumResultsForSearch:8,dropdownParent:n.parent()},o={displayKey:e.remoteDataDisplayKey,iconKey:e.remoteDataIconKey,getKey:function(t,e,i){if(e){for(var n=t,o=e.split("."),r=0;void 0!==n&&r<o.length;r++)n=n[r];if(void 0!==n)return n}return i}};if(e.remoteData){i.ajax=l.fn.select2.ajaxCommonOptions(e);var r=e.ajaxUrl||e.originalAjaxUrl,a=QOR.Xurl(r,n),s=e.remoteDataPrimaryKey;delete e.ajaxUrl,n.removeAttr("data-ajax-url"),n.attr("data-original-ajax-url",r),i.ajax.url=function(t){a.query.keyword=[t.term],a.query.page=t.page,a.query.per_page=20;var e=a.build();return e.notFound.length||e.empties.length?"https://unsolvedy.dependency.localhost/"+e.notFound.concat(e.empties).toString():e.url},i.templateResult=function(t){t.QorChooserOptions=o;var e=n.parents(".qor-field").find('[name="select2-result-template"]');if(0<e.length&&e.data("raw")){var i=e.data("func");return i||(i=new Function("data",e.html()),e.data("func",i)),i(t)}return l.fn.select2.ajaxFormatResult(t,e)},i.templateSelection=function(t){if(t.loading)return t.text;t.QorChooserOptions=o;var e=n.parents(".qor-field").find('[name="select2-selection-template"]');if(t.element&&(s?l(t.element).attr("data-value",t[s]):l(t.element).attr("data-value",t.id)),0<e.length&&e.data("raw")){var i=e.data("func");return i||(i=new Function("data",e.html()),e.data("func",i)),i(t)}return l.fn.select2.ajaxFormatResult(t,e)}}n.on("select2:select",function(t){l(t.target).attr("chooser-selected","true")}).on("select2:unselect",function(t){l(t.target).attr("chooser-selected","")}),n.select2(i),this.resetSelect2Width(),t=window._.debounce(this.resetSelect2Width.bind(this),300),l(window).resize(t),n.val()&&n.attr("chooser-selected","true")},resetSelect2Width:function(){var t,e=this.$element.data().select2;e&&e.$container&&(t=e.$container).width(t.parent().width())},destroy:function(){this.$element.select2("destroy").removeData(o)}},r.DEFAULTS={},r.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new r(this,n))}"string"==typeof n&&l.isFunction(t=i[n])&&t.apply(i)})},l(function(){var e='select[data-toggle="qor.chooser"]';l(document).on("disable.qor.chooser",function(t){r.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(l(e,t.target))}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){window.location;var o="qor.content_copy",t="enable."+o,e="click."+o;function a(t,e){this.$element=r(t),this.options=r.extend({},a.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){this.bind()},bind:function(){var t=this.options;this.$element.attr("href","javascript:void(0);").html('<i class="material-icons">content_copy</i>').on(e,t.label,r.proxy(this.do,this))},unbind:function(){this.$element.off(e,this.do)},do:function(t){var e=r(t.currentTarget),i=e.data("value");if(i||(i=e.data("value-b64"))&&(i=atob(i)),!i){var n=r(this).parent().find("[data-content-copy-value]");if(0===n.length)return;i=n.text()}var o=r("<input style='position: absolute; top: -200px'>");r("body").append(o),o.val(i).select(),document.execCommand("copy"),o.remove()},destroy:function(){this.unbind(),this.$element.removeData(o)}},a.DEFAULTS={},a.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new a(this,n))}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i)})},r(function(){var e="[data-content-copy]",i={};r(document).on("disable.qor.content_copy",function(t){a.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(r(e,t.target),i)}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(y){var r=window.URL||window.webkitURL,a="qor.cropper",t="enable."+a,n="change."+a,u="click."+a,e="shown.qor.modal",i="hidden.qor.modal",_=".qor-cropper__toggle",f=".qor-cropper__wrapper",p=".qor-cropper__options",s=".qor-cropper__toggle--crop";function q(t,e){var i=String(e),n=i.toLowerCase(),o=i.toUpperCase(),r=function(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}(i);if(y.isPlainObject(t))return t[n]||t[r]||t[o]}function l(t){return/.svg$/.test(t)}function d(t,e){this.$element=y(t),this.options=y.extend(!0,{},d.DEFAULTS,y.isPlainObject(e)&&e),this.data=null,this.init()}return d.prototype={constructor:d,init:function(){var t,e=this.options,i=this.$element,n=i.closest(e.parent),o=void 0,r=void 0,a=this,s=void 0;n.length||(n=i.parent()),this.$parent=n,this.$output=n.find(e.output),this.$formCropInput=n.closest("form").find('input[name="QorResource.MediaOption"]:hidden'),this.$list=n.find(e.list),(t=this.$output.data("fetchSizedata"))?y.getJSON(t,function(t){s=JSON.parse(t.MediaOption),a.$output.val(JSON.stringify(t)),a.$formCropInput.val(JSON.stringify(t)),a.data=s||{},l(s.URL||s.Url)&&a.resetImage(),a.build(),a.bind()}):((r=y.trim(this.$output.val()))&&l((o=JSON.parse(r)).URL||o.Url)&&this.resetImage(),this.data=o||{},this.build(),this.bind())},resetImage:function(){this.$parent.addClass("is-svg")},build:function(){var t=this.$output.data(),e={},i=void 0;t&&(e={title:t.cropperTitle,ok:t.cropperOk,cancel:t.cropperCancel},i=this.options.text),e.ok&&e.title&&e.cancel&&(i=e),this.wrap(),this.$modal=y(function(i,t){return"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&y.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i}(d.MODAL,i)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t=this.$list,e=void 0;(e=t.find("img").not(".is-svg")).length?(t.find("li").append(d.TOGGLE),e.wrap(d.CANVAS),this.center(e)):t.find(s).remove()},unwrap:function(){var t=this.$list;t.find(_).remove(),t.find(".qor-cropper__canvas").each(function(){var t=y(this);t.before(t.html()).remove()})},bind:function(){this.$element.on(n,y.proxy(this.read,this)),this.$list.on(u,y.proxy(this.click,this)),this.$modal.on(e,y.proxy(this.start,this)).on(i,y.proxy(this.stop,this))},unbind:function(){this.$element.off(n,this.read),this.$list.off(u,this.click),this.$modal.off(e,this.start).off(i,this.stop)},click:function(t){var e=t.target,i=void 0,n=this.data,o=void 0;e!==this.$list[0]&&((i=y(e)).closest(".qor-cropper__toggle--delete").length&&(n.Delete=!0,this.$output.val(JSON.stringify(n)),this.$formCropInput.val(JSON.stringify(n)),this.$list.hide(),(o=y(d.ALERT)).find(".qor-fieldset__undo").one(u,function(){o.remove(),this.$list.show(),delete n.Delete,this.$output.val(JSON.stringify(n)),this.$formCropInput.val(JSON.stringify(n))}.bind(this)),this.$parent.find(".qor-fieldset").append(o)),i.closest(s).length&&(i=i.closest("li").find("img"),this.$target=i,this.$modal.qorModal("show")))},read:function(t){var e=t.target.files,i=void 0,n=this.$list,o=this.$parent.find(".qor-fieldset__alert");n.show(),o.length&&o.remove(),e&&e.length&&(i=e[0],/^image\//.test(i.type)&&r?(this.fileType=i.type,this.load(r.createObjectURL(i)),this.$parent.find(".qor-medialibrary__image-desc").show()):n.empty().html(d.FILE_LIST.replace("{{filename}}",i.name)))},load:function(t,h,u){var f,p=this.options,m=this,g=this.$list,e=y(d.LIST),b=this.data||{},v=this.fileType,i=void 0;h||(g.find("ul").remove(),g.html(e)),i=g.find("img"),this.wrap(),f=i.length,i.one("load",function(){if("image/svg+xml"===v)return g.find(_).remove(),!1;var t=y(this),e=this.naturalWidth,i=this.naturalHeight,n=t.data(),o=n.sizeResolution,r=n.sizeName,a={},s={},l=void 0,d=n.sizeResolutionWidth,c=n.sizeResolutionHeight;o?(d||c||(d=q(o,"width"),c=q(o,"height")),e<i*(l=d/c)?c=(d=e)/l:d=(c=i)*l,a={naturalWidth:e,naturalHeight:i},s={x:Math.round((e-d)/2),y:Math.round((i-c)/2),width:Math.round(d),height:Math.round(c)},m.preview(t,a,s),r&&(b.Crop=!0,b[p.key]||(b[p.key]={}),"original"!=r&&(b[p.key][r]=s))):m.center(t),""!==b.Crop&&h||delete b.Crop,h||(b.CropOptions=null,delete b.Sizes),delete b.Delete,m.$output.val(JSON.stringify(b)),m.$formCropInput.val(JSON.stringify(b)),r&&b[p.key]&&Object.keys(b[p.key]).length>=f&&u&&y.isFunction(u)&&u()}).attr("src",t).data("originalUrl",t),g.show()},start:function(){var t,o=this.options,r=this.$modal,e=this.$target.data(),a=e.sizeName||"original",i=e.sizeResolution,s=y("<img src="+e.originalUrl+">"),l=this.data||{},d=this,n=NaN,c=e.sizeResolutionWidth,h=e.sizeResolutionHeight;i&&(c||h||(c=q(i,"width"),h=q(i,"height")),n=c/h),l[o.key]||(l[o.key]={}),r.trigger("enable.qor.material").find(f).html(s),(t=this.getList(n))&&r.find(p).show().append(t),s.cropper({aspectRatio:n,data:function(t){var e={},i=void 0;if(y.isPlainObject(t))for(i in t)t.hasOwnProperty(i)&&(e[String(i).toLowerCase()]=t[i]);return e}(l[o.key][a]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,autoCropArea:1,ready:function(){r.find(".qor-cropper__options-toggle").on(u,function(){r.find(".qor-cropper__options-input").prop("checked",y(this).prop("checked"))}).prop("checked",!0),r.find(".qor-cropper__save").one(u,function(){var t=s.cropper("getData",!0),e=s.cropper("getCroppedCanvas"),i=[],n=void 0;if(l.Crop=!0,l[o.key][a]=t,d.imageData=s.cropper("getImageData"),d.cropData=t,e)try{n=e.toDataURL()}catch(t){console.log(t),console.log("Please check image Cross-origin setting")}r.find(p+" input").each(function(){var t=y(this);t.prop("checked")&&i.push(t.attr("name"))}),d.output(n,i),r.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(f+" > img").cropper("destroy").remove().end().find(p).hide().find("ul").remove()},getList:function(r){var a=[];return this.$list.find("img").not(this.$target).each(function(){var t=y(this).data(),e=t.sizeResolution,i=t.sizeName,n=t.sizeResolutionWidth,o=t.sizeResolutionHeight;e&&(n||o||(n=q(e,"width"),o=q(e,"height")),n/o===r&&a.push('<label><input class="qor-cropper__options-input" type="checkbox" name="'+i+'" checked> <span>'+i+"<small>("+n+"&times;"+o+" px)</small></span></label>"))}),a.length?"<ul><li>"+a.join("</li><li>")+"</li></ul>":""},output:function(t,e){var i=this.$target;t?this.center(i.attr("src",t),!0):this.preview(i),y.isArray(e)&&e.length&&this.autoCrop(t,e),this.$output.val(JSON.stringify(this.data)).trigger(n),this.$formCropInput.val(JSON.stringify(this.data))},preview:function(t,e,i){var n,o=t.parent().parent(),r=o.width(),a=o.height(),s=e||this.imageData,l=y.extend({},i||this.cropData),d=l.width/l.height,c=r;0!=c&&0!=s.naturalWidth&&0!=s.naturalHeight&&(a*d<=r&&(c=a*d),n=l.width/c,t.css({maxWidth:s.naturalWidth/n,maxHeight:s.naturalHeight/n}),this.center(t))},center:function(t,i){t.each(function(){var t=y(this),n=t.parent(),o=n.parent();function e(){var t=o.height(),e=n.height(),i="auto";e<t&&(i=(t-e)/2),n.css("margin-top",i)}i&&n.add(t).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(i,n){var o=this.cropData,r=this.data[this.options.key],a=this;this.$list.find("img").not(this.$target).each(function(){var t=y(this),e=t.data("sizeName");-1<y.inArray(e,n)&&(r[e]=y.extend({},o),i?a.center(t.attr("src",i),!0):a.preview(t))})},destroy:function(){this.$element.removeData(a)}},d.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},d.TOGGLE='<div class="qor-cropper__toggle">\n            <div class="qor-cropper__toggle--crop"><i class="material-icons">crop</i></div>\n            <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n        </div>',d.ALERT='<div class="qor-fieldset__alert">\n            <button class="mdl-button mdl-button--accent qor-fieldset__undo" type="button">Undo delete</button>\n        </div>',d.CANVAS='<div class="qor-cropper__canvas"></div>',d.LIST="<ul><li><img></li></ul>",d.FILE_LIST='<div class="qor-file__list-item">\n                                <span><span>{{filename}}</span></span>\n                                <div class="qor-cropper__toggle">\n                                    <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n                                </div>\n                            </div>',d.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-cropper__wrapper"></div>\n                    <div class="qor-cropper__options">\n                        <p>Sync cropping result to: <label><input type="checkbox" class="qor-cropper__options-toggle" checked/> All</label></p>\n                    </div>\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-cropper__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',d.plugin=function(o){return this.each(function(){var t=y(this),e=t.data(a),i=void 0,n=void 0;if(!e){if(!y.fn.cropper)return;if(/destroy/.test(o))return;i=y.extend(!0,{},t.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),t.data(a,e=new d(this,i))}"string"==typeof o&&y.isFunction(n=e[o])&&n.apply(e)})},y(function(){var e=".qor-file__input:not([data-cropper='disabled'])",i={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};y(document).on(t,function(t){d.plugin.call(y(e,t.target),i)}).on("disable.qor.cropper",function(t){d.plugin.call(y(e,t.target),"destroy")}).triggerHandler(t)}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var r="qor.datepicker",t="enable."+r,l="pick."+r,d="click."+r,c=".qor-datepicker__embedded",h=".qor-datepicker__save",u="[data-picker-type]";function f(t,e){this.$element=s(t),this.options=s.extend(!0,{},{text:QOR.messages.datepicker.datepicker},s.isPlainObject(e)&&e),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.init()}s.extend(!0,QOR.messages,{datepicker:{datepicker:{title:"Pick a date",ok:"OK",cancel:"Cancel"}}}),f.prototype={init:function(){this.bind()},bind:function(){this.$element.on(d,s.proxy(this.show,this))},unbind:function(){this.$element.off(d,this.show)},build:function(){var t=void 0,e=this.$element,i=this.pickerData,n={date:e.val()?new Date(e.val()):new Date,inline:!0},o=e.closest(u);i.format&&(n.format=i.format);var r=o.find(i.targetInput);if(!this.built){if(this.$modal=t=s(function(i,t){return"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&s.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i}(f.TEMPLATE,this.options.text)).appendTo("body"),r.length){var a=r.val();a.length?n.date=n.format?s.fn.qorDatepicker.parseDate(n.format,a):new Date(a):n.date=new Date}i.targetInput&&r.data("start-date")&&(n.startDate=new Date),t.find(c).on(l,s.proxy(this.change,this)).qorDatepicker(n).triggerHandler(l),t.find(h).on(d,s.proxy(this.pick,this)),this.built=!0}},unbuild:function(){this.built&&this.$modal.find(c).off(l,this.change).qorDatepicker("destroy").end().find(h).off(d,this.pick).end().remove()},change:function(t){var e,i=this.$modal,n=s(t.target);this.date=e=n.qorDatepicker("getDate"),this.formatDate=n.qorDatepicker("getDate",!0),i.find(".qor-datepicker__picked-year").text(e.getFullYear()),i.find(".qor-datepicker__picked-date").text([n.qorDatepicker("getDayName",e.getDay(),!0)+",",String(n.qorDatepicker("getMonthName",e.getMonth(),!0)),e.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){var t=this.pickerData.targetInput,e=this.$element,i=e.closest(u),n=t?i.find(t):e,o=i.data("picker-type"),r=this.formatDate;if("datetime"===o){var a=/^\d{4}-\d{1,2}-\d{1,2}/,s=n.val();a.test(s)?r=s.replace(a,r):r+=" 00:00"}n.val(r).trigger("change"),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(r)}},f.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-datepicker__picked">\n                        <div class="qor-datepicker__picked-year"></div>\n                        <div class="qor-datepicker__picked-date"></div>\n                    </div>\n                    <div class="qor-datepicker__embedded"></div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored  mdl-button--raised qor-datepicker__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored " data-dismiss="modal">$[cancel]</a>\n                </div>\n            </div>\n        </div>',f.plugin=function(o){return this.each(function(){var t,e,i=s(this),n=i.data(r);if(!n){if(!s.fn.qorDatepicker)return;if(/destroy/.test(o))return;t=s.extend(!0,{},i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(r,n=new f(this,t))}"string"==typeof o&&s.isFunction(e=n[o])&&e.apply(n)})};var i=s(document);return i.data("qor.datepicker",function(t){return t.call(f)}),s(function(){var e='[data-toggle="qor.datepicker"]';i.on("disable.qor.datepicker",function(t){f.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){f.plugin.call(s(e,t.target))}).triggerHandler(t)}),f}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){c.fn.extend({dirtyForm:function s(t,l){var d=!1;return this instanceof jQuery?(l=t,t=this):t instanceof jQuery||(t=c(t)),t.each(function(t,e){var i=c(e);if(i.is("form")){if(i.hasClass("ignore-dirtyform"))return!1;if(d=s(i.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),l))return!1}else if(i.is(":checkbox")||i.is(":radio")){if(i.hasClass("ignore-dirtyform"))return!1;if(e.checked!=e.defaultChecked)return!(d=!0)}else if(i.is("input")||i.is("textarea")){if(i.hasClass("ignore-dirtyform"))return!1;if(e.value!=e.defaultValue)return!(d=!0)}else if(i.is("select")){if(i.hasClass("ignore-dirtyform"))return!1;for(var n,o=0,r=e.options.length,a=0;a<r;a++)n=e.options[a],d=d||n.selected!=n.defaultSelected,n.defaultSelected&&(o=a);if(d&&!e.multiple&&(d=o!=e.selectedIndex),d)return!1}}),d}}),c(function(){c(document).on("submit","form",function(){window.onbeforeunload=null,c.fn.qorSlideoutBeforeHide=null}),c(document).on("change","form",function(){c(this).dirtyForm()?(c.fn.qorSlideoutBeforeHide=!0,window.onbeforeunload=function(){return"You have unsaved changes on this page. If you leave this page, you will lose all unsaved changes."}):(c.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var d=window.location,e=l(document),o="qor.filter",t="enable."+o,i="click."+o,r=".qor-bottomsheets",c=".qor-filter__dropdown",h="is-selected";function a(t,e){this.$element=l(t),this.options=l.extend({},a.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){this.bind();var t=this.$element,e=window.moment();this.$timeStart=t.find(".qor-filter__start"),this.$timeEnd=t.find(".qor-filter__end"),this.$searchParam=t.find("[data-search-param]"),this.$searchButton=t.find(this.options.button),this.startWeekDate=e.startOf("isoweek").toDate(),this.endWeekDate=e.endOf("isoweek").toDate(),this.startMonthDate=e.startOf("month").toDate(),this.endMonthDate=e.endOf("month").toDate(),this.initActionTemplate()},bind:function(){var t=this.options;this.$element.on(i,t.trigger,this.show.bind(this)).on(i,t.label,this.setFilterTime.bind(this)).on(i,t.clear,this.clear.bind(this)).on(i,t.button,this.search.bind(this)),e.on(i,this.close)},unbind:function(){this.$element.off(i)},initActionTemplate:function(){var t=this.getUrlParameter("schedule_start_at"),e=this.getUrlParameter("schedule_end_at"),i=l(this.options.trigger);(t||e)&&(this.$timeStart.val(t),this.$timeEnd.val(e),e=e?" - "+e:"",i.addClass("active clearable").find(".qor-selector-label").html(t+e),i.append('<i class="material-icons qor-selector-clear">clear</i>'))},show:function(){this.$element.find(c).toggle()},close:function(t){var e=l(t.target),i=l(c),n=i.is(":visible"),o=e.closest(c).length,r=e.closest(".qor-filter-toggle").length,a=e.closest(".qor-modal").length,s=e.closest(".ui-timepicker-wrapper").length;n&&(o||r||a||s)||i.hide()},setFilterTime:function(t){var e,i,n=l(t.target),o=n.data(),r=o.filterRange,a=void 0,s=void 0;if(!r)return!1;if(l(this.options.label).removeClass(h),n.addClass(h),"events"==r)return this.$timeStart.val(o.scheduleStartAt||""),this.$timeEnd.val(o.scheduleEndAt||""),this.$searchButton.click(),!1;switch(r){case"today":a=s=new Date;break;case"week":a=this.startWeekDate,s=this.endWeekDate;break;case"month":a=this.startMonthDate,s=this.endMonthDate}if(!a||!s)return!1;e=this.getTime(a)+" 00:00",i=this.getTime(s)+" 23:59",this.$timeStart.val(e),this.$timeEnd.val(i),this.$searchButton.click()},getTime:function(t){var e=t.getMonth()+1,i=t.getDate();return e=e<8?"0"+e:e,i=i<10?"0"+i:i,t.getFullYear()+"-"+e+"-"+i},clear:function(){var t=l(this.options.trigger),e=t.find(".qor-selector-label");return t.removeClass("active clearable"),e.html(e.data("label")),this.$timeStart.val(""),this.$timeEnd.val(""),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=d.search,i=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\?&]"+i+"=([^&#]*)").exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},updateQueryStringParameter:function(t,e,i){var n=i||d.href,o=n.match(/#\S*$/)||"",r=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),a=new RegExp("([?&])"+r+"=.*?(&|$)","i"),s=-1!==n.indexOf("?")?"&":"?";return o&&(o=o[0],n=n.replace(o,"")),n.match(a)?n=e?n.replace(a,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?n.replace(a,"$1"):n.replace(a,""):e&&(n=n+s+t+"="+e),n+o},search:function(){var t=this.$searchParam,n=d.href,o=this;t.length&&(t.each(function(){var t=l(this),e=t.data().searchParam,i=t.val();n=o.updateQueryStringParameter(e,i,n)}),this.$element.closest(r).length?l(r).trigger("filterChanged.qor.filter",[n,"qor.filter.time"]):d.href=n)},destroy:function(){this.unbind(),this.$element.removeData(o)}},a.DEFAULTS={label:!1,trigger:!1,button:!1,clear:!1},a.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new a(this,n))}"string"==typeof n&&l.isFunction(t=i[n])&&t.apply(i)})},l(function(){var e='[data-toggle="qor.filter.time"]',i={label:".qor-filter__block-buttons button",trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};l(document).on("disable.qor.filter",function(t){a.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(l(e,t.target),i)}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var c=window.location,o="qor.filter",t="enable."+o,e="click."+o,i="change."+o,n=".qor-bottomsheets",h=/([^&=]+)(=([^&]*))?/g,r=/\+/g;function u(t){return decodeURIComponent(t.replace(r," "))}function a(t,e){this.$element=d(t),this.options=d.extend({},a.DEFAULTS,d.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){this.bind()},bind:function(){var t=this.options;this.$element.on(e,t.label,d.proxy(this.toggle,this)).on(i,t.group,d.proxy(this.toggle,this))},unbind:function(){this.$element.off(e,this.toggle).off(i,this.toggle)},toggle:function(t){var e=d(t.currentTarget),i=function(t){var e=decodeURI(void 0===t?c.search:t),i={},n=void 0;for(e&&"?"===e[0]&&(e=e.substring(1));n=h.exec(e);){var o=u(n[1]),r=u(n[3]);"[]"===o.substring(o.length-2)?(i[o]||(i[o]=[])).push(r):i[o]=r}return{params:i,isArray:function(t){return"[]"===t.substring(t.length-2)},remove:function(t){delete this.params[t]},set:function(t,e){"[]"===t.substring(t.length-2)?(this.params[t]=this.params[t]||[],this.params[t].push(e)):this.params[t]=e},removeAny:function(t,e){this.params.hasOwnProperty(t)&&(this.params[t]=this.params[t].filter(function(t){return e.indexOf(t)<0}),this.params[t].length||this.remove(t))},removeItem:function(t,e){this.params.hasOwnProperty(t)&&(this.params[t]=this.params[t].filter(function(t){return t!==e}),this.params[t].length||this.remove(t))},encode:function(){var t=d.param(this.params);return t.length?"?"+t:""}}}(),n=void 0,o=void 0,r=void 0;if(e.is("select")){if(n=e.attr("name"),o=e.val(),i.isArray(n)){var a=[];e.children().each(function(t,e){return a[a.length]=d(e).prop("value")}),i.removeAny(n,a),o&&i.set(n,o)}else o?i.set(n,o):i.remove(n);r=i.encode()}else if(e.is("a")){t.preventDefault();var s=e.attr("href"),l=s.indexOf("?");r=0<=l?s.substring(0,l):"?"}else e.is("input")&&(n=e.attr("name"),(o=e.val())?i.set(n,o):i.remove(n),r=i.encode());this.applySearch(r,n)},applySearch:function(t,e){this.$element.closest(n).length?d(n).trigger("filterChanged.qor.filter",[t,e]):c.search=t},destroy:function(){this.unbind(),this.$element.removeData(o)}},a.DEFAULTS={label:!1,group:!1},a.plugin=function(n){return this.each(function(){var t,e=d(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new a(this,n))}"string"==typeof n&&d.isFunction(t=i[n])&&t.apply(i)})},d(function(){var e='[data-toggle="qor.filter"]',i={label:"a",group:"select,input"};d(document).on("disable.qor.filter",function(t){a.plugin.call(d(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(d(e,t.target),i)}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var t=s(window),l=window._,o="qor.fixer",n="enable."+o,e="click."+o,i="resize."+o,r="scroll."+o,d="is-hidden",a="is-fixed";function c(t,e){this.$element=s(t),this.options=s.extend({},c.DEFAULTS,s.isPlainObject(e)&&e),this.$clone=null,this.init()}return c.prototype={constructor:c,init:function(){var t=this.options,e=this.$element;this.buildCheck()||(this.$thead=e.find("thead:first"),this.$tbody=e.find("tbody:first"),this.$header=s(t.header),this.$subHeader=s(t.subHeader),this.$content=s(t.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=t.paddingHeight,this.fixedHeaderWidth=[],this.isEqualed=!1,this.resize(),this.bind())},bind:function(){this.$element.on(e,s.proxy(this.check,this)),this.$content.on(r,s.proxy(this.toggle,this)),t.on(i,s.proxy(this.resize,this))},unbind:function(){this.$element.off(e,this.check),this.$content.off(r,this.toggle).off(i,this.resize)},build:function(){if(this.$content.length){var t=this.$element,e=this.$thead,i=this.$clone,n=this,o=e.find("> tr").children(),r=this.$content.offset().top+s(".qor-page__header").height();i||(this.$clone=i=e.clone().prependTo(t).css({top:r})),i.addClass([a,d].join(" ")).find("> tr").children().each(function(t){s(this).outerWidth(o.eq(t).outerWidth()),n.fixedHeaderWidth.push(s(this).outerWidth())})}},unbuild:function(){this.$clone.remove()},buildCheck:function(){var t=this.$element;return!!(1<s(".qor-page__body .qor-js-table").length||0<s(".qor-global-search--container").length||t.hasClass("qor-table--medialibrary")||t.is(":hidden")||t.find("tbody > tr:visible").length<=1)},check:function(t){var e,i=s(t.target);i.is(".qor-js-check-all")&&(e=i.prop("checked"),i.closest("thead").siblings("thead").find(".qor-js-check-all").prop("checked",e).closest(".mdl-checkbox").toggleClass("is-checked",e))},toggle:function(){if(this.$content.length){var e=this,t=this.$clone,i=this.$thead,n=this.$content.scrollTop(),o=this.$content.scrollLeft(),r=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,a=s(".qor-page__header").outerHeight();if(!this.isEqualed)this.headerWidth=[],i.find("> tr").children().each(function(){e.headerWidth.push(s(this).outerWidth())}),l.difference(e.fixedHeaderWidth,e.headerWidth).length&&(s("thead.is-fixed").find(">tr").children().each(function(t){s(this).outerWidth(e.headerWidth[t])}),this.isEqualed=!0);r-a<n?t.css({"margin-left":-o}).removeClass(d):t.css({"margin-left":"0"}).addClass(d)}},resize:function(){this.build(),this.toggle()},destroy:function(){this.buildCheck()||(this.unbind(),this.unbuild(),this.$element.removeData(o))}},c.DEFAULTS={header:!1,content:!1},c.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(o);i||e.data(o,i=new c(this,n)),"string"==typeof n&&s.isFunction(t=i[n])&&t.call(i)})},s(function(){var e=".qor-js-table",i={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};s(document).on("disable.qor.fixer",function(t){c.plugin.call(s(e,t.target),"destroy")}).on(n,function(t){c.plugin.call(s(e,t.target),i)}).triggerHandler(n)}),c}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var o="qor.asyncFormSubmiter",t="enable."+o,e="submit."+o;function r(t,e){this.$el=d(t),this.options=d.extend({},r.DEFAULTS,d.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){this.bind()},bind:function(){this.$el.bind(e,this.submit)},unbind:function(){this.$el.off(e,this.submit)},destroy:function(){this.unbind(),this.$el.removeData(o)},submit:function(t){var e=t.target,l=d(e),i=l.find(":submit");if(window.FormData){t.preventDefault();var n=l.prop("action");/[?|&]continue_editing=true/.test(n)&&(n=n.replace(/([?|&]continue_editing)=true/,"$1_url=true")),d.ajax(n,{method:l.prop("method"),data:new FormData(e),dataType:"html",processData:!1,contentType:!1,headers:{"X-Layout":"lite"},beforeSend:function(){i.prop("disabled",!0)},success:function(t,e,i){l.parent().find(".qor-error").remove();var n=i.getResponseHeader("X-Location");if(n)window.location.href=n;else{var o=l.data("returnUrl"),r=l.data("refreshUrl");if(r)window.location.href=r;else if(""===o){var a="/"+location.pathname.split("/")[1],s=[];d(t).find(".qor-alert").each(function(t,e){var i=d(e).find(".qor-alert-message").text().trim(),n=d(e).data("type");""!==i&&s.push({Type:n,Message:i,Keep:!0})}),0<s.length&&(document.cookie="qor-flashes="+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+"; path="+a)}else location.href=o}}.bind(this),error:function(t,e,i){var n;l.parent().find(".qor-error").remove(),422===t.status?(l.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),n=d(t.responseText).find(".qor-error"),l.before(n),n.find("> li > label").each(function(){var t=d(this),e=t.attr("for");e&&l.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))}),d("main").scrollTop(d("main").scrollTop()+l.siblings(".qor-error").offset().top)):QOR.ajaxError.apply(this,arguments)}.bind(this),complete:function(){i.prop("disabled",!1)}})}}},r.DEFAULTS={},r.plugin=function(n){return this.each(function(){var t,e=d(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;if(!("asyncSubmiter"in(i=new r(this,n))))return;e.data(o,i)}"string"==typeof n&&d.isFunction(t=i[n])&&t.apply(i)})},d(function(){var i='form[data-async="true"]',e={};d(document).on("disable.qor.asyncFormSubmiter",function(t){var e=d(i,t.target);e.parents(".qor-slideout").length||r.plugin.call(e,"destroy")}).on(t,function(t){d(i,t.target).parents(".qor-slideout").length||r.plugin.call(d(i,t.target),e)}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var t=o(window),r=(window._,"qor.head-fixer"),i="enable."+r,e="resize."+r,n="beforeprint."+r,a="afterprint."+r,s=".qor-page__body";function l(t,e){this.$element=o(t),this.options=o.extend({},l.DEFAULTS,o.isPlainObject(e)&&e),this.$clone=null,this.init()}return l.prototype={constructor:l,init:function(){this.bind(),this.fix()},bind:function(){t.on(e,this.fix.bind(this)).on(a,this.afterPrint.bind(this)).on(n,this.beforePrint.bind(this))},unbind:function(){t.off(e,this.fix).off(a,this.afterPrint).off(n,this.beforePrint)},beforePrint:function(){o(s).each(function(){o(this).removeAttr("style")})},afterPrint:function(){this.fix()},fix:function(){o(s).each(function(){var t=o(this),e=t.siblings(".qor-page__header");0!==e.length&&(t.css("paddingTop",0),"fixed"!==e.css("position")?t.css("marginTop",0):t.css("marginTop",e.height()),e.children(":visible").length?e.removeClass("no-visibile-items",!0).show():e.addClass("no-visibile-items",!0).hide())})},destroy:function(){this.unbind(),this.$element.removeData(r)}},l.DEFAULTS={header:!1,content:!1},l.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);i||e.data(r,i=new l(this,n)),"string"==typeof n&&o.isFunction(t=i[n])&&t.call(i)})},o(function(){if(!/[?&]prin(t&|t$)/.test(location.search)){var e={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};o(document).on("disable.qor.head-fixer",function(t){l.plugin.call(o(t.target),"destroy")}).on(i,function(t){l.plugin.call(o(t.target),e)}).triggerHandler(i)}}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var o="qor.inlineEdit",t="enable."+o,e="click."+o,i="mouseenter."+o,n="mouseleave."+o,d=".qor-field",c=".qor-field__show",h=".qor-field__show-inner",r=".qor-inlineedit__edit",a=".qor-inlineedit__save",u=".qor-inlineedit__buttons",s=".qor-inlineedit__cancel",f="qor-inlineedit__field";function p(t,e){this.$element=l(t),this.options=l.extend({},p.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return p.prototype={constructor:p,init:function(){var t=this.$element,e=t.data("button-save"),i=t.data("button-cancel");this.TEMPLATE_SAVE='<div class="qor-inlineedit__buttons">\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__cancel" type="button">'+i+'</button>\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__save" type="button">'+e+"</button>\n                                      </div>",this.bind()},bind:function(){this.$element.on(i,c,this.showEditButton).on(n,c,this.hideEditButton).on(e,s,this.hideEdit).on(e,a,this.saveEdit).on(e,r,this.showEdit.bind(this))},unbind:function(){this.$element.off(i,c,this.showEditButton).off(n,c,this.hideEditButton).off(e,s,this.hideEdit).off(e,a,this.saveEdit).off(e,r,this.showEdit)},showEditButton:function(t){var e=l(p.TEMPLATE_EDIT);if(l(t.target).closest(d).find("input:disabled, textarea:disabled,select:disabled").length)return!1;e.appendTo(l(this))},hideEditButton:function(){l(".qor-inlineedit__edit").remove()},showEdit:function(t){var e=l(t.target).closest(r).hide().closest(d).addClass(f);l(this.TEMPLATE_SAVE).appendTo(e)},hideEdit:function(){l(this).closest(d).removeClass(f).find(u).remove()},saveEdit:function(){var n=l(this),o=n.closest(d),t=n.closest("form"),e=o.closest(".qor-fieldset").find('input.qor-hidden__primary_key[type="hidden"]'),i=o.find('input[name*="QorResource"],textarea[name*="QorResource"],select[name*="QorResource"]'),r=t.find("input[name=_method]"),a=i.length&&i.prop("name").match(/\.\w+/g),s=i.serialize();e.length&&(s=s+"&"+e.serialize()),s+="&qorInlineEdit=true",0<r.length&&(s+="&_method="+r.val()),a.length&&l.ajax(t.prop("action"),{method:t.prop("method"),data:s,dataType:"json",beforeSend:function(){n.prop("disabled",!0)},success:function(t){var e=function(t,e){var i=void 0,n=e[t[0].slice(1)];if(1<t.length)for(var o=1;o<t.length;o++)i=t[o].slice(1),n=l.isArray(n)?n[0][i]:n[i];return n}(a,t),i=o.removeClass(f).find(c);i.find(h).length?i.find(h).html(e):i.html(e),o.find(u).remove(),n.prop("disabled",!1)},error:function(t,e,i){window.alert([e,i].join(": ")),n.prop("disabled",!1)}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},p.DEFAULTS={},p.TEMPLATE_EDIT='<button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored qor-inlineedit__edit" type="button"><i class="material-icons">mode_edit</i></button>',p.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);i||e.data(o,i=new p(this,n)),"string"==typeof n&&l.isFunction(t=i[n])&&t.call(i)})},l(function(){if(/\/admin\//.test(location.href))return this;var e='[data-toggle="qor.inlineEdit"]',i={};l(document).on("disable.qor.inlineEdit",function(t){p.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){p.plugin.call(l(e,t.target),i)}).triggerHandler(t)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function($){var NAMESPACE="qor.input_mask",EVENT_ENABLE="enable."+NAMESPACE,EVENT_DISABLE="disable."+NAMESPACE;function QorInputMask(t,e){var i=$(t),n=i.data("masker");n?(this.$el=i,this.masker=atob(n),this.options=$.extend({},QorInputMask.DEFAULTS,$.isPlainObject(e)&&e),this.init()):this.maker=null}return QorInputMask.prototype={constructor:QorInputMask,init:function(){this.bind()},bind:function bind(){(function(masker){eval(masker)}).call(this.$el,this.masker)},unbind:function(){this.$el.unmask()},destroy:function(){this.unbind(),this.$el.removeData(NAMESPACE)}},QorInputMask.DEFAULTS={},QorInputMask.plugin=function(n){return this.each(function(){var t,e=$(this),i=e.data(NAMESPACE);if(!i){if(/destroy/.test(n))return;if(!("masker"in(i=new QorInputMask(this,n))))return;e.data(NAMESPACE,i)}"string"==typeof n&&$.isFunction(t=i[n])&&t.apply(i)})},$(function(){var e="[data-masker]",i={};$(document).on(EVENT_DISABLE,function(t){QorInputMask.plugin.call($(e,t.target),"destroy")}).on(EVENT_ENABLE,function(t){QorInputMask.plugin.call($(e,t.target),i)}).triggerHandler(EVENT_ENABLE)}),QorInputMask}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var a="qor.input_money",i="input.input-money",t="enable."+a;function s(t,e){this.$el=r(t),this.init()}return s.prototype={constructor:s,init:function(){this.bind()},bind:function(){this.$el.maskMoney()},destroy:function(){this.$el.maskMoney("destroy"),this.$el.removeData(a)}},s.DEFAULTS={},s.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=r(this),i=e.data(a);if(!i){if(/destroy/.test(n))return;if(!("$el"in(i=new s(this,n))))return;e.data(a,i)}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i,o)})},r(function(){var e={};r(document).on("disable.qor.input_money",function(t){s.plugin.call(r(i,t.target),"destroy")}).on(t,function(t){s.plugin.call(r(i,t.target),e)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function($){var NAMESPACE="qor.input_remote_validation",EVENT_ENABLE="enable."+NAMESPACE,EVENT_DISABLE="disable."+NAMESPACE,EVENT_CHANGE="change."+NAMESPACE;function QorInputValidator(element,options){var $el=$(element),$form=$el.parents("form"),validator=$el.data("validator");options=$.extend({},QorInputValidator.DEFAULTS,$.isPlainObject(options)&&options),validator&&(eval("validator = function(){"+atob(validator)+"};"),this.validator=validator.call(this),$.isFunction(this.validator)?(this.$el=$el,this.$form=$form,this.options=options,this.init()):alert("ERROR: BAD input validator for '"+$el.attr("name")+"'"))}return QorInputValidator.prototype={constructor:QorInputValidator,init:function(){this.bind()},_do:function(){},bind:function(){this.$el.on(EVENT_CHANGE,this.validate.bind(this)),this.$form.formValidator("register",this._validateByForm.bind(this),function(t){this._do=t}.bind(this))},_validateByForm:function(t,e){this.validator(t,e)},validator:function(t,e){},validate:function(t){return this.$el.val()===this.$el[0].defaultValue||(this._do(function(t){t&&QOR.alert(t,function(){this.$el.focus()}.bind(this))}.bind(this),t),!1)},unbind:function(){this.$el.off(EVENT_CHANGE)},destroy:function(){this.unbind(),this.$el.removeData(NAMESPACE)}},QorInputValidator.DEFAULTS={},QorInputValidator.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=$(this),i=e.data(NAMESPACE);if(!i){if(/destroy/.test(n))return;if(!("$el"in(i=new QorInputValidator(this,n))))return;e.data(NAMESPACE,i)}"string"==typeof n&&$.isFunction(t=i[n])&&t.apply(i,o)})},$(function(){var e="[data-validator]",i={};$(document).on(EVENT_DISABLE,function(t){QorInputValidator.plugin.call($(e,t.target),"destroy")}).on(EVENT_ENABLE,function(t){QorInputValidator.plugin.call($(e,t.target),i)}).triggerHandler(EVENT_ENABLE)}),QorInputValidator}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var a="qor.logo",i=".qor-logo[data-src]",t="load."+a,e="error."+a,n="enable."+a;function s(t,e){this.$el=r(t),this.data=this.$el.data(),this.$img=r("<img />"),this.fallback=!1,this.init()}return s.prototype={constructor:s,init:function(){this.build()},build:function(){this.$img.attr("src",this.data.src).on(t,this.onload.bind(this)).on(e,this.onerror.bind(this)),this.data.alt&&this.$img.attr("alt",this.data.alt),this.data.title&&this.$img.attr("title",this.data.title),this.$el.show().append(this.$img)},onerror:function(t){this.fallback?this.destroy():this.data.fallback?(this.fallback=!0,this.$img.attr("src",this.data.fallback)):this.destroy()},onload:function(t){this.unbind()},unbind:function(){this.$img.off(t,this.onload).off(e,this.onerror)},destroy:function(){this.unbind(),this.$el.removeData(a),this.$el.hide(),this.$img.remove()}},s.DEFAULTS={},s.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=r(this),i=e.data(a);if(!i){if(/destroy/.test(n))return;if(!("$el"in(i=new s(this,n))))return;e.data(a,i)}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i,o)})},r(function(){var e={};r(document).on("disable.qor.logo",function(t){s.plugin.call(r(i,t.target),"destroy")}).on(n,function(t){s.plugin.call(r(i,t.target),e)}).triggerHandler(n)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(e){var i=window.componentHandler,n='[class*="mdl-js"],[class*="mdl-tooltip"]';function o(t){i&&(e(t).is(n)?i.upgradeElements(t):i.upgradeElements(e(n,t).toArray()))}function r(t){i&&(e(t).is(n)?i.downgradeElements(t):i.downgradeElements(e(n,t).toArray()))}e(function(){e(document).on("enable.qor.material",function(t){o(t.target)}).on("disable.qor.material",function(t){r(t.target)}).on("update.qor.material",function(t){r(t.target),o(t.target)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var n=o(document),r="qor.modal",t="click."+r,e="keyup."+r,a="transitionend",s="qor-modal-open",l="in",i="aria-hidden";function d(t,e){this.$element=o(t),this.options=o.extend({},d.DEFAULTS,o.isPlainObject(e)&&e),this.transitioning=!1,this.fadable=!1,this.init()}return d.prototype={constructor:d,init:function(){this.fadable=this.$element.hasClass("fade"),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(t,o.proxy(this.click,this)),this.options.keyboard&&n.on(e,o.proxy(this.keyup,this))},unbind:function(){this.$element.off(t,this.click),this.options.keyboard&&n.off(e,this.keyup)},click:function(t){var e=this.$element[0],i=t.target;if(i===e&&this.options.backdrop)this.hide();else for(;i!==e;){if("modal"===o(i).data("dismiss")){this.hide();break}i=i.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(t){var e,i=this.$element;if(!this.transitioning&&!i.hasClass(l)&&(e=o.Event("show.qor.modal"),i.trigger(e),!e.isDefaultPrevented())){if(n.find("body").addClass(s),i.addClass("shown").scrollTop(0).get(0).offsetHeight,this.transitioning=!0,t||!this.fadable)return i.addClass(l),void this.shown();i.one(a,o.proxy(this.shown,this)),i.addClass(l)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(i,!1).trigger("shown.qor.modal").focus()},hide:function(t){var e,i=this.$element;if(!this.transitioning&&i.hasClass(l)&&(e=o.Event("hide.qor.modal"),i.trigger(e),!e.isDefaultPrevented())){if(n.find("body").removeClass(s),this.transitioning=!0,t||!this.fadable)return i.removeClass(l),void this.hidden();i.one(a,o.proxy(this.hidden,this)),i.removeClass(l)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass("shown").attr(i,!0).trigger("hidden.qor.modal")},toggle:function(){this.$element.hasClass(l)?this.hide():this.show()},destroy:function(){this.$element.removeData(r)}},d.DEFAULTS={backdrop:!1,keyboard:!0,show:!0},d.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new d(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o.fn.qorModal=d.plugin,o(function(){var e=".qor-modal";o(document).on(t,'[data-toggle="qor.modal"]',function(){var t=o(this),e=t.data(),i=o(e.target||t.attr("href"));d.plugin.call(i,i.data(r)?"toggle":e)}).on("disable.qor.modal",function(t){d.plugin.call(o(e,t.target),"destroy")}).on("enable.qor.modal",function(t){d.plugin.call(o(e,t.target))})}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var o="qor.tabbar.radio",t="enable."+o,e="click."+o,s="[data-tab-target]",l="is-active";function r(t,e){this.$element=a(t),this.options=a.extend({},r.DEFAULTS,a.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){this.bind()},bind:function(){this.$element.on(e,s,this.switchTab.bind(this))},unbind:function(){this.$element.off(e,s,this.switchTab)},switchTab:function(t){var e=a(t.target),i=this.$element,n=i.find(s),o=i.find("[data-tab-source]"),r=e.data().tabTarget;e.hasClass(l)||(n.removeClass(l),e.addClass(l),o.hide().filter('[data-tab-source="'+r+'"]').show(),i.trigger("switched.qor.tabbar.radio",[i,r]))},destroy:function(){this.unbind()}},r.DEFAULTS={},r.plugin=function(n){return this.each(function(){var t,e=a(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new r(this,n))}"string"==typeof n&&a.isFunction(t=i[n])&&t.apply(i)})},a(function(){var e='[data-toggle="qor.tab.radio"]';a(document).on("disable.qor.tabbar.radio",function(t){r.plugin.call(a(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(a(e,t.target))}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var d="qor.redactor",t="enable."+d,c="click."+d,n="keyup."+d,e="addCrop."+d,i="removeCrop."+d,h="scroll."+d,o=".qor-cropper__toggle--redactor",u="#redactor-link-title",f="#redactor-link-url-text",p="#redactor-modal-button-cancel";function m(t){return t.replace(/&/g," ").replace(/</g," ").replace(/>/g," ").replace(/\"/g," ").replace(/\'/g," ").replace(/\`/g," ")}function g(t,e){this.$element=l(t),this.options=l.extend(!0,{},g.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return g.prototype={constructor:g,init:function(){var t=this.options,e=this.$element,i=e.closest(t.parent);i.length||(i=e.parent()),this.$parent=i,this.$button=l(g.BUTTON),this.$modal=l(function(i,t){return"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&l.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i}(g.MODAL,t.text)).appendTo("body"),this.bind()},bind:function(){this.$element.on(e,l.proxy(this.addButton,this)).on(i,l.proxy(this.removeButton,this))},unbind:function(){this.$element.off(e).off(i).off(h)},addButton:function(t,e){var i=l(e);this.$button.css("left",l(e).width()/2).prependTo(i.parent()).find(o).one(c,l.proxy(this.crop,this,i))},removeButton:function(){this.$button.find(o).off(c),this.$button.detach()},crop:function(i){var n=this.options,t=i.attr("src"),e=t,o=l("<img>"),r=this.$modal;l.isFunction(n.replace)&&(e=n.replace(e)),o.attr("src",e),r.one("shown.qor.modal",function(){o.cropper({data:function(t){var e=t&&t.split(",");return t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t}(i.attr("data-crop-options")),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){r.find(".qor-cropper__save").one(c,function(){var e=o.cropper("getData",!0);l.ajax(n.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:t,CropOptions:{original:function(t){var e,i,n={};if(l.isPlainObject(t))for(e in t)t.hasOwnProperty(e)&&(n[("string"==typeof(i=e)&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i)]=t[e]);return n}(e)},Crop:!0}),dataType:"json",success:function(t){l.isPlainObject(t)&&t.url&&(i.attr("src",t.url).attr("data-crop-options",function(t){var e=[];return l.isPlainObject(t)&&l.each(t,function(){e.push(arguments[1])}),e.join()}(e)).removeAttr("style").removeAttr("rel"),l.isFunction(n.complete)&&n.complete(),r.qorModal("hide"))}})})}})}).one("hidden.qor.modal",function(){o.cropper("destroy").remove()}).qorModal("show").find(".qor-cropper__wrapper").append(o)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(d)}},g.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},g.BUTTON='<div class="qor-redactor__image--buttons">\n            <span class="qor-redactor__image--edit" contenteditable="false">Edit</span>\n            <span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>\n        </div>',g.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n              <div class="mdl-card__title">\n                <h2 class="mdl-card__title-text">$[title]</h2>\n              </div>\n              <div class="mdl-card__supporting-text">\n                <div class="qor-cropper__wrapper"></div>\n              </div>\n              <div class="mdl-card__actions mdl-card--border">\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">$[ok]</a>\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n              </div>\n              <div class="mdl-card__menu">\n                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close">\n                  <i class="material-icons">close</i>\n                  </button>\n              </div>\n            </div>\n        </div>',g.plugin=function(i){return this.each(function(){var r=l(this),a=r.data(d),t=void 0,e=void 0;if(a)/destroy/.test(i)&&r.redactor("core.destroy");else{if(!l.fn.redactor)return;if(/destroy/.test(i))return;r.data(d,a={});var s=["html","format","bold","italic","deleted","lists","image","file","link","table"];t={imageUpload:r.data("uploadUrl"),fileUpload:r.data("uploadUrl"),imageResizable:!0,imagePosition:!0,toolbarFixed:!1,buttons:s,callbacks:{init:function(){var e=void 0,t=this.core.box(),i=l(".qor-slideout").is(":visible"),n=void 0,o=64;s.forEach(function(t){e=this.button.get(t),this.button.setIcon(e,'<i class="material-icons '+t+'"></i>')},this),i?(n=".qor-slideout",o=l(".qor-slideout__header").height()):o+=l(n=".qor-layout main.qor-page").find(".qor-page__header").height(),l(n).on(h,function(){!function(t,e){var i=t.find(".redactor-toolbar"),n=t.offset().top,o=t.height(),r={position:"relative",top:"auto",width:"auto",boxShadow:"none"},a={position:"fixed",boxShadow:"0 2px 4px rgba(0,0,0,.1)",top:e,width:t.width()};"relative"===i.css("position")&&(o=t.height()-50),n<e?o-50-e<Math.abs(n)?i.css(r):i.css(a):i.css(r)}(t,o)}),r.data("cropUrl")&&r.data(d,a=new g(r,{remote:r.data("cropUrl"),text:r.data("text"),parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:l.proxy(function(){this.code.sync()},this)}))},imageUpload:function(t,e){var i=l(t);e.filelink&&i.prop("src",e.filelink)},click:function(t){var e=l(this.selection.parent());e.is(".redactor-layer")&&(e=l(this.selection.current())),this.selection.$currentTag=e,this.link.linkDescription="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.is()&&(this.link.linkDescription=this.link.get().prop("title"),this.link.$linkHtml=l(t.target))},modalOpened:function(t,e){var i=this;"link"==t&&(l(e).find("#redactor-link-url-text").closest("section").after('<section><label>Description for Accessibility</label><input value="'+this.link.linkDescription+'" type="text" id="redactor-link-title" placeholder="If blank, will use Text value above" /></section>'),this.link.linkUrlText=l(f).val(),this.link.description=l(u).val(),l(u).off(n),l(f).off(n),l(p).off(c),l(p).on(c,function(){i.link.clickCancel=!0}),l(u).on(n,function(){i.link.valueChanged=!0,i.link.description=m(l(this).val())}),l(f).on(n,function(){i.link.valueChanged=!0,i.link.linkUrlText=m(l(this).val())}))},modalClosed:function(t){var e=this.link.$linkHtml,i=this.link.description;"link"==t&&!this.link.insertedTriggered&&e&&e.length&&this.link.valueChanged&&!this.link.clickCancel&&(i?e.prop("title",i):e.prop("title",this.link.linkUrlText)),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.clickCancel=!1},insertedLink:function(t){var e=l(t),i=this.link.description;e.prop("title",i||e.text()),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!0},fileUpload:function(t,e){l(t).prop("href",e.filelink).html(e.filename)}}},l.extend(t,r.data("redactorSettings")),r.redactor(t)}"string"==typeof i&&l.isFunction(e=a[i])&&e.apply(a)})},l(function(){var e='textarea[data-toggle="qor.redactor"]';l(document).on("disable.qor.redactor",function(t){g.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){g.plugin.call(l(e,t.target))}).triggerHandler(t)}),g}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(u){var r=window._,o="qor.replicator",t="enable."+o,a="click."+o,s=".qor-fieldset-container";function l(t,e){this.$element=u(t),this.options=u.extend({},l.DEFAULTS,u.isPlainObject(e)&&e),this.index=0,this.init()}return l.prototype={constructor:l,init:function(){var i=this,t=this.$element,e=t.find('> .qor-field__block > [type="qor-collection-edit-new/html"]'),n=void 0;this.isInSlideout=t.closest(".qor-slideout").length,this.hasInlineReplicator=t.find(s).length,this.maxitems=t.data("maxItem"),this.isSortable=t.hasClass("qor-fieldset-sortable"),e.length&&(this.isMultipleTemplate=t.data("isMultiple"),this.isMultipleTemplate?(this.fieldsetName=[],this.template={},this.index=[],e.each(function(t,e){(n=u(e).data("fieldsetName"))&&(i.template[n]=u(e).html(),i.fieldsetName.push(n))}),this.parseMultiple()):(this.template=e.html(),this.index=e.data("next-index")),this.bind(),this.resetButton(),this.resetPositionButton())},resetPositionButton:function(){var t=this.$element.find("> .qor-sortable__button");this.isSortable&&(1<this.getCurrentItems()?t.show():t.hide())},getCurrentItems:function(){return this.$element.find("> .qor-field__block > .qor-fieldset").not(".is-deleted").length},toggleButton:function(t){var e=this.$element.find(this.options.addClass);t?e.hide():e.show()},resetButton:function(){this.maxitems<=this.getCurrentItems()?this.toggleButton(!0):this.toggleButton()},parseMultiple:function(){for(var t=void 0,e=void 0,i=this.fieldsetName,n=0,o=i.length;n<o;n++)e=i[n],t=this.initTemplate(this.template[e]),this.template[e]=t.template,this.index.push(t.index);this.multipleIndex=r.max(this.index)},bind:function(){var t=this.options;this.$element.on(a,t.addClass,u.proxy(this.add,this)).on(a,t.delClass,u.proxy(this.del,this))},unbind:function(){this.$element.off(a),this.isInSlideout||u(document).off("submit.qor.replicator","form"),u(document).off("slideoutBeforeSend.qor.slideout.replicator",".qor-slideout").off("selectcoreBeforeSend.qor.selectcore.replicator bottomsheetBeforeSend.qor.bottomsheets.replicator")},add:function(t,e,i){var n,o,r=this.options;if(this.maxitems<=this.getCurrentItems())return!1;if(!i)var a=u(t.target).closest(r.addClass),s=a.data("template"),l=a.closest(this.$element).children(r.childrenClass),d=a.closest(r.childrenClass).children("fieldset");if(this.isMultipleTemplate){for(var c in this.parseNestTemplate(s),o=this.template[s],n=u(o.replace(/\{\{index\}\}/g,this.multipleIndex)),a.data())if(c.match(/^sync/)){var h=c.replace(/^sync/,"");n.find("input[name*='."+h+"']").val(a.data(c))}d.length?d.last().after(n.show()):l.prepend(n.show()),n.data("itemIndex",this.multipleIndex).removeClass("qor-fieldset--new"),this.multipleIndex++}else i?e&&e.length&&(this.addMultiple(e),u(document).trigger("addedMultipleDone.qor.replicator")):(n=this.addSingle(),a.before(n.show()),this.index++);i||(n.trigger("enable"),u(document).trigger("added.qor.replicator",[n]),t.stopPropagation()),this.resetPositionButton(),this.resetButton()},addMultiple:function(t){for(var e=void 0,i=0,n=t.length;i<n;i++)e=this.addSingle(),this.index++,u(document).trigger("addedMultiple.qor.replicator",[e,t[i]])},addSingle:function(){var i=this,t=void 0,e=this.$element;if(t=u(this.template.replace(/(="\S*)(\{\{index\}\})/g,function(t,e){return e+i.index})),this.isSortable){var n=e.find("> .qor-field__block > .qor-sortable__item").length;t.attr("order-index",n).css("order",n)}return t.data("itemIndex",this.index).removeClass("qor-fieldset--new"),t},del:function(t){var e=this.options,i=u(t.target).closest(e.itemClass),n=void 0;i.addClass("is-deleted").children(":visible").addClass("hidden").hide(),(n=u(e.alertTemplate.replace("{{name}}",this.parseName(i)))).find(e.undoClass).one(a,function(){if(this.maxitems<=this.getCurrentItems())return window.QOR.qorConfirm(this.$element.data("maxItemHint")),!1;i.find("> .qor-fieldset__alert").remove(),i.removeClass("is-deleted").children(".hidden").removeClass("hidden").show(),this.resetButton(),this.resetPositionButton()}.bind(this)),this.resetButton(),this.resetPositionButton(),i.append(n)},parseNestTemplate:function(t){var e=this.$element,i=void 0;e.parents(".qor-fieldset-container").length&&(i=e.closest(".qor-fieldset").data("itemIndex"))&&(t?this.template[t]=this.template[t].replace(/\[\d+\]/g,"["+i+"]"):this.template=this.template.replace(/\[\d+\]/g,"["+i+"]"))},parseName:function(t){var e=t.find("input[name]").attr("name")||t.find("textarea[name]").attr("name");if(e)return e.replace(/[^\[\]]+$/,"")},destroy:function(){this.unbind(),this.$element.removeData(o)}},l.DEFAULTS={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'},l.plugin=function(n){return this.each(function(){var t=u(this),e=t.data(o),i=void 0;e||t.data(o,e=new l(this,n)),"string"==typeof n&&u.isFunction(i=e[n])&&i.call(e)})},u(function(){var e=s,i={};u(document).on("disable.qor.replicator",function(t){l.plugin.call(u(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(u(e,t.target),i)}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var a=window.location,s=window.componentHandler,l=window.history,o="qor.globalSearch",t="enable."+o,e="click."+o,d=".qor-global-search--resource",c=".qor-global-search--results",h="is-active";function u(t,e){this.$element=r(t),this.options=r.extend({},u.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return u.prototype={constructor:u,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on(e,r.proxy(this.click,this))},unbind:function(){this.$element.off(e,this.check)},initTab:function(){var t,e=a.search;/resource_name/.test(e)&&(t=e.match(/resource_name=\w+/g).toString().split("=")[1],r(d).removeClass(h),r('[data-resource="'+t+'"]').addClass(h))},click:function(t){var e=r(t.target),i=e.data();if(e.is(d)){var n,o=QOR.Xurl(a.href,this.$element);i.resource?o.qset("resource_name",i.resource):o.qdel("resource_name"),o.qdel("keyword"),n=o.toString(),l.pushState?this.fetchSearch(n,e):a.href=n}},fetchSearch:function(i,n){var o=document.title;r.ajax(i,{method:"GET",dataType:"html",beforeSend:function(){r(".mdl-spinner").remove(),r(c).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".qor-section").hide(),s.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(t){var e=r(t).find(c).html();r(d).removeClass(h),n.addClass(h),l.pushState({Page:i,Title:o},o,i),r(".mdl-spinner").remove(),r(c).removeClass("loading").html(e),s.upgradeElements(document.querySelectorAll(".qor-table"))},error:function(t,e,i){r(c).find(".qor-section").show(),r(".mdl-spinner").remove(),window.alert([e,i].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},u.DEFAULTS={},u.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);i||e.data(o,i=new u(this,n)),"string"==typeof n&&r.isFunction(t=i[n])&&t.call(i)})},r(function(){var e='[data-toggle="qor.global.search"]',i={};r(document).on("disable.qor.globalSearch",function(t){u.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){u.plugin.call(r(e,t.target),i)}).triggerHandler(t)}),u}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var l=window.FormData,o="qor.selectcore",r="afterSelected."+o,t="click."+o,e="submit."+o;function a(t,e){this.$element=s(t),this.options=s.extend({},a.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){this.bind()},bind:function(){this.$element.on(t,".qor-table-container tbody tr",this.processingData.bind(this)).on(e,"form",this.submit.bind(this))},unbind:function(){this.$element.off(t,".qor-table tbody tr").off(e,"form")},processingData:function(e){var t,i=s(e.target).closest("tr"),n={},o=this.options.onSelect;return n=i.data(),(n=s.extend({},{},n)).$clickElement=i,(t=n.mediaLibraryUrl||n.url)?s.getJSON(t,function(t){t.MediaOption&&(t.MediaOption=JSON.parse(t.MediaOption)),n=s.extend({},t,n),o&&s.isFunction(o)&&(o(n,e),s(document).trigger(r))}):o&&s.isFunction(o)&&(o(n,e),s(document).trigger(r)),!1},submit:function(e){var t=e.target,o=s(t),i=this,n=o.find(":submit"),r=void 0,a=this.options.onSubmit;s(document).trigger("selectcoreBeforeSend.qor.selectcore"),l&&(e.preventDefault(),s.ajax(o.prop("action"),{method:o.prop("method"),data:new l(t),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){o.parent().find(".qor-error").remove(),n.prop("disabled",!0)},success:function(t){(r=t).primaryKey=r.ID,s(".qor-error").remove(),a&&s.isFunction(a)?(a(r,e),s(document).trigger("afterSubmitted.qor.selectcore")):i.refresh()},error:function(t,e,i){var n=void 0;n=t.responseJSON?'<ul class="qor-error">\n                                        <li><label>\n                                            <i class="material-icons">error</i>\n                                            <span>'+t.responseJSON.errors[0]+"</span>\n                                        </label></li>\n                                    </ul>":'<ul class="qor-error">'+s(t.responseText).find("#errors").html()+"</ul>",s(".qor-bottomsheets .qor-page__body").scrollTop(0),422===t.status&&n?o.before(n):window.alert([e,i].join(": "))},complete:function(){n.prop("disabled",!1)}}))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},a.plugin=function(n){return this.each(function(){var t=s(this),e=t.data(o),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(o,e=new a(this,n))}"string"==typeof n&&s.isFunction(i=e[n])&&i.apply(e)})},s.fn.qorSelectCore=a.plugin,a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var n=s("body"),t=s(document),l=window.Mustache,o="qor.selectone",e="click."+o,i="enable."+o,r="reload.qor.bottomsheets",a=".qor-selected-many__remove",d=".qor-selected-many__undo",c="qor-selected-many__deleted",h=".qor-field__selectmany",u="is_selected",f="qor-bottomsheets__select-many";function p(t,e){this.$element=s(t),this.options=s.extend({},p.DEFAULTS,s.isPlainObject(e)&&e),this.init()}var m={lock:!1};return p.prototype={constructor:p,init:function(){this.bind()},bind:function(){t.on(e,'[data-select-modal="many"]',this.openBottomSheets.bind(this)).on(r,"."+f,this.reloadData.bind(this)),this.$element.on(e,a,this.clearSelect.bind(this)).on(e,d,this.undoDelete.bind(this))},unbind:function(){t.off(e,'[data-select-modal="many"]').off(r,"."+f),this.$element.off(e,a).off(e,d)},clearSelect:function(t){var e=s(t.target),i=e.closest(h);return e.closest("[data-primary-key]").addClass(c),this.updateSelectInputData(i),!1},undoDelete:function(t){var e=s(t.target),i=e.closest(h);return e.closest("[data-primary-key]").removeClass(c),this.updateSelectInputData(i),!1},openBottomSheets:function(t){if(m.lock)return t.preventDefault(),!1;m.lock=!0,setTimeout(function(){m.lock=!1},3e3);var e=s(t.target),i=e.data();this.BottomSheets=n.data("qor.bottomsheets"),this.bottomsheetsData=i,this.$selector=i.selectId?s(i.selectId):e.closest(h).find("select"),this.$selectFeild=this.$selector.closest(h).find(".qor-field__selected-many"),this.SELECT_MANY_SELECTED_ICON=s('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=s('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=s('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=s('[name="select-many-template"]').html(),i.url=i.selectListingUrl,i.selectDefaultCreating&&(i.url=i.selectCreatingUrl),this.BottomSheets.open(i,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return l.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return l.render(this.SELECT_MANY_HINT,t)},initItems:function(){var i,t=this.$bottomsheets.find("tbody tr"),n=this.SELECT_MANY_SELECTED_ICON,o=this.SELECT_MANY_UNSELECTED_ICON,r=[];this.$selectFeild.find("[data-primary-key]").not("."+c).each(function(){r.push(s(this).data().primaryKey)}),t.each(function(){var t=s(this),e=t.find("td:first");i=t.data().primaryKey,"-1"!=r.indexOf(i)?(t.addClass(u),e.append(n)):e.append(o)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){return{selectedNum:this.$selectFeild.find("[data-primary-key]").not("."+c).length}},updateHint:function(t){var e;s.extend(t,this.bottomsheetsData),e=this.renderHint(t),this.$bottomsheets.find(".qor-selectmany__hint").remove(),this.$bottomsheets.find(".qor-page__body").before(e)},updateSelectInputData:function(t){var e,i,n,o=(t||this.$selectFeild).find("[data-primary-key]").not("."+c),r=t?t.find(".qor-field__selectmany-input"):this.$selector,a=r.find("option");a.prop("selected",!1),o.each(function(){n=s(this).data().primaryKey,(e=a.filter('[value="'+n+'"]')).length||(i={primaryKey:n,displayName:""},e=s(l.render(p.SELECT_MANY_OPTION_TEMPLATE,i)),r.append(e)),e.prop("selected",!0)})},changeIcon:function(t,e){t.find(".qor-select__select-icon").remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').find(a).click(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(t,e){var i,n=this.renderSelectMany(t),o=this.$selectFeild.find('[data-primary-key="'+t.primaryKey+'"]');return o.length?o.hasClass(c)?(o.removeClass(c),this.updateSelectInputData(),void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0:(this.$selectFeild.append(n),e?((i=s(l.render(p.SELECT_MANY_OPTION_TEMPLATE,t))).appendTo(this.$selector),i.prop("selected",!0),this.$bottomsheets.remove(),void(s(".qor-bottomsheets").is(":visible")||s("body").removeClass("qor-bottomsheets-open"))):void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON))},handleSelectMany:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(f),this.$bottomsheets=t,this.initItems()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t,e){var i;if(t.displayName=t.Text||t.Name||t.Title||t.Code||t.Value||t[1<(i=Object.keys(t)).length&&"ID"==i[0]?i[1]:i[0]],e)this.addItem(t,!0);else{var n=t.$clickElement;n.toggleClass(u),n.hasClass(u)?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData()}},destroy:function(){this.unbind(),this.$element.removeData(o)}},p.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',p.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new p(this,n))}"string"==typeof n&&s.isFunction(t=i[n])&&t.apply(i)})},s(function(){var e='[data-toggle="qor.selectmany"]';s(document).on("disable.qor.selectone",function(t){p.plugin.call(s(e,t.target),"destroy")}).on(i,function(t){p.plugin.call(s(e,t.target))}).triggerHandler(i)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function($){var $body=$("body"),$document=$(document),Mustache=window.Mustache,NAMESPACE="qor.selectone",PARENT_NAMESPACE="qor.bottomsheets",EVENT_CLICK="click."+NAMESPACE,EVENT_ENABLE="enable."+NAMESPACE,EVENT_DISABLE="disable."+NAMESPACE,EVENT_RELOAD="reload."+PARENT_NAMESPACE,CLASS_CLEAR_SELECT=".qor-selected__remove",CLASS_CHANGE_SELECT=".qor-selected__change",CLASS_SELECT_FIELD=".qor-field__selected",CLASS_SELECT_INPUT=".qor-field__selectone-input",CLASS_SELECT_TRIGGER=".qor-field__selectone-trigger",CLASS_PARENT=".qor-field__selectone",CLASS_SELECTED="is_selected",CLASS_ONE="qor-bottomsheets__select-one";function QorSelectOne(t,e){this.$element=$(t),this.options=$.extend({},QorSelectOne.DEFAULTS,$.isPlainObject(e)&&e),this.selectedRender=null,this.init()}function firstTextKey(t){var e=Object.keys(t);return 1<e.length&&"ID"===e[0]?e[1]:e[0]}var lock={lock:!1,$parent:null,$select:null};return QorSelectOne.prototype={constructor:QorSelectOne,init:function init(){var selectedRender=this.$element.data().selectedRender;selectedRender&&eval("this.selectedRender = function(data){"+atob(selectedRender)+"};"),this.$selectOneSelectedTemplate=this.$element.find('[name="select-one-selected-template"]'),this.$selectOneSelectedIconTemplate=this.$element.find('[name="select-one-selected-icon"]'),this.bind()},bind:function(){$document.on(EVENT_CLICK,"[data-selectone-url]",this.openBottomSheets.bind(this)).on(EVENT_RELOAD,"."+CLASS_ONE,this.reloadData.bind(this)),this.$element.on(EVENT_CLICK,CLASS_CLEAR_SELECT,this.clearSelect.bind(this)).on(EVENT_CLICK,CLASS_CHANGE_SELECT,this.changeSelect)},unbind:function(){$document.off(EVENT_CLICK,"[data-selectone-url]").off(EVENT_RELOAD,"."+CLASS_ONE),this.$element.off(EVENT_CLICK,CLASS_CLEAR_SELECT).off(EVENT_CLICK,CLASS_CHANGE_SELECT)},clearSelect:function(t){var e=$(t.target).closest(CLASS_PARENT);return e.find(CLASS_SELECT_FIELD).remove(),e.find(CLASS_SELECT_INPUT).html(""),e.find(CLASS_SELECT_INPUT)[0].value="",e.find(CLASS_SELECT_TRIGGER).show(),e.trigger("qor.selectone.unselected"),!1},changeSelect:function(){$(this).closest(CLASS_PARENT).find(CLASS_SELECT_TRIGGER).trigger("click")},openBottomSheets:function(t){if(lock.lock)return t.preventDefault(),!1;lock.lock=!0,setTimeout(function(){lock.lock=!1},3e3);var e=$(t.target);lock.currentData=e.data(),lock.BottomSheets=$body.data("qor.bottomsheets"),lock.$parent=e.closest(CLASS_PARENT),lock.$select=lock.$parent.find("select"),lock.currentData.url=lock.currentData.selectoneUrl,lock.primaryField=lock.currentData.remoteDataPrimaryKey,lock.displayField=lock.currentData.remoteDataDisplayKey,lock.iconField=lock.currentData.remoteDataIconKey,lock.SELECT_ONE_SELECTED_ICON=this.$selectOneSelectedIconTemplate.html();var i=$.extend({},lock.currentData);lock.$select.length&&(i.$element=lock.$select),lock.BottomSheets.open(i,this.handleSelectOne.bind(this))},initItem:function(){var t,e=lock.$parent.find(CLASS_SELECT_FIELD),i=lock.currentData.remoteRecordeUrl;i&&lock.$bottomsheets.find("tr[data-primary-key]").each(function(){var t=$(this).data();t.url=i.replace("{ID}",t.primaryKey)}),e.length&&(t=e.data().primaryKey)&&lock.$bottomsheets.find('tr[data-primary-key="'+t+'"]').addClass(CLASS_SELECTED).find("td:first").append(lock.SELECT_ONE_SELECTED_ICON)},reloadData:function(){this.initItem()},renderSelectOne:function(t){return Mustache.render(this.$selectOneSelectedTemplate.html(),t)},handleSelectOne:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(CLASS_ONE),lock.$bottomsheets=t,this.initItem()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t){var e,i=lock.$parent,n=i.find(CLASS_SELECT_FIELD);t.displayName=lock.displayField?t[lock.displayField]:t.Text||t.Name||t.Title||t.Value||t.Code||firstTextKey(t),t.selectoneValue=lock.primaryField?t[lock.primaryField]:t.primaryKey||t.ID,lock.iconField&&(t.icon=t[lock.iconField]),t.icon&&/\.svg/.test(t.icon)&&(t.iconSVG=!0),lock.$select.length&&(this.selectedRender&&(t.displayText=this.selectedRender(t)),e=this.renderSelectOne(t),n.length&&n.remove(),i.prepend(e),i.find(CLASS_SELECT_TRIGGER).hide(),lock.$select.html(Mustache.render(QorSelectOne.SELECT_ONE_OPTION_TEMPLATE,t)),lock.$select[0].value=t.primaryKey||t.ID,i.trigger("qor.selectone.selected",[t]),lock.$bottomsheets.qorSelectCore("destroy").remove(),$(".qor-bottomsheets").is(":visible")||$("body").removeClass("qor-bottomsheets-open"))},destroy:function(){this.unbind(),this.$element.removeData(NAMESPACE)}},QorSelectOne.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ selectoneValue ]]" selected>[[ displayName ]]</option>',QorSelectOne.plugin=function(n){var o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=$(this),e=t.data(NAMESPACE),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(NAMESPACE,e=new QorSelectOne(this,n))}"string"==typeof n&&$.isFunction(i=e[n])&&i.apply(e,o)})},$(function(){var e='[data-toggle="qor.selectone"]';$(document).on(EVENT_DISABLE,function(t){QorSelectOne.plugin.call($(e,t.target),"destroy")}).on(EVENT_ENABLE,function(t){QorSelectOne.plugin.call($(e,t.target))}).triggerHandler(EVENT_ENABLE)}),QorSelectOne}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var t=d(document),r="qor.selector",i="enable."+r,e="click."+r,c="selected",h="disabled",a="clearable",s="."+c,u=".qor-selector-toggle",l=".qor-selector-label",f=".qor-selector-menu",p=".qor-bottomsheets";function m(t,e){this.options=e,this.$element=d(t),this.init()}return m.prototype={constructor:m,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var t=this.$element,e=d(m.TEMPLATE),i=this.options.aligned+"-aligned",s={},n=t.data(),o=n.hover,l=t.attr("name");this.isBottom="bottom"==n.position,o&&e.addClass("hover"),e.addClass(i).find(f).html(function(){var a=[];return t.children().each(function(){var t=d(this),e=t.attr("selected"),i=t.attr("disabled"),n=t.attr("value"),o=t.text(),r=[];e&&(r.push(c),s.value=n,s.label=o,s.paramName=l),i&&r.push(h),a.push("<li"+(r.length?' class="'+r.join(" ")+'"':"")+' data-value="'+n+'" data-label="'+o+'" data-param-name="'+l+'">'+o+"</li>")}),a.join("")}),this.$selector=e,t.hide().after(e),e.find(u).data("paramName",l),this.pick(s,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(e,d.proxy(this.click,this)),t.on(e,d.proxy(this.close,this))},unbind:function(){this.$selector.off(e,this.click),t.off(e,this.close)},click:function(t){var e=d(t.target);t.stopPropagation(),e.is(".qor-selector-clear")?this.clear():e.is("li")?(e.hasClass(c)||e.hasClass(h)||this.pick(e.data()),this.close()):e.closest(u).length&&this.open()},pick:function(t,e){var i=this.$selector,n=!!t.value,o=this.$element;i.find(u).toggleClass("active",n).toggleClass(a,n&&this.options.clearable).find(l).text(t.label||this.placeholder),e||(i.find(f).children('[data-value="'+t.value+'"]').addClass(c).siblings(s).removeClass(c),o.val(t.value),o.closest(p).length&&!o.closest('[data-toggle="qor.filter"]').length?d(p).trigger("selectorChanged.qor.selector",[t.value,t.paramName]):o.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(u).removeClass("active").removeClass(a).find(l).text(this.placeholder).end().end().find(f).children(s).removeClass(c),t.val("").trigger("change")},open:function(){t.triggerHandler(e),d(".qor-filter__dropdown").hide(),this.$selector.addClass("open"),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass("open"),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(r)}},m.DEFAULTS={aligned:"left",clearable:!1},m.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',m.plugin=function(o){return this.each(function(){var t,e,i=d(this),n=i.data(r);if(!n){if(/destroy/.test(o))return;t=d.extend({},m.DEFAULTS,i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(r,n=new m(this,t))}"string"==typeof o&&d.isFunction(e=n[o])&&e.apply(n)})},d(function(){var e='[data-toggle="qor.selector"]';d(document).on("disable.qor.selector",function(t){m.plugin.call(d(e,t.target),"destroy")}).on(i,function(t){m.plugin.call(d(e,t.target))}).triggerHandler(i)}),m}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(g){var t=g(document),o=window.FormData,r=window._,a="qor.slideout",e="keyup."+a,i="click."+a,n="submit."+a,b="shown."+a,v="hidden."+a,s="transitionend",l="qor-slideout-open",d="qor-slideout-mini",c="is-shown",h="is-slided",y=".qor-body__loading";function u(t,e){var i=[],n="href";return e&&(n="src"),t.each(function(){i.push(g(this).attr(n))}),r.uniq(i)}function f(t,e){var i=g.fn.qorSliderAfterShow;for(var n in i)i.hasOwnProperty(n)&&!i[n].isLoaded&&(i[n].isLoaded=!0,i[n].call(this,t,e))}function _(t,e,i){for(var n=0,o=0,r=t.length;o<r;o++){var a=document.createElement("script");a.onload=function(){++n===t.length&&g.isFunction(i)&&i(),e&&e.url&&e.response&&f(e.url,e.response)},a.src=t[o],document.body.appendChild(a)}}function q(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&q(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function $(t){var e=g("script"),i=u(t,!0),n=u(e,!0);return r.difference(i,n)}function w(t){var e=g("link"),i=u(t),n=u(e);return r.difference(i,n)}function p(t,e){this.$element=g(t),this.options=g.extend({},p.DEFAULTS,g.isPlainObject(e)&&e),this.options.language=this.options.language||this.$element.attr("lang")||g("html").attr("lang"),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}return p.prototype={constructor:p,init:function(){this.build(),this.bind()},build:function(){var t;this.$slideout=t=g(p.TEMPLATE).appendTo("body"),this.$slideoutTemplate=t.html()},unbuild:function(){this.$slideout.remove()},bind:function(){this.$slideout.on(n,"form",this.submit.bind(this)).on(i,".qor-slideout__fullscreen",this.toggleSlideoutMode.bind(this)).on(i,'[data-dismiss="slideout"]',this.closeSlideout.bind(this)),t.on(e,g.proxy(this.keyup,this))},unbind:function(){this.$slideout.off(n,this.submit).off(i),t.off(e,this.keyup)},keyup:function(t){if(27===t.which){if(g(".qor-bottomsheets").is(":visible")||g(".qor-modal").is(":visible")||g("#redactor-modal-box").length||g("#dialog").is(":visible"))return;this.hide(),this.removeSelectedClass()}},loadExtraResource:function(t){var e=w(t.$links),i=$(t.$scripts);e.length&&q(e),i.length&&_(i,t)},removeSelectedClass:function(){this.$element.find("[data-url]").removeClass("is-selected")},addLoading:function(){g(y).remove(),g(p.TEMPLATE_LOADING).appendTo(g("body")).trigger("enable")},toggleSlideoutMode:function(){this.$slideout.toggleClass("qor-slideout__fullscreen").find(".qor-slideout__fullscreen i").toggle()},submit:function(l){var d=this.$slideout,t=(this.$body,l.target),c=g(t),h=this,e=c.find(":submit");if(d.trigger("slideoutBeforeSend.qor.slideout"),o){l.preventDefault();var i=c.prop("action"),n={"X-Layout":"lite"};/[?|&]continue_editing=true/.test(i)?i=i.replace(/([?|&]continue_editing)=true/,"$1_url=true"):n["X-Redirection-Disabled"]="true",g.ajax(i,{method:c.prop("method"),data:new o(t),dataType:"html",processData:!1,contentType:!1,headers:n,beforeSend:function(){e.prop("disabled",!0),g.fn.qorSlideoutBeforeHide=null},success:function(t,e,i){c.parent().find(".qor-error").remove(),d.trigger("slideoutSubmitComplete.qor.slideout");var n=i.getResponseHeader("X-Location");if(n){if(l.originalEvent&&l.originalEvent.explicitOriginalTarget&&"window"===g(l.originalEvent.explicitOriginalTarget).data().submitSuccessTarget)return void(window.location.href=n);h.load(n)}else{var o=c.data("returnUrl"),r=c.data("refreshUrl");if(r)window.location.href=r;else if("refresh"!==o)if(o&&"refresh"!==o)h.load(o);else{var a="/"+location.pathname.split("/")[1],s=[];g(t).find(".qor-alert").each(function(t,e){var i=g(e).find(".qor-alert-message").text().trim(),n=g(e).data("type");""!==i&&s.push({Type:n,Message:i,Keep:!0})}),0<s.length&&(document.cookie="qor-flashes="+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+"; path="+a),h.refresh()}else h.refresh()}},error:function(t,e,i){var n;c.parent().find(".qor-error").remove(),422===t.status?(c.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),n=g(t.responseText).find(".qor-error"),c.before(n),n.find("> li > label").each(function(){var t=g(this),e=t.attr("for");e&&c.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))}),d.scrollTop(0)):QOR.ajaxError.apply(this,arguments)},complete:function(){e.prop("disabled",!1)}})}},showOnLoad:function(t,e){this.show();var i=g.fn.qorSliderAfterShow;if(i)for(var n in i)i.hasOwnProperty(n)&&g.isFunction(i[n])&&(i[n].isLoaded=!0,i[n].call(this,t,e));this.$slideout.trigger("slideoutLoaded.qor.slideout",[t,e])},load:function(c,h){var u,t,e,f,p=this.options,m=this.$slideout;if(c){if((h=g.isPlainObject(h)?h:{}).image){m.html(this.$slideoutTemplate);var i=m.find(".qor-slideout__title");h.title?i.html(h.title):i.remove(),this.$body=m.find(".qor-slideout__body");var n='<div class="center-text"><img src="'+c+'"></div>';return this.$body.html(n),g(y).remove(),m.one(b,function(){g(this).trigger("enable")}).one(v,function(){g(this).trigger("disable")}),void this.showOnLoad(c,n,!1)}u=h.method?h.method:"GET",t=h.datatype?h.datatype:"html",e=g.proxy(function(){g.ajax(c,{method:u,dataType:t,cache:!0,ifModified:!0,headers:{"X-Layout":"lite"},success:g.proxy(function(t){var e=void 0,i=void 0,n=void 0,o=void 0,r=void 0,a=void 0,s=void 0;if(g(y).remove(),"GET"===u){if(!(i=(e=g(t)).find(".mdl-layout__content.qor-page")).length)return;i.find(".qor-action-button").attr("data-disable-success-redirection","true"),i.find(".qor-page__footer_copy-rigth").remove(),n=i.find(".qor-form-container"),this.slideoutType=n.length&&n.data().slideoutType,1===(o=n.find("form")).length&&o.data(QOR.SUBMITER,this.submit.bind(this));var l=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(l){l=l.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),s=g(l).prop("class"),g("body").addClass(s);var d={$scripts:e.filter("script"),$links:e.filter("link"),url:c,response:t};this.loadExtraResource(d)}if(i.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),r=$(i.find("script[src]")),a=w(i.find("link[href]")),r.length)_(r,{url:c,response:t},function(){});a.length&&q(a),i.find("script[src],link[href]").remove(),m.html(this.$slideoutTemplate),f=m.find(".qor-slideout__title"),this.$body=m.find(".qor-slideout__body"),f.html(e.find(p.title).html()),function(t,e){var i="string"==typeof t?document.getElementById(t):t,n=i.cloneNode(!1);n.innerHTML=e,i.parentNode.replaceChild(n,i)}(m.find(".qor-slideout__body")[0],i.html()),this.$body.find(".qor-actions__locale").remove(),m.one(b,function(){g(this).trigger("enable")}).one(v,function(){g(this).trigger("disable")}),m.find(".qor-slideout__opennew").attr("href",c),this.showOnLoad(c,t)}else h.returnUrl?this.load(h.returnUrl):this.refresh()},this),error:g.proxy(function(){if(g(y).remove(),0<g(".qor-error span").length){var t=g(".qor-error span").map(function(){return g(this).text()}).get().join(", ");QOR.alert(t)}else QOR.ajaxError.apply(this,arguments)},this)})},this),this.slided?(this.hide(!0),this.$slideout.one(v,e)):e()}},open:function(t){return this.addLoading(),this.load(t.url,t.data||t)},reload:function(t){this.hide(!0),this.load(t)},show:function(){var t,e=this.$slideout;this.slided||(t=g.Event("show.qor.slideout"),e.trigger(t),t.isDefaultPrevented()||(e.removeClass(d),"mini"==this.slideoutType&&e.addClass(d),e.addClass(c).get(0).offsetWidth,e.one(s,g.proxy(this.shown,this)).addClass(h).scrollTop(0)))},shown:function(){this.slided=!0,g("body").addClass(l),this.$slideout.trigger("beforeEnable.qor.slideout").trigger(b).trigger("afterEnable.qor.slideout")},closeSlideout:function(){this.hide()},hide:function(e){var i=this,t=QOR.messages.slideout;g.fn.qorSlideoutBeforeHide?window.QOR.qorConfirm(t,function(t){t&&i.hideSlideout(e)}):this.hideSlideout(e),this.removeSelectedClass()},hideSlideout:function(t){var e,i=this.$slideout,n=g(".qor-datepicker").not(".hidden");window.onbeforeunload=null,g.fn.qorSlideoutBeforeHide=null,n.length&&n.addClass("hidden"),this.slided&&(e=g.Event("hide.qor.slideout"),i.trigger(e),e.isDefaultPrevented()||(i.one(s,g.proxy(this.hidden,this)).removeClass(h+" qor-slideout__fullscreen"),t||i.trigger("slideoutClosed.qor.slideout")))},hidden:function(){this.slided=!1,g("body").removeClass(l),this.$slideout.removeClass(c).trigger(v)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(a)}},g.extend({},QOR.messages,{slideout:{confirm:"You have unsaved changes on this slideout. If you close this slideout, you will lose all unsaved changes. Are you sure you want to close the slideout?"}},!0),p.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},p.TEMPLATE='<div class="qor-slideout">\n            <div class="qor-slideout__header">\n                <div class="qor-slideout__header-link">\n                    <a href="#" target="_blank" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__opennew"><i class="material-icons">open_in_new</i></a>\n                    <a href="#" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__fullscreen">\n                        <i class="material-icons">fullscreen</i>\n                        <i class="material-icons" style="display: none;">fullscreen_exit</i>\n                    </a>\n                </div>\n                <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout">\n                    <span class="material-icons">close</span>\n                </button>\n                <h3 class="qor-slideout__title"></h3>\n            </div>\n            <div class="qor-slideout__body"></div>\n        </div>',p.TEMPLATE_LOADING='<div class="qor-body__loading">\n            <div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>\n        </div>',p.plugin=function(n){return this.each(function(){var t,e=g(this),i=e.data(a);if(!i){if(/destroy/.test(n))return;e.data(a,i=new p(this,n))}"string"==typeof n&&g.isFunction(t=i[n])&&t.apply(i)})},g.fn.qorSlideout=p.plugin,t.data("qor.slideout",function(t){return t.call(p)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var r=window.location,a="qor.sorter",t="enable."+a,e="click."+a,i="is-sortable";function s(t,e){this.$element=o(t),this.options=o.extend({},s.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){this.$element.addClass(i),this.bind()},bind:function(){this.$element.on(e,"> thead > tr > th",o.proxy(this.sort,this))},unbind:function(){this.$element.off(e,this.sort)},sort:function(t){var e=o(t.currentTarget).data("orderBy"),i=r.search,n="order_by="+e;e&&(/order_by/.test(i)?i=i.replace(/order_by(=[.\w:]+)?/,function(){return n}):i+=-1<i.indexOf("?")?"&"+n:n,r.search=i)},destroy:function(){this.unbind(),this.$element.removeClass(i).removeData(a)}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(a);if(!i){if(/destroy/.test(n))return;e.data(a,i=new s(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e=".qor-js-table";o(document).on("disable.qor.sorter",function(t){s.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(o(e,t.target))}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var e=window._,r=a("body"),o="qor.tabbar",t="enable."+o,i="click."+o,s=".qor-layout__tab-button",l=".qor-layout__tab-content",d=".mdl-layout__tab-bar-container",c=".qor-layout__tab-right",h=".qor-layout__tab-left",u="is-active";function f(t,e){this.$element=a(t),this.options=a.extend({},f.DEFAULTS,a.isPlainObject(e)&&e),this.init()}return f.prototype={constructor:f,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(i,s,this.switchTab.bind(this)),this.$element.on(i,c,this.scrollTabRight.bind(this)),this.$element.on(i,h,this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(i,s,this.switchTab),this.$element.off(i,c,this.scrollTabRight),this.$element.off(i,h,this.scrollTabLeft)},initTab:function(){var t=this.$element.data();t.scopeActive?r.data("tabScopeActive",t.scopeActive):(a(s).first().addClass(u),r.data("tabScopeActive",a(s).first().data("name"))),this.tabWidth=0,this.slideoutWidth=a(l).outerWidth(),e.each(a(s),function(t){this.tabWidth=this.tabWidth+a(t).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(d).append(f.ARROW_RIGHT)},scrollTabLeft:function(t){t.stopPropagation();var e=a(d),i=e.scrollLeft(),n=i-this.slideoutWidth;0<i&&e.animate({scrollLeft:n},400,function(){a(c).show(),0==e.scrollLeft()&&a(h).hide()})},scrollTabRight:function(t){t.stopPropagation();var e=a(d),i=e.scrollLeft(),n=this.tabWidth,o=this.slideoutWidth,r=i+o;r<n&&(e.animate({scrollLeft:r},400,function(){a(h).show(),e.scrollLeft()+o>=n&&a(c).hide()}),a(h).length||this.$element.find(d).prepend(f.ARROW_LEFT))},switchTab:function(t){var i=a(t.target),e=this.$element,n=i.data(),o=r.data().tabScopeActive;if(a(".qor-slideout").is(":visible"))return i.hasClass(u)||(e.find(s).removeClass(u),i.addClass(u),a.ajax(n.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){a(".qor-layout__tab-spinner").remove();a(l).hide().before('<div class="mdl-spinner mdl-js-spinner is-active qor-layout__tab-spinner"></div>'),window.componentHandler.upgradeElement(a(".qor-layout__tab-spinner")[0])},success:function(t){a(".qor-layout__tab-spinner").remove(),r.data("tabScopeActive",i.data("name"));var e=a(t).find(l).html();a(l).show().html(e).trigger("enable")},error:function(){a(".qor-layout__tab-spinner").remove(),r.data("tabScopeActive",o)}})),!1},destroy:function(){this.unbind(),r.removeData("tabScopeActive")}},f.ARROW_RIGHT='<a href="javascript://" class="qor-layout__tab-right"></a>',f.ARROW_LEFT='<a href="javascript://" class="qor-layout__tab-left"></a>',f.DEFAULTS={},f.plugin=function(n){return this.each(function(){var t,e=a(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new f(this,n))}"string"==typeof n&&a.isFunction(t=i[n])&&t.apply(i)})},a(function(){var e='[data-toggle="qor.tab"]';a(document).on("disable.qor.tabbar",function(t){f.plugin.call(a(e,t.target),"destroy")}).on(t,function(t){f.plugin.call(a(e,t.target))}).triggerHandler(t)}),f}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var a="qor.timepicker",t="enable."+a,e="click."+a,i="focus."+a,n="keydown."+a,o="blur."+a,s="selectTime."+a,l="[data-picker-type]";function d(t,e){this.$element=r(t),this.options=r.extend(!0,{},d.DEFAULTS,r.isPlainObject(e)&&e),this.formatDate=null,this.pickerData=this.$element.data(),this.targetInputClass=this.pickerData.targetInput,this.parent=this.$element.closest(l),this.isDateTimePicker=this.targetInputClass&&this.parent.length,this.$targetInput=this.parent.find(this.targetInputClass),this.init()}return d.prototype={init:function(){this.bind(),this.oldValue=this.$targetInput.val();var t=new Date,e=t.getMonth()+1,i=t.getDate();e=e<8?"0"+e:e,i=i<10?"0"+i:i,this.dateValueNow=t.getFullYear()+"-"+e+"-"+i},bind:function(){this.isDateTimePicker&&this.$targetInput.qorTimepicker({timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"}).on(s,r.proxy(this.changeTime,this)).on(o,r.proxy(this.blur,this)).on(i,r.proxy(this.focus,this)).on(n,r.proxy(this.keydown,this)),this.$element.on(e,r.proxy(this.show,this))},unbind:function(){this.$element.off(e,this.show),this.isDateTimePicker&&this.$targetInput.off(s,this.changeTime).off(o,this.blur).off(i,this.focus).off(n,this.keydown)},focus:function(){},blur:function(){var t,e,i,n,o,r,a=this.$targetInput.val(),s=a.split(" "),l=s.length,d=/\d{1,2}:\d{1,2}/,c=/^\d{4}-\d{1,2}-\d{1,2}/;if(a){if(1==l)c.test(s[0])&&(e=s[0],i="00:00"),d.test(s[0])&&(e=this.dateValueNow,i=s[0]);else for(var h=0;h<l;h++){n=c.test(s[h]),o=d.test(s[h]),n&&(e=s[h],r="-"),o&&(i=s[h],r=":"),t=s[h].split(r);for(var u=0;u<t.length;u++)t[u].length<2&&(t[u]="0"+t[u]);n&&(e=t.join(r)),o&&(i=t.join(r))}this.checkDate(e)&&this.checkTime(i)?(this.$targetInput.val(e+" "+i),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)}},keydown:function(t){var e=t.keyCode;-1==[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105].indexOf(e)&&t.preventDefault()},checkDate:function(t){return/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/.test(t)},checkTime:function(t){return/^([01]\d|2[0-3]):?([0-5]\d)$/.test(t)},changeTime:function(){var t,e=this.$targetInput,i=this.oldValue,n=/\d{1,2}:\d{1,2}/,o=n.test(i),r=e.data().timepickerList.find(".ui-timepicker-selected").html();t=i?o?i.replace(n,r):i+" "+r:this.dateValueNow+" "+r,e.val(t)},show:function(){this.isDateTimePicker&&(this.$targetInput.qorTimepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.qorTimepicker("remove"),this.$element.removeData(a)}},d.DEFAULTS={},d.plugin=function(o){return this.each(function(){var t,e,i=r(this),n=i.data(a);if(!n){if(!r.fn.qorDatepicker)return;if(/destroy/.test(o))return;t=r.extend(!0,{},i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(a,n=new d(this,t))}"string"==typeof o&&r.isFunction(e=n[o])&&e.apply(n)})},r(function(){var e='[data-toggle="qor.timepicker"]';r(document).on("disable.qor.timepicker",function(t){d.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){d.plugin.call(r(e,t.target))}).triggerHandler(t)}),d}),$(function(){$(document).on("click.qor.alert",'[data-dismiss="alert"]',function(){$(this).closest(".qor-alert").remove()}),setTimeout(function(){$('.qor-alert[data-dismissible="true"]').remove()},5e3)}),$(function(){var i=$(".qor-page__body > .qor-form-container > form");$(".qor-error > li > label").each(function(){var t=$(this),e=t.attr("for");e&&i.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))})}),$(function(){$(document).on("click",".qor-dialog--global-search",function(t){t.stopPropagation(),$(t.target).parents(".qor-dialog-content").length||$(t.target).is(".qor-dialog-content")||$(".qor-dialog--global-search").remove()}),$(document).on("click",".qor-global-search--show",function(t){t.preventDefault();var e=$(this).data(),i=window.Mustache.render('<div class="qor-dialog qor-dialog--global-search" tabindex="-1" role="dialog" aria-hidden="true"><div class="qor-dialog-content"><form action=[[actionUrl]]><div class="mdl-textfield mdl-js-textfield" id="global-search-textfield"><input class="mdl-textfield__input ignore-dirtyform" name="keyword" id="globalSearch" value="" type="text" placeholder="" /><label class="mdl-textfield__label" for="globalSearch">[[placeholder]]</label></div></form></div></div>',e);$("body").append(i),window.componentHandler.upgradeElement(document.getElementById("global-search-textfield")),$("#globalSearch").focus()})}),$(function(){var o=[],r="qoradmin_menu_status",t=localStorage.getItem(r);t&&t.length&&(o=t.split(",")),$(".qor-menu-container").on("click","> ul > li > a",function(){var t=$(this),e=t.parent(),i=t.next("ul"),n=e.attr("qor-icon-name");i.length&&(i.hasClass("in")?(o.push(n),e.removeClass("is-expanded"),i.one("transitionend",function(){i.removeClass("collapsing in")}).addClass("collapsing").height(0)):(o=_.without(o,n),e.addClass("is-expanded"),i.one("transitionend",function(){i.removeClass("collapsing")}).addClass("collapsing in").height(i.prop("scrollHeight"))),localStorage.setItem(r,o))}).find("> ul > li > a").each(function(){var t=$(this),e=t.parent(),i=t.next("ul"),n=e.attr("qor-icon-name");i.length&&(i.addClass("collapse"),e.addClass("has-menu"),-1!=o.indexOf(n)?i.height(0):(e.addClass("is-expanded"),i.addClass("in").height(i.prop("scrollHeight"))))});var e=$(".qor-page > .qor-page__header");$(".qor-page > .qor-page__body"),e.find(".qor-page-subnav__header").length;e.length&&(e.height(),$(".qor-page").addClass("has-header"),$("header.mdl-layout__header").addClass("has-action"))}),$(function(){$(".qor-mobile--show-actions").on("click",function(){$(".qor-page__header").toggleClass("actions-show")})}),$(function(){function h(){return p.hasClass("qor-bottomsheets-open")}var u,f,p=$("body"),m="is-selected";function g(t){$("[data-url]").removeClass(m),t&&t.length&&t.addClass(m)}p.qorBottomSheets(),p.qorSlideout(),u=p.data("qor.slideout"),f=p.data("qor.bottomsheets"),$(document).on("click.qor.openUrl","[data-url]",function(t){var e,i=$(this),n=$(t.target),o=i.hasClass("qor-button--new"),r=i.hasClass("qor-button--edit"),a=(i.is(".qor-table tr[data-url]")||i.closest(".qor-js-table").length)&&!i.closest(".qor-slideout").length,s=i.data(),l=s.openType,d=i.parents(".qor-theme-slideout").length,c=(i.hasClass("qor-action-button")||i.hasClass("qor-action--button"))&&!l;if(("bottomsheet"===l||!n.is(".mdl-data-table__select,.qor-table__actions")&&!n.parents(".mdl-data-table__select,.qor-table__actions,.qor-actions-bulk").length)&&!(n.closest(".qor-button--actions").length||!n.data("url")&&n.is("a")||a&&h()))return c&&(e=function(){var t=$(".qor-js-table tbody").find(".mdl-checkbox__input:checked"),e=[];return!!t.length&&(t.each(function(){e.push($(this).closest("tr").data("primary-key"))}),e)}())&&(s=$.extend({},s,{actionData:e})),s.$target=n,s.method&&"GET"!=s.method.toUpperCase()?void 0:(c||"bottomsheet"==l?c&&!e&&i.closest('[data-toggle="qor.action.bulk"]').length?window.QOR.qorConfirm(s.errorNoItem):f.open(s):a||o&&!h()||r||"slideout"==l?d||"slideout"==l?i.hasClass(m)?(u.hide(),g()):(u.open(s),g(i)):window.location=s.url:p.hasClass("qor-slideout-open")||o&&h()?f.open(s):d?u.open(s):f.open(s),!1)})}),$(function(){var o=window.location;$(".qor-search").each(function(){var t=$(this),e=t.find(".qor-search__input"),i=t.find(".qor-search__clear"),n=!!e.val();t.closest(".qor-page__header").addClass("has-search"),$("header.mdl-layout__header").addClass("has-search"),i.on("click",function(){e.val()||n?"?"==o.search.replace(new RegExp(e.attr("name")+"\\=?\\w*"),"")?o.href=o.href.split("?")[0]:o.search=o.search.replace(new RegExp(e.attr("name")+"\\=?\\w*"),""):t.removeClass("is-dirty")})})});