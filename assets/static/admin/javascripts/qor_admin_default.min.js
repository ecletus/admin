"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};$.fn.qorSliderAfterShow=$.fn.qorSliderAfterShow||{},window.QOR={},window.Mustache&&(window.Mustache.tags=["[[","]]"]),$(document).ajaxComplete(function(t,e,i){"POST"!==i.type&&"PUT"!==i.type||$.fn.qorSlideoutBeforeHide&&($.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)}),$(function(){var t=$(".qor-page__header");"fixed"===t.css("position")&&$(".qor-page__body").css({marginTop:t.height(),paddingTop:0})}),$.fn.select2=$.fn.select2||function(){},$.fn.select2.ajaxCommonOptions=function(t){var n=t.remoteDataPrimaryKey,o=t.remoteDataDisplayKey;return{dataType:"json",cache:!("false"===t.remoteDataCache),delay:250,data:function(t){return{keyword:t.term,page:t.page,per_page:20}},processResults:function(t,e){e.page=e.page||1;var i=$.map(t,function(t){return t.id=t[n]||t.primaryKey||t.Id||t.ID,o&&(t.text=t[o]),t});return{results:i,pagination:{more:20<=i.length}}}}},$.fn.select2.ajaxFormatResult=function(t,e){var i="";return i=0<e.length?window.Mustache.render(e.html().replace(/{{(.*?)}}/g,"[[$1]]"),t):t.text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],/<(.*)(\/>|<\/.+>)/.test(i)?$(i):i},$(function(){var s=window._,o=window.QOR,a=$('<div id="dialog" style="display: none;">\n                  <div class="mdl-dialog-bg"></div>\n                  <div class="mdl-dialog">\n                      <div class="mdl-dialog__content">\n                        <p><i class="material-icons">warning</i></p>\n                        <p class="mdl-dialog__message dialog-message">\n                        </p>\n                      </div>\n                      <div class="mdl-dialog__actions">\n                        <button type="button" class="mdl-button mdl-button--raised mdl-button--colored dialog-ok dialog-button" data-type="confirm">\n                          ok\n                        </button>\n                        <button type="button" class="mdl-button dialog-cancel dialog-button" data-type="">\n                          cancel\n                        </button>\n                      </div>\n                    </div>\n                </div>').appendTo("body");$(document).on("keyup.qor.confirm",function(t){27===t.which&&a.is(":visible")&&setTimeout(function(){a.hide()},100)}).on("click.qor.confirm",".dialog-button",function(){var t=$(this).data("type"),e=o.qorConfirmCallback;return $.isFunction(e)&&e(t),a.hide(),o.qorConfirmCallback=void 0,!1}),o.qorConfirm=function(t,e){var i=a.find(".dialog-ok"),n=a.find(".dialog-cancel");return s.isString(t)?(a.find(".dialog-message").text(t),i.text("ok"),n.text("cancel")):s.isObject(t)&&(t.confirmOk&&t.confirmCancel?(i.text(t.confirmOk),n.text(t.confirmCancel)):(i.text("ok"),n.text("cancel")),a.find(".dialog-message").text(t.confirm)),a.show(),o.qorConfirmCallback=e,!1};o.qorAjaxHandleFile=function(t,n,o,e){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.open("POST",t,!0),i.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:n}),e=window.URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=e,i.download=o||"download-"+$.now(),i.click()}else window.alert("server error, please try again!")},s.isObject(e)&&("[object FormData]"!=Object.prototype.toString.call(e)&&(e=function t(e,i){var n=i||new FormData,o=void 0;for(var s in e)e.hasOwnProperty(s)&&e[s]&&(o=s),e[s]instanceof Date?n.append(o,e[s].toISOString()):"object"!==_typeof(e[s])||e[s]instanceof File?n.append(o,e[s]):t(e[s],n);return n}(e)),i.send(e))};var t=function(){var t=$(".qor-linkify-object"),e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi;t.length&&t.each(function(){var t=$(this).data("video-link");t.match(e)&&$(this).html('<iframe width="100%" height="100%" src="//www.youtube.com/embed/'+t.replace(e,"$1")+'" frameborder="0" allowfullscreen></iframe>')})};($.fn.qorSliderAfterShow.converVideoLinks=t)()}),function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(S){var t=S(window),o=window.document,p=S(o),s=window.Number,r="datepicker",i="click."+r,n="keyup."+r,a="focus."+r,e="resize."+r,l="show."+r,d="hide."+r,c="pick."+r,h=/(y|m|d)+/g,u=/\d+/g,f=/^\d{2,4}$/,m=r+"-top-left",g=r+"-bottom-left",b=[m,r+"-top-right",g,r+"-bottom-right"].join(" "),v=r+"-hide",y=Math.min,q=Object.prototype.toString;function _(t){return"string"==typeof t}function w(t){return"number"==typeof t&&!isNaN(t)}function $(t){return void 0===t}function k(t){return"date"===(e=t,q.call(e).slice(8,-1).toLowerCase());var e}function x(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):(w(e)&&i.push(e),i.slice.apply(t,i))}function C(t,e){var i=x(arguments,2);return function(){return t.apply(e,i.concat(x(arguments)))}}function E(t,e){return[31,(i=t,i%4==0&&i%100!=0||i%400==0?29:28),31,30,31,30,31,31,30,31,30,31][e];var i}function D(t,e){(e=S.isPlainObject(e)?e:{}).language&&(e=S.extend({},D.LANGUAGES[e.language],e)),this.$element=S(t),this.options=S.extend({},D.DEFAULTS,e),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}D.prototype={constructor:D,init:function(){var t=this.options,e=this.$element,i=t.startDate,n=t.endDate,o=t.date;this.$trigger=S(t.trigger||e),this.isInput=e.is("input")||e.is("textarea"),this.isInline=t.inline&&(t.container||!this.isInput),this.format=function(t){var e,i,n=String(t).toLowerCase(),o=n.match(h);if(!o||0===o.length)throw new Error("Invalid date format.");for(t={source:n,parts:o},e=o.length,i=0;i<e;i++)switch(o[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}(t.format),this.initialValue=this.getValue(),o=this.parseDate(o||this.initialValue),i&&(i=this.parseDate(i),o.getTime()<i.getTime()&&(o=new Date(i)),this.startDate=i),n&&(n=this.parseDate(n),i&&n.getTime()<i.getTime()&&(n=new Date(i)),o.getTime()>n.getTime()&&(o=new Date(n)),this.endDate=n),this.date=o,this.viewDate=new Date(o),this.initialDate=new Date(this.date),this.bind(),(t.autoshow||this.isInline)&&this.show(),t.autopick&&this.pick()},build:function(){var t,e=this.options,i=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=t=S(e.template),this.$week=t.find('[data-view="week"]'),this.$yearsPicker=t.find('[data-view="years picker"]'),this.$yearsPrev=t.find('[data-view="years prev"]'),this.$yearsNext=t.find('[data-view="years next"]'),this.$yearsCurrent=t.find('[data-view="years current"]'),this.$years=t.find('[data-view="years"]'),this.$monthsPicker=t.find('[data-view="months picker"]'),this.$yearPrev=t.find('[data-view="year prev"]'),this.$yearNext=t.find('[data-view="year next"]'),this.$yearCurrent=t.find('[data-view="year current"]'),this.$months=t.find('[data-view="months"]'),this.$daysPicker=t.find('[data-view="days picker"]'),this.$monthPrev=t.find('[data-view="month prev"]'),this.$monthNext=t.find('[data-view="month next"]'),this.$monthCurrent=t.find('[data-view="month current"]'),this.$days=t.find('[data-view="days"]'),this.isInline?S(e.container||i).append(t.addClass("datepicker-inline")):(S(o.body).append(t.addClass("datepicker-dropdown")),t.addClass(v)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var t=this.options,e=this.$element;S.isFunction(t.show)&&e.on(l,t.show),S.isFunction(t.hide)&&e.on(d,t.hide),S.isFunction(t.pick)&&e.on(c,t.pick),this.isInput&&(e.on(n,S.proxy(this.keyup,this)),t.trigger||e.on(a,S.proxy(this.show,this))),this.$trigger.on(i,S.proxy(this.show,this))},unbind:function(){var t=this.options,e=this.$element;S.isFunction(t.show)&&e.off(l,t.show),S.isFunction(t.hide)&&e.off(d,t.hide),S.isFunction(t.pick)&&e.off(c,t.pick),this.isInput&&(e.off(n,this.keyup),t.trigger||e.off(a,this.show)),this.$trigger.off(i,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,n=this.$daysPicker,o=this.format;if(o.hasYear||o.hasMonth||o.hasDay)switch(s(t)){case 2:case"years":i.addClass(v),n.addClass(v),o.hasYear?(this.fillYears(),e.removeClass(v)):this.showView(0);break;case 1:case"months":e.addClass(v),n.addClass(v),o.hasMonth?(this.fillMonths(),i.removeClass(v)):this.showView(2);break;default:e.addClass(v),i.addClass(v),o.hasDay?(this.fillDays(),n.removeClass(v)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,n=p.outerWidth(),o=p.outerHeight(),s=e.outerWidth(),a=e.outerHeight(),r=i.width(),l=i.height(),d=e.offset(),c=d.left,h=d.top,u=parseFloat(t.offset)||10,f=m;l<h&&o<h+a+l?(h-=l+u,f=g):h+=a+u,n<c+r&&(c=c+s-r,f=f.replace("left","right")),i.removeClass(b).addClass(f).css({top:h,left:c,zIndex:parseInt(t.zIndex,10)})},trigger:function(t,e){var i=S.Event(t,e);return this.$element.trigger(i),i},createItem:function(t){var e=this.options,i=e.itemTag,n={text:"",view:"",muted:!1,picked:!1,disabled:!1};return S.extend(n,t),"<"+i+" "+(n.disabled?'class="'+e.disabledClass+'"':n.picked?'class="'+e.pickedClass+'"':n.muted?'class="'+e.mutedClass+'"':"")+(n.view?' data-view="'+n.view+'"':"")+">"+n.text+"</"+i+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){var t,e=this.options,i=parseInt(e.weekStart,10)%7,n=e.daysMin,o="";for(n=S.merge(n.slice(i),n.slice(0,i)),t=0;t<=6;t++)o+=this.createItem({text:n[t]});this.$week.html(o)},fillYears:function(){var t,e=this.options,i=e.disabledClass||"",n=e.yearSuffix||"",o=S.isFunction(e.filter)&&e.filter,s=this.startDate,a=this.endDate,r=this.viewDate,l=r.getFullYear(),d=r.getMonth(),c=r.getDate(),h=this.date,u=h.getFullYear(),f=!1,p=!1,m=!1,g=!1,b=!1,v="";for(t=-5;t<=6;t++)h=new Date(l+t,d,c),b=-5===t||6===t,g=l+t===u,m=!1,s&&(m=h.getFullYear()<s.getFullYear(),-5===t&&(f=m)),!m&&a&&(m=h.getFullYear()>a.getFullYear(),6===t&&(p=m)),!m&&o&&(m=!1===o.call(this.$element,h)),v+=this.createItem({text:l+t,view:m?"year disabled":g?"year picked":"year",muted:b,picked:g,disabled:m});this.$yearsPrev.toggleClass(i,f),this.$yearsNext.toggleClass(i,p),this.$yearsCurrent.toggleClass(i,!0).html(l+-5+n+" - "+(l+6)+n),this.$years.html(v)},fillMonths:function(){var t,e=this.options,i=e.disabledClass||"",n=e.monthsShort,o=S.isFunction(e.filter)&&e.filter,s=this.startDate,a=this.endDate,r=this.viewDate,l=r.getFullYear(),d=r.getDate(),c=this.date,h=c.getFullYear(),u=c.getMonth(),f=!1,p=!1,m=!1,g=!1,b="";for(t=0;t<=11;t++)c=new Date(l,t,d),g=l===h&&t===u,m=!1,s&&(m=(f=c.getFullYear()===s.getFullYear())&&c.getMonth()<s.getMonth()),!m&&a&&(m=(p=c.getFullYear()===a.getFullYear())&&c.getMonth()>a.getMonth()),!m&&o&&(m=!1===o.call(this.$element,c)),b+=this.createItem({index:t,text:n[t],view:m?"month disabled":g?"month picked":"month",picked:g,disabled:m});this.$yearPrev.toggleClass(i,f),this.$yearNext.toggleClass(i,p),this.$yearCurrent.toggleClass(i,f&&p).html(l+e.yearSuffix||""),this.$months.html(b)},fillDays:function(){var t,e,i,n=this.options,o=n.disabledClass||"",s=n.yearSuffix||"",a=n.monthsShort,r=parseInt(n.weekStart,10)%7,l=S.isFunction(n.filter)&&n.filter,d=this.startDate,c=this.endDate,h=this.viewDate,u=h.getFullYear(),f=h.getMonth(),p=u,m=f,g=u,b=f,v=this.date,y=v.getFullYear(),q=v.getMonth(),_=v.getDate(),w=!1,$=!1,k=!1,x=!1,C=[],D=[],T=[];for(0===f?(p-=1,m=11):m-=1,t=E(p,m),(i=(v=new Date(u,f,1)).getDay()-r)<=0&&(i+=7),d&&(w=v.getTime()<=d.getTime()),e=t-(i-1);e<=t;e++)v=new Date(p,m,e),k=!1,d&&(k=v.getTime()<d.getTime()),!k&&l&&(k=!1===l.call(this.$element,v)),C.push(this.createItem({text:e,view:"day prev",muted:!0,disabled:k}));for(11===f?(g+=1,b=0):b+=1,t=E(u,f),i=42-(C.length+t),v=new Date(u,f,t),c&&($=v.getTime()>=c.getTime()),e=1;e<=i;e++)v=new Date(g,b,e),k=!1,c&&(k=v.getTime()>c.getTime()),!k&&l&&(k=!1===l.call(this.$element,v)),D.push(this.createItem({text:e,view:"day next",muted:!0,disabled:k}));for(e=1;e<=t;e++)v=new Date(u,f,e),x=u===y&&f===q&&e===_,k=!1,d&&(k=v.getTime()<d.getTime()),!k&&c&&(k=v.getTime()>c.getTime()),!k&&l&&(k=!1===l.call(this.$element,v)),T.push(this.createItem({text:e,view:k?"day disabled":x?"day picked":"day",picked:x,disabled:k}));this.$monthPrev.toggleClass(o,w),this.$monthNext.toggleClass(o,$),this.$monthCurrent.toggleClass(o,w&&$).html(n.yearFirst?u+s+" "+a[f]:a[f]+" "+u+s),this.$days.html(C.join("")+T.join(" ")+D.join(""))},click:function(t){var e,i,n,o,s,a,r=S(t.target),l=this.viewDate;if(t.stopPropagation(),t.preventDefault(),!r.hasClass("disabled"))switch(e=l.getFullYear(),i=l.getMonth(),n=l.getDate(),a=r.data("view")){case"years prev":case"years next":e="years prev"===a?e-10:e+10,s=r.text(),(o=f.test(s))&&(e=parseInt(s,10),this.date=new Date(e,i,y(n,28))),this.viewDate=new Date(e,i,y(n,28)),this.fillYears(),o&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":e="year prev"===a?e-1:e+1,this.viewDate=new Date(e,i,y(n,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":e=parseInt(r.text(),10),this.date=new Date(e,i,y(n,28)),this.viewDate=new Date(e,i,y(n,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":i="month prev"===a?i-1:"month next"===a?i+1:i,this.viewDate=new Date(e,i,y(n,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":i=S.inArray(r.text(),this.options.monthsShort),this.date=new Date(e,i,y(n,28)),this.viewDate=new Date(e,i,y(n,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":i="day prev"===a?i-1:"day next"===a?i+1:i,n=parseInt(r.text(),10),this.date=new Date(e,i,n),this.viewDate=new Date(e,i,n),this.fillDays(),"day"===a&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,n=this.$trigger[0];i!==o;){if(i===n){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline?this.options.container&&(e=t.text()):e=t.text(),e},setValue:function(t){var e=this.$element;t=_(t)?t:"",this.isInput?e.val(t):this.isInline?this.options.container&&e.text(t):e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger(l).isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(v).on(i,S.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(t.on(e,this._place=C(this.place,this)),p.on(i,this._clickDoc=C(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger(d).isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(v).off(i,this.click),this.isInline||(t.off(e,this._place),p.off(i,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger(c,{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(i=this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(t,e){var i=this.options,n=i.months;return S.isNumeric(t)?t=s(t):$(e)&&(e=t),!0===e&&(n=i.monthsShort),n[w(t)?t:this.date.getMonth()]},getDayName:function(t,e,i){var n=this.options,o=n.days;return S.isNumeric(t)?t=s(t):($(i)&&(i=e),$(e)&&(e=t)),(o=!0===i?n.daysMin:!0===e?n.daysShort:o)[w(t)?t:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(t,e){var i=this.options.filter;if(k(t)||_(t)){if(t=this.parseDate(t),S.isFunction(i)&&!1===i.call(this.$element,t))return;this.date=t,this.viewDate=new Date(t),e||this.pick(),this.isBuilt&&this.fillAll()}},setStartDate:function(t){(k(t)||_(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){(k(t)||_(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){var e,i,n,o,s,a,r=this.format,l=[];if(k(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate());if(_(t)&&(l=t.match(u)||[]),i=(t=new Date).getFullYear(),n=t.getDate(),o=t.getMonth(),e=r.parts.length,l.length===e)for(a=0;a<e;a++)switch(s=parseInt(l[a],10)||1,r.parts[a]){case"dd":case"d":n=s;break;case"mm":case"m":o=s-1;break;case"yy":i=2e3+s;break;case"yyyy":i=s}return new Date(i,o,n)},formatDate:function(t){var e,i,n,o,s,a=this.format,r="";if(k(t))for(r=a.source,i=t.getFullYear(),(o={d:t.getDate(),m:t.getMonth()+1,yy:i.toString().substring(2),yyyy:i}).dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=a.parts.length,s=0;s<e;s++)n=a.parts[s],r=r.replace(n,o[n]);return r},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(r)}},D.LANGUAGES={},D.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,language:"",format:"yyyy-mm-dd",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},D.setDefaults=function(t){S.extend(D.DEFAULTS,S.isPlainObject(t)&&t)},D.other=S.fn.qorDatepicker,S.fn.qorDatepicker=function(o){var s,a=x(arguments,1);return this.each(function(){var t,e,i=S(this),n=i.data(r);if(!n){if(/destroy/.test(o))return;t=S.extend({},i.data(),S.isPlainObject(o)&&o),i.data(r,n=new D(this,t))}_(o)&&S.isFunction(e=n[o])&&(s=e.apply(n,a))}),$(s)?this:s},S.fn.qorDatepicker.Constructor=D,S.fn.qorDatepicker.languages=D.LANGUAGES,S.fn.qorDatepicker.setDefaults=D.setDefaults,S.fn.qorDatepicker.noConflict=function(){return S.fn.qorDatepicker=D.other,this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(v){var i=window.Mustache,o="qor.action",t="enable."+o,n="click."+o,s=".qor-action-forms",f=".qor-page__header",p=".qor-actions",e="a.qor-action--button",m=".qor-action-bulk-buttons",g=".qor-table-container",b=".qor-search-container",y="is_undo",q=".qor-slideout",a="primary_values[]";function r(t,e){this.$element=v(t),this.$wrap=v(s),this.options=v.extend({},r.DEFAULTS,v.isPlainObject(e)&&e),this.ajaxForm={},this.init()}return r.prototype={constructor:r,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(n,v.proxy(this.click,this)),v(document).on(n,".qor-table--bulking tr",this.click).on(n,e,this.actionLink)},unbind:function(){this.$element.off(n,this.click),v(document).off(n,".qor-table--bulking tr",this.click).off(n,e,this.actionLink)},initActions:function(){this.tables=v(g).find("table").length,this.tables||(v(m).find("button").attr("disabled",!0),v(e).attr("disabled",!0))},collectFormData:function(){var t=v(".qor-table--bulking").find(".mdl-checkbox__input:checked"),e=[],i=[],n=void 0;return t.length&&t.each(function(){var t=v(this).closest("tr").data("primary-key");n={},t&&(e.push({name:a,value:t.toString()}),n[a]=t.toString(),i.push(n))}),this.ajaxForm.formData=e,this.ajaxForm.normalFormData=i,this.ajaxForm},actionLink:function(){if(!v(g).find("table").length)return!1},actionSubmit:function(t){var e=v(t);if((this.$actionButton=e).data().method)return this.submit(),!1},click:function(t){var e=v(t.target),i=v(".qor-page > .qor-page__header"),n=v(".qor-page > .qor-page__body"),o=i.find(".qor-page-subnav__header").length?96:48;if((this.$actionButton=e).data().ajaxForm)return this.collectFormData(),this.ajaxForm.properties=e.data(),this.submit(),!1;if(e.is(".qor-action--bulk")&&(this.$wrap.removeClass("hidden"),v(m).find("button").toggleClass("hidden"),v(".qor-table__inner-list").remove(),this.appendTableCheckbox(),v(g).addClass("qor-table--bulking"),v(f).find(p).addClass("hidden"),v(f).find(b).addClass("hidden"),i.height()>o&&n.css("padding-top",i.height())),e.is(".qor-action--exit-bulk")&&(this.$wrap.addClass("hidden"),v(m).find("button").toggleClass("hidden"),this.removeTableCheckbox(),v(g).removeClass("qor-table--bulking"),v(f).find(p).removeClass("hidden"),v(f).find(b).removeClass("hidden"),parseInt(n.css("padding-top"))>o&&n.css("padding-top","")),v(this).is("tr")&&!e.is("a")){var s=v(this).find("td").first();if(s.find(".mdl-checkbox__input").get(0)){var a,r=v("body").hasClass("qor-bottomsheets-open")||v("body").hasClass("qor-slideout-open"),l=s.find(".mdl-js-checkbox"),d=v('[data-toggle="qor-action-slideout"]').find("form"),c=d.find(".js-primary-value"),h=v(this).data("primary-key"),u=c.filter('[value="'+h+'"]');return l.toggleClass("is-checked"),s.parents("tr").toggleClass("is-selected"),a=l.hasClass("is-checked"),s.find("input").prop("checked",a),d.length&&r&&(a&&!u.length&&d.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+h+'" />'),!a&&u.length&&u.remove()),!1}}},renderFlashMessage:function(t){var e=r.FLASHMESSAGETMPL;return i.parse(e),i.render(e,t)},submit:function(){var l=this,d=this.$element,c=this.$actionButton,h=this.ajaxForm||{},u=h.properties||c.data(),f=u.url,p=u.undoUrl,m=c.hasClass(y),g=c.closest(q).length,b=d&&!g;!u.fromIndex||h.formData&&h.formData.length?u.confirm&&u.ajaxForm&&!u.fromIndex?window.QOR.qorConfirm(u,function(t){t&&v.post(u.url,{_method:u.method},function(){window.location.reload()})}):(m&&(f=u.undoUrl),v.ajax(f,{method:u.method,data:h.formData,dataType:u.datatype,beforeSend:function(){p?c.prop("disabled",!0):b&&l.switchButtons(d,1)},success:function(t,e,i){var n=i.getResponseHeader("content-type"),o=i.getResponseHeader("Content-Disposition");if(o&&-1!==o.indexOf("attachment")){var s=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(o),a={},r="";return null!=s&&s[1]&&(r=s[1].replace(/['"]/g,"")),u.method&&(a=v.extend({},h.normalFormData,{_method:u.method})),window.QOR.qorAjaxHandleFile(f,n,r,a),void(p?c.prop("disabled",!1):l.switchButtons(d))}if(p)return d.triggerHandler("undo.qor.action",[c,m,t]),m?c.removeClass(y):c.addClass(y),void c.prop("disabled",!1);-1<n.indexOf("json")?(v(".qor-alert").remove(),b&&l.switchButtons(d),v(g?q:".mdl-layout__content").find(".qor-page__body").prepend(l.renderFlashMessage(t))):window.location.reload()},error:function(t,e,i){p?c.prop("disabled",!1):b&&l.switchButtons(d),window.alert([e,i].join(": "))}})):window.alert(h.properties.errorNoItem)},switchButtons:function(t,e){var i=!!e;t.find(".qor-action-button").prop("disabled",i)},destroy:function(){this.unbind(),this.$element.removeData(o)},removeTableCheckbox:function(){v(".qor-page__body .mdl-data-table__select").each(function(t,e){v(e).parents("td").remove()}),v(".qor-page__body .mdl-data-table__select").each(function(t,e){v(e).parents("th").remove()}),v(".qor-table-container tr.is-selected").removeClass("is-selected"),v(".qor-page__body table.mdl-data-table--selectable").removeClass("mdl-data-table--selectable"),v(".qor-page__body tr.is-selected").removeClass("is-selected")},appendTableCheckbox:function(){v(".qor-page__body .mdl-data-table__select").each(function(t,e){v(e).parents("td").remove()}),v(".qor-page__body .mdl-data-table__select").each(function(t,e){v(e).parents("th").remove()}),v(".qor-table-container tr.is-selected").removeClass("is-selected"),v(".qor-page__body table").addClass("mdl-data-table--selectable"),new window.MaterialDataTable(v(".qor-page__body table").get(0)),v('thead.is-hidden tr th:not(".mdl-data-table__cell--non-numeric")').clone().prependTo(v('thead:not(".is-hidden") tr'));var t=v('thead:not(".is-fixed") .mdl-checkbox__input'),i=v(".qor-table--medialibrary").length,n=v("body").hasClass("qor-bottomsheets-open")||v("body").hasClass("qor-slideout-open");i&&(t=v("thead .mdl-checkbox__input")),t.on("click",function(){i||(v("thead.is-fixed tr th").eq(0).find("label").click(),v(this).closest("label").toggleClass("is-checked"));var e=v('[data-toggle="qor-action-slideout"]').find("form"),t=e.find(".js-primary-value");e.length&&n&&(v(this).is(":checked")?v(".qor-table--bulking tbody tr").each(function(){var t=v(this).data("primary-key");t&&e.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+t+'" />')}):t.remove())})}},r.FLASHMESSAGETMPL='<div class="qor-alert qor-action-alert qor-alert--success [[#error]]qor-alert--error[[/error]]" [[#message]]data-dismissible="true"[[/message]] role="alert">\n          <button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert">\n            <i class="material-icons">close</i>\n          </button>\n          <span class="qor-alert-message">\n            [[#message]]\n              [[message]]\n            [[/message]]\n            [[#error]]\n              [[error]]\n            [[/error]]\n          </span>\n        </div>',r.DEFAULTS={},v.fn.qorSliderAfterShow.qorActionInit=function(t,e){var i=v(e).find('[data-toggle="qor-action-slideout"]').length,n=v('[data-toggle="qor-action-slideout"]').find("form"),o=v(".qor-page__body .mdl-checkbox__input:checked");i&&o.length&&o.each(function(t,e){var i=v(e).parents("tbody tr").data("primary-key");i&&n.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+i+'" />')})},r.plugin=function(n){return this.each(function(){var t=v(this),e=t.data(o),i=void 0;e||t.data(o,e=new r(this,n)),"string"==typeof n&&v.isFunction(i=e[n])&&i.call(e)})},v(function(){var e={},i='[data-toggle="qor.action.bulk"]';v(document).on("disable.qor.action",function(t){r.plugin.call(v(i,t.target),"destroy")}).on(t,function(t){r.plugin.call(v(i,t.target),e)}).on(n,".qor-table__actions a[data-url],[data-url][data-method=POST],[data-url][data-method=PUT],[data-url][data-method=DELETE]",function(){return(new r).actionSubmit(this),!1}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var s="qor.autoheight",t="enable."+s;function a(t,e){this.$element=o(t),this.options=o.extend({},a.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on("input",o.proxy(this.resize,this))},unbind:function(){this.$element.off("input",this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(s)}},a.DEFAULTS={},a.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;e.data(s,i=new a(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e="textarea.qor-js-autoheight";o(document).on("disable.qor.autoheight",function(t){a.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(o(e,t.target))}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(y){var h=window._,n=window.FormData,o="qor.bottomsheets",t="click."+o,e="submit."+o,s="qor-bottomsheets-open",q=".mdl-layout__content.qor-page",r=".qor-page__body",_=".qor-page__header",i=".qor-bottomsheets__search-button",a=".qor-bottomsheets__search-input";function u(t,e){var i=[],n="href";return e&&(n="src"),t.each(function(){i.push(y(this).attr(n))}),h.uniq(i)}function f(t,e){var i=y.fn.qorSliderAfterShow;for(var n in i)i.hasOwnProperty(n)&&!i[n].isLoaded&&(i[n].isLoaded=!0,i[n].call(this,t,e))}function w(t,e){this.$element=y(t),this.options=y.extend({},w.DEFAULTS,y.isPlainObject(e)&&e),this.disabled=!1,this.resourseData={},this.init()}return w.prototype={constructor:w,init:function(){this.build(),this.bind()},build:function(){var t=void 0;this.$bottomsheets=t=y(w.TEMPLATE).appendTo("body"),this.$body=t.find(".qor-bottomsheets__body"),this.$title=t.find(".qor-bottomsheets__title"),this.$header=t.find(".qor-bottomsheets__header"),this.$bodyClass=y("body").prop("class"),this.filterURL="",this.searchParams=""},bind:function(){this.$bottomsheets.on(e,"form",this.submit.bind(this)).on(t,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(t,".qor-pagination a",this.pagination.bind(this)).on(t,i,this.search.bind(this)).on("keyup.qor.bottomsheets",this.keyup.bind(this)).on("selectorChanged.qor.selector",this.selectorChanged.bind(this)).on("filterChanged.qor.filter",this.filterChanged.bind(this))},unbind:function(){this.$bottomsheets.off(e,"form",this.submit.bind(this)).off(t,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).off(t,".qor-pagination a",this.pagination.bind(this)).off(t,i,this.search.bind(this)).off("selectorChanged.qor.selector",this.selectorChanged.bind(this)).off("filterChanged.qor.filter",this.filterChanged.bind(this))},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="qor-action-slideout"]').find("form"),i=t.length-1;0<=i;i--)e.prepend('<input type="hidden" name="primary_values[]" value="'+t[i]+'" />')},filterChanged:function(t,e,i){var n;return(n=this.constructloadURL(e,i))&&this.reload(n),!1},selectorChanged:function(t,e,i){var n;return(n=this.constructloadURL(e,i))&&this.reload(n),!1},keyup:function(t){var e=this.$bottomsheets.find(a);13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){var t=this.$bottomsheets,e=t.data().url+"?keyword="+y.trim(t.find(a).val());this.reload(e)},pagination:function(t){var e=y(t.target).prop("href");return e&&this.reload(e),!1},reload:function(t){var e=this.$bottomsheets.find(r);this.addLoading(e),this.fetchPage(t)},fetchPage:function(o){var s=this.$bottomsheets,a=this;y.get(o,function(t){var e=y(t).find(q),i=e.find(_),n=e.find(r);n.length?(s.find(r).html(n.html()),i.length&&(a.$body.find(_).html(i.html()).trigger("enable"),a.addHeaderClass()),s.trigger("reload.qor.bottomsheets")):a.reload(o)}).fail(function(){window.alert("server error, please try again later!")})},constructloadURL:function(t,e){var i,n,o,s,a,r,l,d=this.filterURL,c=this.$bottomsheets.data().url;if(!d){if(!c)return;d=c}return i=function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}(e,new URL("http://www.getqor.com/"+t).search),d=this.filterURL=(n=e,o=i,s=d,a=String(n).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),r=new RegExp("([?&])"+a+"=.*?(&|$)","i"),l=-1!==s.indexOf("?")?"&":"?",s.match(r)?o?s.replace(r,"$1"+n+"="+o+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?s.replace(r,"$1"):s.replace(r,""):o?s+l+n+"="+o:void 0)},addHeaderClass:function(){this.$body.find(_).hide(),this.$bottomsheets.find(_).children(".qor-bottomsheet__filter").length&&this.$body.addClass("has-header").find(_).show()},addLoading:function(t){t.html("");var e=y(w.TEMPLATE_LOADING).appendTo(t);window.componentHandler.upgradeElement(e.children()[0])},loadExtraResource:function(t){var e,i,n,o,s,a,r,l,d=(s=t.$links,a=y("link"),r=u(s),l=u(a),h.difference(r,l)),c=(e=t.$scripts,i=y("script"),n=u(e,!0),o=u(i,!0),h.difference(n,o));d.length&&function t(e){var i=document.createElement("link"),n=e.shift();i.type="text/css",i.rel="stylesheet",i.onload=function(){e.length&&t(e)},i.href=n,document.getElementsByTagName("head")[0].appendChild(i)}(d),c.length&&function(t,e,i){for(var n=0,o=0,s=t.length;o<s;o++){var a=document.createElement("script");a.onload=function(){++n===t.length&&y.isFunction(i)&&i(),e&&e.url&&e.response&&f(e.url,e.response)},a.src=t[o],document.body.appendChild(a)}}(c,t)},loadMedialibraryJS:function(t){var e,i=t.filter("script"),n=/theme=media_library/g,o=this;i.each(function(){if(e=y(this).prop("src"),n.test(e)){var t=document.createElement("script");t.src=e,document.body.appendChild(t),o.scriptAdded=!0}})},submit:function(t){var o=this.$body,e=t.target,d=y(e),c=this,h=d.prop("action"),u=new n(e),f=d.closest(".qor-bottomsheets"),p=f.data(),i=p.ajaxType,m=d.find(":submit");p.ingoreSubmit||(d.data().normalSubmit||(y(document).trigger("bottomsheetBeforeSend.qor.bottomsheets"),t.preventDefault(),y.ajax(h,{method:d.prop("method"),data:u,dataType:i||"html",processData:!1,contentType:!1,beforeSend:function(){m.prop("disabled",!0)},success:function(t,e,i){if(p.ajaxMute)f.remove();else if(p.ajaxTakeover)p.$target.parent().trigger("ajaxSuccessed.qor.bottomsheets",[t,f]);else{var n=i.getResponseHeader("Content-Disposition");if(n&&-1!==n.indexOf("attachment")){var o=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(n),s=i.getResponseHeader("Content-Type"),a="";return null!=o&&o[1]&&(a=o[1].replace(/['"]/g,"")),window.QOR.qorAjaxHandleFile(h,s,a,u),void m.prop("disabled",!1)}y(".qor-error").remove();var r=d.data("returnUrl"),l=d.data("refreshUrl");l?window.location.href=l:"refresh"!=r?(r&&"refresh"!=r?c.load(r):c.refresh(),y(document).trigger("bottomsheetSubmitComplete.qor.bottomsheets")):c.refresh()}},error:function(t,e,i){var n;422===t.status?(o.find(".qor-error").remove(),n=y(t.responseText).find(".qor-error"),d.before(n),y(".qor-bottomsheets .qor-page__body").scrollTop(0)):window.alert([e,i].join(": "))},complete:function(){m.prop("disabled",!1)}})))},load:function(r,l,d){var c,t,e,h=this.options,u=l.actionData,f=this.resourseData,p=f.selectModal,m=f.ingoreSubmit,g=this.$bottomsheets,b=this.$header,v=this.$body;r&&(this.show(),this.addLoading(v),this.filterURL=r,v.removeClass("has-header has-hint"),l=y.isPlainObject(l)?l:{},c=l.method?l.method:"GET",t=l.datatype?l.datatype:"html",e=y.proxy(function(){y.ajax(r,{method:c,dataType:t,success:y.proxy(function(t){if("GET"===c){var e=y(t),i=void 0,n=void 0,o={$scripts:e.filter("script"),$links:e.filter("link"),url:r,response:t},s=p&&e.find(".qor-search-container").length,a=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(i=e.find(q),a&&(a=a.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),n=y(a).prop("class"),y("body").addClass(n)),!i.length)return;this.loadExtraResource(o),m&&i.find(_).remove(),i.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),v.html(i.html()),this.$title.html(e.find(h.title).html()),l.selectDefaultCreating&&this.$title.append('<button class="mdl-button mdl-button--primary" type="button" data-load-inline="true" data-select-nohint="'+l.selectNohint+'" data-select-modal="'+l.selectModal+'" data-select-listing-url="'+l.selectListingUrl+'">'+l.selectBacktolistTitle+"</button>"),p&&(v.find(".qor-button--new").data("ingoreSubmit",!0).data("selectId",f.selectId).data("loadInline",!0),"one"==p||l.selectNohint||void 0!==f.maxItem&&"1"==f.maxItem||v.addClass("has-hint"),"mediabox"!=p||this.scriptAdded||this.loadMedialibraryJS(e)),b.find(".qor-button--new").remove(),this.$title.after(v.find(".qor-button--new")),s&&(g.addClass("has-search"),b.find(".qor-bottomsheets__search").remove(),b.prepend(w.TEMPLATE_SEARCH)),u&&u.length&&this.bindActionData(u),f.bottomsheetClassname&&g.addClass(f.bottomsheetClassname),g.trigger("enable"),g.one("hidden.qor.bottomsheets",function(){y(this).trigger("disable")}),this.addHeaderClass(),g.data(l),d&&y.isFunction(d)&&d(this.$bottomsheets),g.trigger("bottomsheetLoaded.qor.bottomsheets",[r,t])}else l.returnUrl?this.load(l.returnUrl):this.refresh()},this),error:y.proxy(function(){var t;this.$bottomsheets.remove(),y(".qor-bottomsheets").is(":visible")||y("body").removeClass(s),t=0<y(".qor-error span").length?y(".qor-error span").map(function(){return y(this).text()}).get().join(", "):"Server error, please try again later!",window.alert(t)},this)})},this),e())},open:function(t,e){t.loadInline||this.init(),this.resourseData=t,this.load(t.url,t,e)},show:function(){this.$bottomsheets.addClass("is-shown").get(0).offsetHeight,this.$bottomsheets.addClass("is-slided"),y("body").addClass(s)},hide:function(t){var e=y(t.target).closest(".qor-bottomsheets"),i=y(".qor-datepicker").not(".hidden");return i.length&&i.addClass("hidden"),e.qorSelectCore("destroy"),e.trigger("bottomsheetClosed.qor.bottomsheets").remove(),y(".qor-bottomsheets").is(":visible")||y("body").removeClass(s),!1},refresh:function(){this.$bottomsheets.remove(),y("body").removeClass(s),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.$element.removeData(o)}},w.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},w.TEMPLATE_ERROR='<ul class="qor-error"><li><label><i class="material-icons">error</i><span>[[error]]</span></label></li></ul>',w.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',w.TEMPLATE_SEARCH='<div class="qor-bottomsheets__search">\n            <input autocomplete="off" type="text" class="mdl-textfield__input qor-bottomsheets__search-input" placeholder="Search" />\n            <button class="mdl-button mdl-js-button mdl-button--icon qor-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button>\n        </div>',w.TEMPLATE='<div class="qor-bottomsheets">\n            <div class="qor-bottomsheets__header">\n            <h3 class="qor-bottomsheets__title"></h3>\n            <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-bottomsheets__close" data-dismiss="bottomsheets">\n            <span class="material-icons">close</span>\n            </button>\n            </div>\n            <div class="qor-bottomsheets__body"></div>\n        </div>',w.plugin=function(n){return this.each(function(){var t,e=y(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new w(this,n))}"string"==typeof n&&y.isFunction(t=i[n])&&t.apply(i)})},y.fn.qorBottomSheets=w.plugin,w}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var s="qor.chooser",t="enable."+s;function a(t,e){this.$element=o(t),this.options=o.extend({},a.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){var t,n=this.$element,e=n.data(),i={minimumResultsForSearch:8,dropdownParent:n.parent()};e.remoteData&&(i.ajax=o.fn.select2.ajaxCommonOptions(e),i.templateResult=function(t){var e=n.parents(".qor-field").find('[name="select2-result-template"]');if(0<e.length&&e.data("raw")){var i=e.data("func");return i||(i=new Function("data",e.html()),e.data("func",i)),i(t)}return o.fn.select2.ajaxFormatResult(t,e)},i.templateSelection=function(t){if(t.loading)return t.text;var e=n.parents(".qor-field").find('[name="select2-selection-template"]');if(0<e.length&&e.data("raw")){var i=e.data("func");return i||(i=new Function("data",e.html()),e.data("func",i)),i(t)}return o.fn.select2.ajaxFormatResult(t,e)}),n.on("select2:select",function(t){o(t.target).attr("chooser-selected","true")}).on("select2:unselect",function(t){o(t.target).attr("chooser-selected","")}),n.select2(i),this.resetSelect2Width(),t=window._.debounce(this.resetSelect2Width.bind(this),300),o(window).resize(t),n.val()&&n.attr("chooser-selected","true")},resetSelect2Width:function(){var t,e=this.$element.data().select2;e&&e.$container&&(t=e.$container).width(t.parent().width())},destroy:function(){this.$element.select2("destroy").removeData(s)}},a.DEFAULTS={},a.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;e.data(s,i=new a(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e='select[data-toggle="qor.chooser"]';o(document).on("disable.qor.chooser",function(t){a.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(o(e,t.target))}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(v){var o=window.URL||window.webkitURL,s="qor.cropper",t="enable."+s,n="change."+s,u="click."+s,e="shown.qor.modal",i="hidden.qor.modal",y=".qor-cropper__toggle",f=".qor-cropper__wrapper",p=".qor-cropper__options",a=".qor-cropper__toggle--crop";function q(t,e){var i,n=String(e),o=n.toLowerCase(),s=n.toUpperCase(),a=("string"==typeof(i=n)&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i);if(v.isPlainObject(t))return t[o]||t[a]||t[s]}function l(t){return/.svg$/.test(t)}function r(t,e){this.$element=v(t),this.options=v.extend(!0,{},r.DEFAULTS,v.isPlainObject(e)&&e),this.data=null,this.init()}return r.prototype={constructor:r,init:function(){var t,e=this.options,i=this.$element,n=i.closest(e.parent),o=void 0,s=void 0,a=this,r=void 0;n.length||(n=i.parent()),this.$parent=n,this.$output=n.find(e.output),this.$list=n.find(e.list),(t=this.$output.data("fetchSizedata"))?v.getJSON(t,function(t){r=JSON.parse(t.MediaOption),a.$output.val(JSON.stringify(t)),a.data=r||{},l(r.URL||r.Url)&&a.resetImage(),a.build(),a.bind()}):((s=v.trim(this.$output.val()))&&l((o=JSON.parse(s)).URL||o.Url)&&this.resetImage(),this.data=o||{},this.build(),this.bind())},resetImage:function(){this.$parent.addClass("is-svg")},build:function(){var i,t,e=this.$output.data(),n={},o=void 0;e&&(n={title:e.cropperTitle,ok:e.cropperOk,cancel:e.cropperCancel},o=this.options.text),n.ok&&n.title&&n.cancel&&(o=n),this.wrap(),this.$modal=v((i=r.MODAL,t=o,"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&v.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t=this.$list,e=void 0;(e=t.find("img").not(".is-svg")).length?(t.find("li").append(r.TOGGLE),e.wrap(r.CANVAS),this.center(e)):t.find(a).remove()},unwrap:function(){var t=this.$list;t.find(y).remove(),t.find(".qor-cropper__canvas").each(function(){var t=v(this);t.before(t.html()).remove()})},bind:function(){this.$element.on(n,v.proxy(this.read,this)),this.$list.on(u,v.proxy(this.click,this)),this.$modal.on(e,v.proxy(this.start,this)).on(i,v.proxy(this.stop,this))},unbind:function(){this.$element.off(n,this.read),this.$list.off(u,this.click),this.$modal.off(e,this.start).off(i,this.stop)},click:function(t){var e=t.target,i=void 0,n=this.data,o=void 0;e!==this.$list[0]&&((i=v(e)).closest(".qor-cropper__toggle--delete").length&&(n.Delete=!0,this.$output.val(JSON.stringify(n)),this.$list.hide(),(o=v(r.ALERT)).find(".qor-fieldset__undo").one(u,function(){o.remove(),this.$list.show(),delete n.Delete,this.$output.val(JSON.stringify(n))}.bind(this)),this.$parent.find(".qor-fieldset").append(o)),i.closest(a).length&&(i=i.closest("li").find("img"),this.$target=i,this.$modal.qorModal("show")))},read:function(t){var e=t.target.files,i=void 0,n=this.$parent.find(".qor-fieldset__alert");n.length&&(n.remove(),this.data=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]="");return t}(this.data)),e&&e.length&&(i=e[0],/^image\//.test(i.type)&&o?(this.fileType=i.type,this.load(o.createObjectURL(i)),this.$parent.find(".qor-medialibrary__image-desc").show()):this.$list.empty().html(r.FILE_LIST.replace("{{filename}}",i.name)))},load:function(t,h){var u,f=this.options,p=this,m=this.$list,e=m.find("ul"),g=this.data||{},b=this.fileType,i=void 0;e.length&&e.find("li").length||(e=v(r.LIST),m.html(e),this.wrap()),e.show(),i=m.find("img"),u=i.length,i.one("load",function(){if("image/svg+xml"===b)return m.find(y).remove(),!1;var t=v(this),e=this.naturalWidth,i=this.naturalHeight,n=t.data(),o=n.sizeResolution,s=n.sizeName,a={},r={},l=void 0,d=n.sizeResolutionWidth,c=n.sizeResolutionHeight;o?(d||c||(d=q(o,"width"),c=q(o,"height")),e<i*(l=d/c)?c=(d=e)/l:d=(c=i)*l,a={naturalWidth:e,naturalHeight:i},r={x:Math.round((e-d)/2),y:Math.round((i-c)/2),width:Math.round(d),height:Math.round(c)},p.preview(t,a,r),s&&(g.Crop=!0,g[f.key]||(g[f.key]={}),g[f.key][s]=r)):p.center(t),""===g.Crop&&delete g.Crop,""===g.CropOptions&&delete g.CropOptions,delete g.Delete,p.$output.val(JSON.stringify(g)),s&&g[f.key]&&Object.keys(g[f.key]).length>=u&&h&&v.isFunction(h)&&h()}).attr("src",t).data("originalUrl",t),m.show()},start:function(){var t,o=this.options,s=this.$modal,e=this.$target.data(),a=e.sizeName||"original",i=e.sizeResolution,r=v("<img>").attr("src",e.originalUrl),l=this.data||{},d=this,n=NaN,c=e.sizeResolutionWidth,h=e.sizeResolutionHeight;i&&(c||h||(c=q(i,"width"),h=q(i,"height")),n=c/h),l[o.key]||(l[o.key]={}),s.trigger("enable.qor.material").find(f).html(r),(t=this.getList(n))&&s.find(p).show().append(t),r.cropper({aspectRatio:n,data:function(t){var e={},i=void 0;if(v.isPlainObject(t))for(i in t)t.hasOwnProperty(i)&&(e[String(i).toLowerCase()]=t[i]);return e}(l[o.key][a]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,autoCropArea:1,built:function(){s.find(".qor-cropper__options-toggle").on(u,function(){s.find(".qor-cropper__options-input").prop("checked",v(this).prop("checked"))}).prop("checked",!0),s.find(".qor-cropper__save").one(u,function(){var t=r.cropper("getData",!0),e=r.cropper("getCroppedCanvas"),i=[],n=void 0;l.Crop=!0,l[o.key][a]=t,d.imageData=r.cropper("getImageData"),d.cropData=t,e&&(n=e.toDataURL()),s.find(p+" input").each(function(){var t=v(this);t.prop("checked")&&i.push(t.attr("name"))}),d.output(n,i),s.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(f+" > img").cropper("destroy").remove().end().find(p).hide().find("ul").remove()},getList:function(s){var a=[];return this.$list.find("img").not(this.$target).each(function(){var t=v(this).data(),e=t.sizeResolution,i=t.sizeName,n=t.sizeResolutionWidth,o=t.sizeResolutionHeight;e&&(n||o||(n=q(e,"width"),o=q(e,"height")),n/o===s&&a.push('<label><input class="qor-cropper__options-input" type="checkbox" name="'+i+'" checked> <span>'+i+"<small>("+n+"&times;"+o+" px)</small></span></label>"))}),a.length?"<ul><li>"+a.join("</li><li>")+"</li></ul>":""},output:function(t,e){var i=this.$target;t?this.center(i.attr("src",t),!0):this.preview(i),v.isArray(e)&&e.length&&this.autoCrop(t,e),this.$output.val(JSON.stringify(this.data)).trigger(n)},preview:function(t,e,i){var n,o=t.parent().parent(),s=o.width(),a=o.height(),r=e||this.imageData,l=v.extend({},i||this.cropData),d=l.width/l.height,c=s;0!=c&&0!=r.naturalWidth&&0!=r.naturalHeight&&(a*d<=s&&(c=a*d),n=l.width/c,t.css({maxWidth:r.naturalWidth/n,maxHeight:r.naturalHeight/n}),this.center(t))},center:function(t,i){t.each(function(){var t=v(this),n=t.parent(),o=n.parent();function e(){var t=o.height(),e=n.height(),i="auto";e<t&&(i=(t-e)/2),n.css("margin-top",i)}i&&n.add(t).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(i,n){var o=this.cropData,s=this.data[this.options.key],a=this;this.$list.find("img").not(this.$target).each(function(){var t=v(this),e=t.data("sizeName");-1<v.inArray(e,n)&&(s[e]=v.extend({},o),i?a.center(t.attr("src",i),!0):a.preview(t))})},destroy:function(){this.$element.removeData(s)}},r.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},r.TOGGLE='<div class="qor-cropper__toggle">\n            <div class="qor-cropper__toggle--crop"><i class="material-icons">crop</i></div>\n            <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n        </div>',r.ALERT='<div class="qor-fieldset__alert">\n            <button class="mdl-button mdl-button--accent qor-fieldset__undo" type="button">Undo delete</button>\n        </div>',r.CANVAS='<div class="qor-cropper__canvas"></div>',r.LIST="<ul><li><img></li></ul>",r.FILE_LIST='<div class="qor-file__list-item">\n                                <span><span>{{filename}}</span></span>\n                                <div class="qor-cropper__toggle">\n                                    <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n                                </div>\n                            </div>',r.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-cropper__wrapper"></div>\n                    <div class="qor-cropper__options">\n                        <p>Sync cropping result to: <label><input type="checkbox" class="qor-cropper__options-toggle" checked/> All</label></p>\n                    </div>\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-cropper__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',r.plugin=function(o){return this.each(function(){var t=v(this),e=t.data(s),i=void 0,n=void 0;if(!e){if(!v.fn.cropper)return;if(/destroy/.test(o))return;i=v.extend(!0,{},t.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),t.data(s,e=new r(this,i))}"string"==typeof o&&v.isFunction(n=e[o])&&n.apply(e)})},v(function(){var e=".qor-file__input",i={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};v(document).on(t,function(t){r.plugin.call(v(e,t.target),i)}).on("disable.qor.cropper",function(t){r.plugin.call(v(e,t.target),"destroy")}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="qor.datepicker",t="enable."+s,l="pick."+s,d="click."+s,c=".qor-datepicker__embedded",h=".qor-datepicker__save",u="[data-picker-type]";function f(t,e){this.$element=r(t),this.options=r.extend(!0,{},f.DEFAULTS,r.isPlainObject(e)&&e),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.init()}return f.prototype={init:function(){this.bind()},bind:function(){this.$element.on(d,r.proxy(this.show,this))},unbind:function(){this.$element.off(d,this.show)},build:function(){var i,t,e=void 0,n=this.$element,o=this.pickerData,s={date:n.val()?new Date(n.val()):new Date,inline:!0},a=n.closest(u).find(o.targetInput);this.built||(this.$modal=e=r((i=f.TEMPLATE,t=this.options.text,"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&r.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body"),a.length&&(s.date=a.val()?new Date(a.val()):new Date),o.targetInput&&a.data("start-date")&&(s.startDate=new Date),e.find(c).on(l,r.proxy(this.change,this)).qorDatepicker(s).triggerHandler(l),e.find(h).on(d,r.proxy(this.pick,this)),this.built=!0)},unbuild:function(){this.built&&this.$modal.find(c).off(l,this.change).qorDatepicker("destroy").end().find(h).off(d,this.pick).end().remove()},change:function(t){var e,i=this.$modal,n=r(t.target);this.date=e=n.qorDatepicker("getDate"),this.formatDate=n.qorDatepicker("getDate",!0),i.find(".qor-datepicker__picked-year").text(e.getFullYear()),i.find(".qor-datepicker__picked-date").text([n.qorDatepicker("getDayName",e.getDay(),!0)+",",String(n.qorDatepicker("getMonthName",e.getMonth(),!0)),e.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){var t=this.pickerData.targetInput,e=this.$element,i=e.closest(u),n=t?i.find(t):e,o=i.data("picker-type"),s=this.formatDate;if("datetime"===o){var a=/^\d{4}-\d{1,2}-\d{1,2}/,r=n.val();a.test(r)?s=r.replace(a,s):s+=" 00:00"}n.val(s).trigger("change"),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},f.DEFAULTS={text:{title:"Pick a date",ok:"OK",cancel:"Cancel"}},f.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-datepicker__picked">\n                        <div class="qor-datepicker__picked-year"></div>\n                        <div class="qor-datepicker__picked-date"></div>\n                    </div>\n                    <div class="qor-datepicker__embedded"></div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored  mdl-button--raised qor-datepicker__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored " data-dismiss="modal">$[cancel]</a>\n                </div>\n            </div>\n        </div>',f.plugin=function(o){return this.each(function(){var t,e,i=r(this),n=i.data(s);if(!n){if(!r.fn.qorDatepicker)return;if(/destroy/.test(o))return;t=r.extend(!0,{},i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(s,n=new f(this,t))}"string"==typeof o&&r.isFunction(e=n[o])&&e.apply(n)})},r(function(){var e='[data-toggle="qor.datepicker"]';r(document).on("disable.qor.datepicker",function(t){f.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){f.plugin.call(r(e,t.target))}).triggerHandler(t)}),f}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){c.fn.extend({dirtyForm:function r(t,l){var d=!1;return this instanceof jQuery?(l=t,t=this):t instanceof jQuery||(t=c(t)),t.each(function(t,e){var i=c(e);if(i.is("form")){if(i.hasClass("ignore-dirtyform"))return!1;if(d=r(i.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),l))return!1}else if(i.is(":checkbox")||i.is(":radio")){if(i.hasClass("ignore-dirtyform"))return!1;if(e.checked!=e.defaultChecked)return!(d=!0)}else if(i.is("input")||i.is("textarea")){if(i.hasClass("ignore-dirtyform"))return!1;if(e.value!=e.defaultValue)return!(d=!0)}else if(i.is("select")){if(i.hasClass("ignore-dirtyform"))return!1;for(var n,o=0,s=e.options.length,a=0;a<s;a++)n=e.options[a],d=d||n.selected!=n.defaultSelected,n.defaultSelected&&(o=a);if(d&&!e.multiple&&(d=o!=e.selectedIndex),d)return!1}}),d}}),c(function(){c(document).on("submit","form",function(){window.onbeforeunload=null,c.fn.qorSlideoutBeforeHide=null}),c(document).on("change","form",function(){c(this).dirtyForm()?(c.fn.qorSlideoutBeforeHide=!0,window.onbeforeunload=function(){return"You have unsaved changes on this page. If you leave this page, you will lose all unsaved changes."}):(c.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var d=window.location,e=l(document),o="qor.filter",t="enable."+o,i="click."+o,s=".qor-bottomsheets",c=".qor-filter__dropdown",h="is-selected";function a(t,e){this.$element=l(t),this.options=l.extend({},a.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){this.bind();var t=this.$element,e=window.moment();this.$timeStart=t.find(".qor-filter__start"),this.$timeEnd=t.find(".qor-filter__end"),this.$searchParam=t.find("[data-search-param]"),this.$searchButton=t.find(this.options.button),this.startWeekDate=e.startOf("isoweek").toDate(),this.endWeekDate=e.endOf("isoweek").toDate(),this.startMonthDate=e.startOf("month").toDate(),this.endMonthDate=e.endOf("month").toDate(),this.initActionTemplate()},bind:function(){var t=this.options;this.$element.on(i,t.trigger,this.show.bind(this)).on(i,t.label,this.setFilterTime.bind(this)).on(i,t.clear,this.clear.bind(this)).on(i,t.button,this.search.bind(this)),e.on(i,this.close)},unbind:function(){this.$element.off(i)},initActionTemplate:function(){var t=this.getUrlParameter("schedule_start_at"),e=this.getUrlParameter("schedule_end_at"),i=l(this.options.trigger);(t||e)&&(this.$timeStart.val(t),this.$timeEnd.val(e),e=e?" - "+e:"",i.addClass("active clearable").find(".qor-selector-label").html(t+e),i.append('<i class="material-icons qor-selector-clear">clear</i>'))},show:function(){this.$element.find(c).toggle()},close:function(t){var e=l(t.target),i=l(c),n=i.is(":visible"),o=e.closest(c).length,s=e.closest(".qor-filter-toggle").length,a=e.closest(".qor-modal").length,r=e.closest(".ui-timepicker-wrapper").length;n&&(o||s||a||r)||i.hide()},setFilterTime:function(t){var e,i,n=l(t.target),o=n.data(),s=o.filterRange,a=void 0,r=void 0;if(!s)return!1;if(l(this.options.label).removeClass(h),n.addClass(h),"events"==s)return this.$timeStart.val(o.scheduleStartAt||""),this.$timeEnd.val(o.scheduleEndAt||""),this.$searchButton.click(),!1;switch(s){case"today":a=r=new Date;break;case"week":a=this.startWeekDate,r=this.endWeekDate;break;case"month":a=this.startMonthDate,r=this.endMonthDate}if(!a||!r)return!1;e=this.getTime(a)+" 00:00",i=this.getTime(r)+" 23:59",this.$timeStart.val(e),this.$timeEnd.val(i),this.$searchButton.click()},getTime:function(t){var e=t.getMonth()+1,i=t.getDate();return e=e<8?"0"+e:e,i=i<10?"0"+i:i,t.getFullYear()+"-"+e+"-"+i},clear:function(){var t=l(this.options.trigger),e=t.find(".qor-selector-label");return t.removeClass("active clearable"),e.html(e.data("label")),this.$timeStart.val(""),this.$timeEnd.val(""),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=d.search,i=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\?&]"+i+"=([^&#]*)").exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},updateQueryStringParameter:function(t,e,i){var n=i||d.href,o=n.match(/#\S*$/)||"",s=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),a=new RegExp("([?&])"+s+"=.*?(&|$)","i"),r=-1!==n.indexOf("?")?"&":"?";return o&&(o=o[0],n=n.replace(o,"")),n.match(a)?n=e?n.replace(a,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?n.replace(a,"$1"):n.replace(a,""):e&&(n=n+r+t+"="+e),n+o},search:function(){var t=this.$searchParam,n=d.href,o=this;t.length&&(t.each(function(){var t=l(this),e=t.data().searchParam,i=t.val();n=o.updateQueryStringParameter(e,i,n)}),this.$element.closest(s).length?l(s).trigger("filterChanged.qor.filter",[n,"qor.filter.time"]):d.href=n)},destroy:function(){this.unbind(),this.$element.removeData(o)}},a.DEFAULTS={label:!1,trigger:!1,button:!1,clear:!1},a.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new a(this,n))}"string"==typeof n&&l.isFunction(t=i[n])&&t.apply(i)})},l(function(){var e='[data-toggle="qor.filter.time"]',i={label:".qor-filter__block-buttons button",trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};l(document).on("disable.qor.filter",function(t){a.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){a.plugin.call(l(e,t.target),i)}).triggerHandler(t)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){var h=window.location,o="qor.filter",t="enable."+o,e="click."+o,i="change."+o,u=".qor-bottomsheets";function s(t,e){this.$element=c(t),this.options=c.extend({},s.DEFAULTS,c.isPlainObject(e)&&e),this.init()}function f(t,i){var n,e=decodeURI(h.search);return c.isArray(t)&&(n=p(e),c.each(t,function(t,e){-1===(t=c.inArray(e,n))?n.push(e):i&&n.splice(t,1)}),e="?"+n.join("&")),e}function p(t){var e=[];return t&&-1<t.indexOf("?")&&((t=t.split("?")[1])&&-1<t.indexOf("#")&&(t=t.split("#")[0]),t&&(e=c.map(t.split("&"),function(t){var e,i=[];if(t=t.split("="),!/page/.test(t[0]))return e=t[1],i.push(t[0]),e&&(e=c.trim(decodeURIComponent(e)))&&i.push(e),i.join("=")}))),e}return s.prototype={constructor:s,init:function(){this.bind()},bind:function(){var t=this.options;this.$element.on(e,t.label,c.proxy(this.toggle,this)).on(i,t.group,c.proxy(this.toggle,this))},unbind:function(){this.$element.off(e,this.toggle).off(i,this.toggle)},toggle:function(t){var n,e,i,o,s,a,r,l=c(t.currentTarget),d=[];l.is("select")?(n=p(decodeURI(h.search)),r=o=l.attr("name"),s=l.val(),e=[o],s&&e.push(s),e=e.join("="),s&&d.push(e),l.children().each(function(){var t=c(this),e=[o],i=c.trim(t.prop("value"));if(i&&e.push(i),e=e.join("="),-1<c.inArray(e,n))return a=e,!1}),i=a?(d.push(a),f(d,!0)):f(d)):l.is("a")&&(t.preventDefault(),r=l.data().paramName,d=p(l.attr("href")),i=l.hasClass("is-active")?f(d,!0):f(d)),this.$element.closest(u).length?c(u).trigger("filterChanged.qor.filter",[i,r]):h.search=i},destroy:function(){this.unbind(),this.$element.removeData(o)}},s.DEFAULTS={label:!1,group:!1},s.plugin=function(n){return this.each(function(){var t,e=c(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new s(this,n))}"string"==typeof n&&c.isFunction(t=i[n])&&t.apply(i)})},c(function(){var e='[data-toggle="qor.filter"]',i={label:"a",group:"select"};c(document).on("disable.qor.filter",function(t){s.plugin.call(c(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(c(e,t.target),i)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var t=r(window),l=window._,o="qor.fixer",n="enable."+o,e="click."+o,i="resize."+o,s="scroll."+o,d="is-hidden",a="is-fixed";function c(t,e){this.$element=r(t),this.options=r.extend({},c.DEFAULTS,r.isPlainObject(e)&&e),this.$clone=null,this.init()}return c.prototype={constructor:c,init:function(){var t=this.options,e=this.$element;this.buildCheck()||(this.$thead=e.find("thead:first"),this.$tbody=e.find("tbody:first"),this.$header=r(t.header),this.$subHeader=r(t.subHeader),this.$content=r(t.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=t.paddingHeight,this.fixedHeaderWidth=[],this.isEqualed=!1,this.resize(),this.bind())},bind:function(){this.$element.on(e,r.proxy(this.check,this)),this.$content.on(s,r.proxy(this.toggle,this)),t.on(i,r.proxy(this.resize,this))},unbind:function(){this.$element.off(e,this.check),this.$content.off(s,this.toggle).off(i,this.resize)},build:function(){if(this.$content.length){var t=this.$element,e=this.$thead,i=this.$clone,n=this,o=e.find("> tr").children(),s=this.$content.offset().top+r(".qor-page__header").height();i||(this.$clone=i=e.clone().prependTo(t).css({top:s})),i.addClass([a,d].join(" ")).find("> tr").children().each(function(t){r(this).outerWidth(o.eq(t).outerWidth()),n.fixedHeaderWidth.push(r(this).outerWidth())})}},unbuild:function(){this.$clone.remove()},buildCheck:function(){var t=this.$element;return!!(1<r(".qor-page__body .qor-js-table").length||0<r(".qor-global-search--container").length||t.hasClass("qor-table--medialibrary")||t.is(":hidden")||t.find("tbody > tr:visible").length<=1)},check:function(t){var e,i=r(t.target);i.is(".qor-js-check-all")&&(e=i.prop("checked"),i.closest("thead").siblings("thead").find(".qor-js-check-all").prop("checked",e).closest(".mdl-checkbox").toggleClass("is-checked",e))},toggle:function(){if(this.$content.length){var e=this,t=this.$clone,i=this.$thead,n=this.$content.scrollTop(),o=this.$content.scrollLeft(),s=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,a=r(".qor-page__header").outerHeight();if(!this.isEqualed)this.headerWidth=[],i.find("> tr").children().each(function(){e.headerWidth.push(r(this).outerWidth())}),l.difference(e.fixedHeaderWidth,e.headerWidth).length&&(r("thead.is-fixed").find(">tr").children().each(function(t){r(this).outerWidth(e.headerWidth[t])}),this.isEqualed=!0);s-a<n?t.css({"margin-left":-o}).removeClass(d):t.css({"margin-left":"0"}).addClass(d)}},resize:function(){this.build(),this.toggle()},destroy:function(){this.buildCheck()||(this.unbind(),this.unbuild(),this.$element.removeData(o))}},c.DEFAULTS={header:!1,content:!1},c.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);i||e.data(o,i=new c(this,n)),"string"==typeof n&&r.isFunction(t=i[n])&&t.call(i)})},r(function(){var e=".qor-js-table",i={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};r(document).on("disable.qor.fixer",function(t){c.plugin.call(r(e,t.target),"destroy")}).on(n,function(t){c.plugin.call(r(e,t.target),i)}).triggerHandler(n)}),c}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var o="qor.inlineEdit",t="enable."+o,e="click."+o,i="mouseenter."+o,n="mouseleave."+o,d=".qor-field",c=".qor-field__show",h=".qor-field__show-inner",s=".qor-inlineedit__edit",a=".qor-inlineedit__save",u=".qor-inlineedit__buttons",r=".qor-inlineedit__cancel",f="qor-inlineedit__field";function p(t,e){this.$element=l(t),this.options=l.extend({},p.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return p.prototype={constructor:p,init:function(){var t=this.$element,e=t.data("button-save"),i=t.data("button-cancel");this.TEMPLATE_SAVE='<div class="qor-inlineedit__buttons">\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__cancel" type="button">'+i+'</button>\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__save" type="button">'+e+"</button>\n                                      </div>",this.bind()},bind:function(){this.$element.on(i,c,this.showEditButton).on(n,c,this.hideEditButton).on(e,r,this.hideEdit).on(e,a,this.saveEdit).on(e,s,this.showEdit.bind(this))},unbind:function(){this.$element.off(i,c,this.showEditButton).off(n,c,this.hideEditButton).off(e,r,this.hideEdit).off(e,a,this.saveEdit).off(e,s,this.showEdit)},showEditButton:function(t){var e=l(p.TEMPLATE_EDIT);if(l(t.target).closest(d).find("input:disabled, textarea:disabled,select:disabled").length)return!1;e.appendTo(l(this))},hideEditButton:function(){l(".qor-inlineedit__edit").remove()},showEdit:function(t){var e=l(t.target).closest(s).hide().closest(d).addClass(f);l(this.TEMPLATE_SAVE).appendTo(e)},hideEdit:function(){l(this).closest(d).removeClass(f).find(u).remove()},saveEdit:function(){var n=l(this),o=n.closest(d),t=n.closest("form"),e=o.closest(".qor-fieldset").find('input.qor-hidden__primary_key[type="hidden"]'),i=o.find('input[name*="QorResource"],textarea[name*="QorResource"],select[name*="QorResource"]'),s=t.find("input[name=_method]"),a=i.length&&i.prop("name").match(/\.\w+/g),r=i.serialize();e.length&&(r=r+"&"+e.serialize()),r+="&qorInlineEdit=true",0<s.length&&(r+="&_method="+s.val()),a.length&&l.ajax(t.prop("action"),{method:t.prop("method"),data:r,dataType:"json",beforeSend:function(){n.prop("disabled",!0)},success:function(t){var e=function(t,e){var i=void 0,n=e[t[0].slice(1)];if(1<t.length)for(var o=1;o<t.length;o++)i=t[o].slice(1),n=l.isArray(n)?n[0][i]:n[i];return n}(a,t),i=o.removeClass(f).find(c);i.find(h).length?i.find(h).html(e):i.html(e),o.find(u).remove(),n.prop("disabled",!1)},error:function(t,e,i){window.alert([e,i].join(": ")),n.prop("disabled",!1)}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},p.DEFAULTS={},p.TEMPLATE_EDIT='<button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored qor-inlineedit__edit" type="button"><i class="material-icons">mode_edit</i></button>',p.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);i||e.data(o,i=new p(this,n)),"string"==typeof n&&l.isFunction(t=i[n])&&t.call(i)})},l(function(){var e='[data-toggle="qor.inlineEdit"]',i={};l(document).on("disable.qor.inlineEdit",function(t){p.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){p.plugin.call(l(e,t.target),i)}).triggerHandler(t)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(e){var i=window.componentHandler,n='[class*="mdl-js"],[class*="mdl-tooltip"]';function o(t){i&&(e(t).is(n)?i.upgradeElements(t):i.upgradeElements(e(n,t).toArray()))}function s(t){i&&(e(t).is(n)?i.downgradeElements(t):i.downgradeElements(e(n,t).toArray()))}e(function(){e(document).on("enable.qor.material",function(t){o(t.target)}).on("disable.qor.material",function(t){s(t.target)}).on("update.qor.material",function(t){s(t.target),o(t.target)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var n=o(document),s="qor.modal",t="click."+s,e="keyup."+s,a="transitionend",r="qor-modal-open",l="in",i="aria-hidden";function d(t,e){this.$element=o(t),this.options=o.extend({},d.DEFAULTS,o.isPlainObject(e)&&e),this.transitioning=!1,this.fadable=!1,this.init()}return d.prototype={constructor:d,init:function(){this.fadable=this.$element.hasClass("fade"),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(t,o.proxy(this.click,this)),this.options.keyboard&&n.on(e,o.proxy(this.keyup,this))},unbind:function(){this.$element.off(t,this.click),this.options.keyboard&&n.off(e,this.keyup)},click:function(t){var e=this.$element[0],i=t.target;if(i===e&&this.options.backdrop)this.hide();else for(;i!==e;){if("modal"===o(i).data("dismiss")){this.hide();break}i=i.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(t){var e,i=this.$element;if(!this.transitioning&&!i.hasClass(l)&&(e=o.Event("show.qor.modal"),i.trigger(e),!e.isDefaultPrevented())){if(n.find("body").addClass(r),i.addClass("shown").scrollTop(0).get(0).offsetHeight,this.transitioning=!0,t||!this.fadable)return i.addClass(l),void this.shown();i.one(a,o.proxy(this.shown,this)),i.addClass(l)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(i,!1).trigger("shown.qor.modal").focus()},hide:function(t){var e,i=this.$element;if(!this.transitioning&&i.hasClass(l)&&(e=o.Event("hide.qor.modal"),i.trigger(e),!e.isDefaultPrevented())){if(n.find("body").removeClass(r),this.transitioning=!0,t||!this.fadable)return i.removeClass(l),void this.hidden();i.one(a,o.proxy(this.hidden,this)),i.removeClass(l)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass("shown").attr(i,!0).trigger("hidden.qor.modal")},toggle:function(){this.$element.hasClass(l)?this.hide():this.show()},destroy:function(){this.$element.removeData(s)}},d.DEFAULTS={backdrop:!1,keyboard:!0,show:!0},d.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;e.data(s,i=new d(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o.fn.qorModal=d.plugin,o(function(){var e=".qor-modal";o(document).on(t,'[data-toggle="qor.modal"]',function(){var t=o(this),e=t.data(),i=o(e.target||t.attr("href"));d.plugin.call(i,i.data(s)?"toggle":e)}).on("disable.qor.modal",function(t){d.plugin.call(o(e,t.target),"destroy")}).on("enable.qor.modal",function(t){d.plugin.call(o(e,t.target))})}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var o="qor.tabbar.radio",t="enable."+o,e="click."+o,r="[data-tab-target]",l="is-active";function s(t,e){this.$element=a(t),this.options=a.extend({},s.DEFAULTS,a.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){this.bind()},bind:function(){this.$element.on(e,r,this.switchTab.bind(this))},unbind:function(){this.$element.off(e,r,this.switchTab)},switchTab:function(t){var e=a(t.target),i=this.$element,n=i.find(r),o=i.find("[data-tab-source]"),s=e.data().tabTarget;e.hasClass(l)||(n.removeClass(l),e.addClass(l),o.hide().filter('[data-tab-source="'+s+'"]').show(),i.trigger("switched.qor.tabbar.radio",[i,s]))},destroy:function(){this.unbind()}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var t,e=a(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new s(this,n))}"string"==typeof n&&a.isFunction(t=i[n])&&t.apply(i)})},a(function(){var e='[data-toggle="qor.tab.radio"]';a(document).on("disable.qor.tabbar.radio",function(t){s.plugin.call(a(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(a(e,t.target))}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var a="qor.redactor",t="enable."+a,l="click."+a,r="keyup."+a,e="addCrop."+a,i="removeCrop."+a,c="scroll."+a,n=".qor-cropper__toggle--redactor",h="#redactor-link-title",u="#redactor-link-url-text",f="#redactor-modal-button-cancel";function p(t){return t.replace(/&/g," ").replace(/</g," ").replace(/>/g," ").replace(/\"/g," ").replace(/\'/g," ").replace(/\`/g," ")}function m(t,e){this.$element=d(t),this.options=d.extend(!0,{},m.DEFAULTS,d.isPlainObject(e)&&e),this.init()}return m.prototype={constructor:m,init:function(){var i,t,e=this.options,n=this.$element,o=n.closest(e.parent);o.length||(o=n.parent()),this.$parent=o,this.$button=d(m.BUTTON),this.$modal=d((i=m.MODAL,t=e.text,"string"==typeof i&&"object"===(void 0===t?"undefined":_typeof(t))&&d.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body"),this.bind()},bind:function(){this.$element.on(e,d.proxy(this.addButton,this)).on(i,d.proxy(this.removeButton,this))},unbind:function(){this.$element.off(e).off(i).off(c)},addButton:function(t,e){var i=d(e);this.$button.css("left",d(e).width()/2).prependTo(i.parent()).find(n).one(l,d.proxy(this.crop,this,i))},removeButton:function(){this.$button.find(n).off(l),this.$button.detach()},crop:function(o){var s=this.options,i=o.attr("src"),t=i,a=d("<img>"),r=this.$modal;d.isFunction(s.replace)&&(t=s.replace(t)),a.attr("src",t),r.one("shown.qor.modal",function(){var t,e;a.cropper({data:(t=o.attr("data-crop-options"),e=t&&t.split(","),t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){r.find(".qor-cropper__save").one(l,function(){var n=a.cropper("getData",!0);d.ajax(s.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:i,CropOptions:{original:function(t){var e,i,n={};if(d.isPlainObject(t))for(e in t)t.hasOwnProperty(e)&&(n[(i=e,"string"==typeof i&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i)]=t[e]);return n}(n)},Crop:!0}),dataType:"json",success:function(t){var e,i;d.isPlainObject(t)&&t.url&&(o.attr("src",t.url).attr("data-crop-options",(e=n,i=[],d.isPlainObject(e)&&d.each(e,function(){i.push(arguments[1])}),i.join())).removeAttr("style").removeAttr("rel"),d.isFunction(s.complete)&&s.complete(),r.qorModal("hide"))}})})}})}).one("hidden.qor.modal",function(){a.cropper("destroy").remove()}).qorModal("show").find(".qor-cropper__wrapper").append(a)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(a)}},m.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},m.BUTTON='<div class="qor-redactor__image--buttons">\n            <span class="qor-redactor__image--edit" contenteditable="false">Edit</span>\n            <span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>\n        </div>',m.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n              <div class="mdl-card__title">\n                <h2 class="mdl-card__title-text">$[title]</h2>\n              </div>\n              <div class="mdl-card__supporting-text">\n                <div class="qor-cropper__wrapper"></div>\n              </div>\n              <div class="mdl-card__actions mdl-card--border">\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">$[ok]</a>\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n              </div>\n              <div class="mdl-card__menu">\n                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close">\n                  <i class="material-icons">close</i>\n                  </button>\n              </div>\n            </div>\n        </div>',m.plugin=function(i){return this.each(function(){var n=d(this),o=n.data(a),t=void 0,e=void 0;if(o)/destroy/.test(i)&&n.redactor("core.destroy");else{if(!d.fn.redactor)return;if(/destroy/.test(i))return;n.data(a,o={});var s=["html","format","bold","italic","deleted","lists","image","file","link","table"];t={imageUpload:n.data("uploadUrl"),fileUpload:n.data("uploadUrl"),imageResizable:!0,imagePosition:!0,toolbarFixed:!1,buttons:s,callbacks:{init:function(){var e=void 0,r=this.core.box(),t=d(".qor-slideout").is(":visible"),i=void 0,l=64;s.forEach(function(t){e=this.button.get(t),this.button.setIcon(e,'<i class="material-icons '+t+'"></i>')},this),t?(i=".qor-slideout",l=d(".qor-slideout__header").height()):l+=d(i=".qor-layout main.qor-page").find(".qor-page__header").height(),d(i).on(c,function(){var t,e,i,n,o,s,a;e=l,i=(t=r).find(".redactor-toolbar"),n=t.offset().top,o=t.height(),s={position:"relative",top:"auto",width:"auto",boxShadow:"none"},a={position:"fixed",boxShadow:"0 2px 4px rgba(0,0,0,.1)",top:e,width:t.width()},"relative"===i.css("position")&&(o=t.height()-50),n<e?o-50-e<Math.abs(n)?i.css(s):i.css(a):i.css(s)}),n.data("cropUrl")&&n.data(a,o=new m(n,{remote:n.data("cropUrl"),text:n.data("text"),parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:d.proxy(function(){this.code.sync()},this)}))},imageUpload:function(t,e){var i=d(t);e.filelink&&i.prop("src",e.filelink)},click:function(t){var e=d(this.selection.parent());e.is(".redactor-layer")&&(e=d(this.selection.current())),this.selection.$currentTag=e,this.link.linkDescription="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.is()&&(this.link.linkDescription=this.link.get().prop("title"),this.link.$linkHtml=d(t.target))},modalOpened:function(t,e){var i=this;"link"==t&&(d(e).find("#redactor-link-url-text").closest("section").after('<section><label>Description for Accessibility</label><input value="'+this.link.linkDescription+'" type="text" id="redactor-link-title" placeholder="If blank, will use Text value above" /></section>'),this.link.linkUrlText=d(u).val(),this.link.description=d(h).val(),d(h).off(r),d(u).off(r),d(f).off(l),d(f).on(l,function(){i.link.clickCancel=!0}),d(h).on(r,function(){i.link.valueChanged=!0,i.link.description=p(d(this).val())}),d(u).on(r,function(){i.link.valueChanged=!0,i.link.linkUrlText=p(d(this).val())}))},modalClosed:function(t){var e=this.link.$linkHtml,i=this.link.description;"link"==t&&!this.link.insertedTriggered&&e&&e.length&&this.link.valueChanged&&!this.link.clickCancel&&(i?e.prop("title",i):e.prop("title",this.link.linkUrlText)),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.clickCancel=!1},insertedLink:function(t){var e=d(t),i=this.link.description;e.prop("title",i||e.text()),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!0},fileUpload:function(t,e){d(t).prop("href",e.filelink).html(e.filename)}}},d.extend(t,n.data("redactorSettings")),n.redactor(t)}"string"==typeof i&&d.isFunction(e=o[i])&&e.apply(o)})},d(function(){var e='textarea[data-toggle="qor.redactor"]';d(document).on("disable.qor.redactor",function(t){m.plugin.call(d(e,t.target),"destroy")}).on(t,function(t){m.plugin.call(d(e,t.target))}).triggerHandler(t)}),m}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(u){var s=window._,o="qor.replicator",t="enable."+o,e="submit."+o,a="click."+o,i="slideoutBeforeSend.qor.slideout.replicator",n="selectcoreBeforeSend.qor.selectcore.replicator bottomsheetBeforeSend.qor.bottomsheets.replicator",r=".qor-fieldset-container";function l(t,e){this.$element=u(t),this.options=u.extend({},l.DEFAULTS,u.isPlainObject(e)&&e),this.index=0,this.init()}return l.prototype={constructor:l,init:function(){var i=this,t=this.$element,e=t.find("> .qor-field__block > .qor-fieldset--new"),n=void 0;this.isInSlideout=t.closest(".qor-slideout").length,this.hasInlineReplicator=t.find(r).length,this.maxitems=t.data("maxItem"),this.isSortable=t.hasClass("qor-fieldset-sortable"),e.length&&!t.closest(".qor-fieldset--new").length&&(e.trigger("disable"),this.isMultipleTemplate=t.data("isMultiple"),this.isMultipleTemplate?(this.fieldsetName=[],this.template={},this.index=[],e.each(function(t,e){(n=u(e).data("fieldsetName"))&&(i.template[n]=u(e).prop("outerHTML"),i.fieldsetName.push(n))}),this.parseMultiple()):(this.template=e.prop("outerHTML"),this.parse()),e.hide(),this.bind(),this.resetButton(),this.resetPositionButton())},resetPositionButton:function(){var t=this.$element.find("> .qor-sortable__button");this.isSortable&&(1<this.getCurrentItems()?t.show():t.hide())},getCurrentItems:function(){return this.$element.find("> .qor-field__block > .qor-fieldset").not(".qor-fieldset--new,.is-deleted").length},toggleButton:function(t){var e=this.$element.find(this.options.addClass);t?e.hide():e.show()},resetButton:function(){this.maxitems<=this.getCurrentItems()?this.toggleButton(!0):this.toggleButton()},parse:function(){var t;this.template&&(t=this.initTemplate(this.template),this.template=t.template,this.index=t.index)},parseMultiple:function(){for(var t=void 0,e=void 0,i=this.fieldsetName,n=0,o=i.length;n<o;n++)e=i[n],t=this.initTemplate(this.template[e]),this.template[e]=t.template,this.index.push(t.index);this.multipleIndex=s.max(this.index)},initTemplate:function(t){var a=void 0,r=this.hasInlineReplicator;return{template:t=t.replace(/(\w+)\="(\S*\[\d+\]\S*)"/g,function(t,o,s){return s=s.replace(/^(\S*)\[(\d+)\]([^\[\]]*)$/,function(t,e,i,n){if(t===s)return"name"!==o||a||(a=i),r&&/\[\d+\]/.test(e)?t.replace(/\[\d+\]/,"[{{index}}]"):e+"[{{index}}]"+n}),o+'="'+s+'"'}),index:parseFloat(a)}},bind:function(){var t=this.options;this.$element.on(a,t.addClass,u.proxy(this.add,this)).on(a,t.delClass,u.proxy(this.del,this)),!this.isInSlideout&&u(document).on(e,"form",this.removeData.bind(this)),u(document).on(i,".qor-slideout",this.removeData.bind(this)).on(n,this.removeData.bind(this))},unbind:function(){this.$element.off(a),!this.isInSlideout&&u(document).off(e,"form"),u(document).off(i,".qor-slideout").off(n)},removeData:function(){u(".qor-fieldset--new").remove()},add:function(t,e,i){var n,o,s=this.options;if(this.maxitems<=this.getCurrentItems())return!1;if(!i)var a=u(t.target).closest(s.addClass),r=a.data("template"),l=a.closest(this.$element).children(s.childrenClass),d=a.closest(s.childrenClass).children("fieldset");if(this.isMultipleTemplate){for(var c in this.parseNestTemplate(r),o=this.template[r],n=u(o.replace(/\{\{index\}\}/g,this.multipleIndex)),a.data())if(c.match(/^sync/)){var h=c.replace(/^sync/,"");n.find("input[name*='."+h+"']").val(a.data(c))}d.length?d.last().after(n.show()):l.prepend(n.show()),n.data("itemIndex",this.multipleIndex).removeClass("qor-fieldset--new"),this.multipleIndex++}else i?e&&e.length&&(this.addMultiple(e),u(document).trigger("addedMultipleDone.qor.replicator")):(n=this.addSingle(),a.before(n.show()),this.index++);i||(n.trigger("enable"),u(document).trigger("added.qor.replicator",[n]),t.stopPropagation()),this.resetPositionButton(),this.resetButton()},addMultiple:function(t){for(var e=void 0,i=0,n=t.length;i<n;i++)e=this.addSingle(),this.index++,u(document).trigger("addedMultiple.qor.replicator",[e,t[i]])},addSingle:function(){var t=void 0,e=this.$element;if(t=u(this.template.replace(/\{\{index\}\}/g,this.index)),this.isSortable){var i=e.find("> .qor-field__block > .qor-sortable__item").not(".qor-fieldset--new").length;t.attr("order-index",i).css("order",i)}return t.data("itemIndex",this.index).removeClass("qor-fieldset--new"),t},del:function(t){var e=this.options,i=u(t.target).closest(e.itemClass),n=void 0;i.addClass("is-deleted").children(":visible").addClass("hidden").hide(),(n=u(e.alertTemplate.replace("{{name}}",this.parseName(i)))).find(e.undoClass).one(a,function(){if(this.maxitems<=this.getCurrentItems())return window.QOR.qorConfirm(this.$element.data("maxItemHint")),!1;i.find("> .qor-fieldset__alert").remove(),i.removeClass("is-deleted").children(".hidden").removeClass("hidden").show(),this.resetButton(),this.resetPositionButton()}.bind(this)),this.resetButton(),this.resetPositionButton(),i.append(n)},parseNestTemplate:function(t){var e=this.$element,i=void 0;e.parents(".qor-fieldset-container").length&&(i=e.closest(".qor-fieldset").data("itemIndex"))&&(t?this.template[t]=this.template[t].replace(/\[\d+\]/g,"["+i+"]"):this.template=this.template.replace(/\[\d+\]/g,"["+i+"]"))},parseName:function(t){var e=t.find("input[name]").attr("name")||t.find("textarea[name]").attr("name");if(e)return e.replace(/[^\[\]]+$/,"")},destroy:function(){this.unbind(),this.$element.removeData(o)}},l.DEFAULTS={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'},l.plugin=function(n){return this.each(function(){var t=u(this),e=t.data(o),i=void 0;e||t.data(o,e=new l(this,n)),"string"==typeof n&&u.isFunction(i=e[n])&&i.call(e)})},u(function(){var e=r,i={};u(document).on("disable.qor.replicator",function(t){l.plugin.call(u(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(u(e,t.target),i)}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var c=window.location,s=window.componentHandler,h=window.history,o="qor.globalSearch",t="enable."+o,e="click."+o,u=".qor-global-search--resource",a=".qor-global-search--results",r="is-active";function l(t,e){this.$element=d(t),this.options=d.extend({},l.DEFAULTS,d.isPlainObject(e)&&e),this.init()}return l.prototype={constructor:l,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on(e,d.proxy(this.click,this))},unbind:function(){this.$element.off(e,this.check)},initTab:function(){var t,e=c.search;/resource_name/.test(e)&&(t=e.match(/resource_name=\w+/g).toString().split("=")[1],d(u).removeClass(r),d('[data-resource="'+t+'"]').addClass(r))},click:function(t){var e=d(t.target),i=e.data();if(e.is(u)){var n,o=c.href.replace(/#/g,""),s=i.resource,a=/resource_name/.test(o),r="resource_name="+s,l=/keyword/.test(o)?"&":"?keyword=&";n=s?a?o.replace(/resource_name=\w+/g,r):o+l+r:o.replace(/&resource_name=\w+/g,""),h.pushState?this.fetchSearch(n,e):c.href=n}},fetchSearch:function(i,n){var o=document.title;d.ajax(i,{method:"GET",dataType:"html",beforeSend:function(){d(".mdl-spinner").remove(),d(a).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".qor-section").hide(),s.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(t){var e=d(t).find(a).html();d(u).removeClass(r),n.addClass(r),h.pushState({Page:i,Title:o},o,i),d(".mdl-spinner").remove(),d(a).removeClass("loading").html(e),s.upgradeElements(document.querySelectorAll(".qor-table"))},error:function(t,e,i){d(a).find(".qor-section").show(),d(".mdl-spinner").remove(),window.alert([e,i].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},l.DEFAULTS={},l.plugin=function(n){return this.each(function(){var t,e=d(this),i=e.data(o);i||e.data(o,i=new l(this,n)),"string"==typeof n&&d.isFunction(t=i[n])&&t.call(i)})},d(function(){var e='[data-toggle="qor.global.search"]',i={};d(document).on("disable.qor.globalSearch",function(t){l.plugin.call(d(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(d(e,t.target),i)}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var l=window.FormData,o="qor.selectcore",s="afterSelected."+o,t="click."+o,e="submit."+o;function a(t,e){this.$element=r(t),this.options=r.extend({},a.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return a.prototype={constructor:a,init:function(){this.bind()},bind:function(){this.$element.on(t,".qor-table-container tbody tr",this.processingData.bind(this)).on(e,"form",this.submit.bind(this))},unbind:function(){this.$element.off(t,".qor-table tbody tr").off(e,"form")},processingData:function(e){var t,i=r(e.target).closest("tr"),n={},o=this.options.onSelect;return(n=r.extend({},n,i.data())).$clickElement=i,(t=n.mediaLibraryUrl||n.url)?r.getJSON(t,function(t){t.MediaOption&&(t.MediaOption=JSON.parse(t.MediaOption)),n=r.extend({},t,n),o&&r.isFunction(o)&&(o(n,e),r(document).trigger(s))}):o&&r.isFunction(o)&&(o(n,e),r(document).trigger(s)),!1},submit:function(e){var t=e.target,o=r(t),i=this,n=o.find(":submit"),s=void 0,a=this.options.onSubmit;r(document).trigger("selectcoreBeforeSend.qor.selectcore"),l&&(e.preventDefault(),r.ajax(o.prop("action"),{method:o.prop("method"),data:new l(t),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){o.parent().find(".qor-error").remove(),n.prop("disabled",!0)},success:function(t){(s=t).primaryKey=s.ID,r(".qor-error").remove(),a&&r.isFunction(a)?(a(s,e),r(document).trigger("afterSubmitted.qor.selectcore")):i.refresh()},error:function(t,e,i){var n=void 0;n=t.responseJSON?'<ul class="qor-error">\n                                        <li><label>\n                                            <i class="material-icons">error</i>\n                                            <span>'+t.responseJSON.errors[0]+"</span>\n                                        </label></li>\n                                    </ul>":'<ul class="qor-error">'+r(t.responseText).find("#errors").html()+"</ul>",r(".qor-bottomsheets .qor-page__body").scrollTop(0),422===t.status&&n?o.before(n):window.alert([e,i].join(": "))},complete:function(){n.prop("disabled",!1)}}))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},a.plugin=function(n){return this.each(function(){var t=r(this),e=t.data(o),i=void 0;if(!e){if(/destroy/.test(n))return;t.data(o,e=new a(this,n))}"string"==typeof n&&r.isFunction(i=e[n])&&i.apply(e)})},r.fn.qorSelectCore=a.plugin,a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var n=r("body"),t=r(document),l=window.Mustache,o="qor.selectone",e="click."+o,i="enable."+o,s="reload.qor.bottomsheets",a=".qor-selected-many__remove",d=".qor-selected-many__undo",c="qor-selected-many__deleted",h=".qor-field__selectmany",u="is_selected",f="qor-bottomsheets__select-many";function p(t,e){this.$element=r(t),this.options=r.extend({},p.DEFAULTS,r.isPlainObject(e)&&e),this.init()}var m={lock:!1};return p.prototype={constructor:p,init:function(){this.bind()},bind:function(){t.on(e,'[data-select-modal="many"]',this.openBottomSheets.bind(this)).on(s,"."+f,this.reloadData.bind(this)),this.$element.on(e,a,this.clearSelect.bind(this)).on(e,d,this.undoDelete.bind(this))},unbind:function(){t.off(e,'[data-select-modal="many"]').off(s,"."+f),this.$element.off(e,a).off(e,d)},clearSelect:function(t){var e=r(t.target),i=e.closest(h);return e.closest("[data-primary-key]").addClass(c),this.updateSelectInputData(i),!1},undoDelete:function(t){var e=r(t.target),i=e.closest(h);return e.closest("[data-primary-key]").removeClass(c),this.updateSelectInputData(i),!1},openBottomSheets:function(t){if(m.lock)return t.preventDefault(),!1;m.lock=!0,setTimeout(function(){m.lock=!1},3e3);var e=r(t.target),i=e.data();this.BottomSheets=n.data("qor.bottomsheets"),this.bottomsheetsData=i,this.$selector=i.selectId?r(i.selectId):e.closest(h).find("select"),this.$selectFeild=this.$selector.closest(h).find(".qor-field__selected-many"),this.SELECT_MANY_SELECTED_ICON=r('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=r('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=r('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=r('[name="select-many-template"]').html(),i.url=i.selectListingUrl,i.selectDefaultCreating&&(i.url=i.selectCreatingUrl),this.BottomSheets.open(i,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return l.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return l.render(this.SELECT_MANY_HINT,t)},initItems:function(){var i,t=this.$bottomsheets.find("tbody tr"),n=this.SELECT_MANY_SELECTED_ICON,o=this.SELECT_MANY_UNSELECTED_ICON,s=[];this.$selectFeild.find("[data-primary-key]").not("."+c).each(function(){s.push(r(this).data().primaryKey)}),t.each(function(){var t=r(this),e=t.find("td:first");i=t.data().primaryKey,"-1"!=s.indexOf(i)?(t.addClass(u),e.append(n)):e.append(o)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){return{selectedNum:this.$selectFeild.find("[data-primary-key]").not("."+c).length}},updateHint:function(t){var e;r.extend(t,this.bottomsheetsData),e=this.renderHint(t),this.$bottomsheets.find(".qor-selectmany__hint").remove(),this.$bottomsheets.find(".qor-page__body").before(e)},updateSelectInputData:function(t){var e,i,n,o=(t||this.$selectFeild).find("[data-primary-key]").not("."+c),s=t?t.find(".qor-field__selectmany-input"):this.$selector,a=s.find("option");a.prop("selected",!1),o.each(function(){n=r(this).data().primaryKey,(e=a.filter('[value="'+n+'"]')).length||(i={primaryKey:n,displayName:""},e=r(l.render(p.SELECT_MANY_OPTION_TEMPLATE,i)),s.append(e)),e.prop("selected",!0)})},changeIcon:function(t,e){t.find(".qor-select__select-icon").remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').find(a).click(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(t,e){var i,n=this.renderSelectMany(t),o=this.$selectFeild.find('[data-primary-key="'+t.primaryKey+'"]');return o.length?o.hasClass(c)?(o.removeClass(c),this.updateSelectInputData(),void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0:(this.$selectFeild.append(n),e?((i=r(l.render(p.SELECT_MANY_OPTION_TEMPLATE,t))).appendTo(this.$selector),i.prop("selected",!0),this.$bottomsheets.remove(),void(r(".qor-bottomsheets").is(":visible")||r("body").removeClass("qor-bottomsheets-open"))):void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON))},handleSelectMany:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(f),this.$bottomsheets=t,this.initItems()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t,e){var i;if(t.displayName=t.Text||t.Name||t.Title||t.Code||t[(i=Object.keys(t),1<i.length&&"ID"==i[0]?i[1]:i[0])],e)this.addItem(t,!0);else{var n=t.$clickElement;n.toggleClass(u),n.hasClass(u)?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData()}},destroy:function(){this.unbind(),this.$element.removeData(o)}},p.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',p.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new p(this,n))}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i)})},r(function(){var e='[data-toggle="qor.selectmany"]';r(document).on("disable.qor.selectone",function(t){p.plugin.call(r(e,t.target),"destroy")}).on(i,function(t){p.plugin.call(r(e,t.target))}).triggerHandler(i)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var i=r("body"),t=r(document),l=window.Mustache,o="qor.selectone",e="click."+o,n="enable."+o,s="reload.qor.bottomsheets",a=".qor-selected__remove",d=".qor-selected__change",c=".qor-field__selected",h=".qor-field__selectone-input",u=".qor-field__selectone-trigger",f=".qor-field__selectone",p="qor-bottomsheets__select-one";function m(t,e){this.$element=r(t),this.options=r.extend({},m.DEFAULTS,r.isPlainObject(e)&&e),this.init()}var g={lock:!1};return m.prototype={constructor:m,init:function(){this.$selectOneSelectedTemplate=this.$element.find('[name="select-one-selected-template"]'),this.$selectOneSelectedIconTemplate=this.$element.find('[name="select-one-selected-icon"]'),this.bind()},bind:function(){t.on(e,"[data-selectone-url]",this.openBottomSheets.bind(this)).on(s,"."+p,this.reloadData.bind(this)),this.$element.on(e,a,this.clearSelect.bind(this)).on(e,d,this.changeSelect)},unbind:function(){t.off(e,"[data-selectone-url]").off(s,"."+p),this.$element.off(e,a).off(e,d)},clearSelect:function(t){var e=r(t.target).closest(f);return e.find(c).remove(),e.find(h).html(""),e.find(h)[0].value="",e.find(u).show(),e.trigger("qor.selectone.unselected"),!1},changeSelect:function(){r(this).closest(f).find(u).trigger("click")},openBottomSheets:function(t){if(g.lock)return t.preventDefault(),!1;g.lock=!0,setTimeout(function(){g.lock=!1},3e3);var e=r(t.target);this.currentData=e.data(),this.BottomSheets=i.data("qor.bottomsheets"),this.$parent=e.closest(f),this.currentData.url=this.currentData.selectoneUrl,this.primaryField=this.currentData.remoteDataPrimaryKey,this.displayField=this.currentData.remoteDataDisplayKey,this.SELECT_ONE_SELECTED_ICON=this.$selectOneSelectedIconTemplate.html(),this.BottomSheets.open(this.currentData,this.handleSelectOne.bind(this))},initItem:function(){var t,e=this.$parent.find(c),i=this.currentData.remoteRecordeUrl;i&&this.$bottomsheets.find("tr[data-primary-key]").each(function(){var t=r(this).data();t.url=i.replace("{ID}",t.primaryKey)}),e.length&&(t=e.data().primaryKey)&&this.$bottomsheets.find('tr[data-primary-key="'+t+'"]').addClass("is_selected").find("td:first").append(this.SELECT_ONE_SELECTED_ICON)},reloadData:function(){this.initItem()},renderSelectOne:function(t){return l.render(this.$selectOneSelectedTemplate.html(),t)},handleSelectOne:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(p),this.$bottomsheets=t,this.initItem()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t){var e,i,n,o=this.$parent,s=o.find("select"),a=o.find(c);t.displayName=this.displayField?t[this.displayField]:t.Text||t.Name||t.Title||t.Code||(i=t,1<(n=Object.keys(i)).length&&"ID"===n[0]?n[1]:n[0]),t.selectoneValue=this.primaryField?t[this.primaryField]:t.primaryKey||t.ID,s.length&&(e=this.renderSelectOne(t),a.length&&a.remove(),o.prepend(e),o.find(u).hide(),s.html(l.render(m.SELECT_ONE_OPTION_TEMPLATE,t)),s[0].value=t.primaryKey||t.ID,o.trigger("qor.selectone.selected",[t]),this.$bottomsheets.qorSelectCore("destroy").remove(),r(".qor-bottomsheets").is(":visible")||r("body").removeClass("qor-bottomsheets-open"))},destroy:function(){this.unbind(),this.$element.removeData(o)}},m.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ selectoneValue ]]" selected>[[ displayName ]]</option>',m.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new m(this,n))}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i)})},r(function(){var e='[data-toggle="qor.selectone"]';r(document).on("disable.qor.selectone",function(t){m.plugin.call(r(e,t.target),"destroy")}).on(n,function(t){m.plugin.call(r(e,t.target))}).triggerHandler(n)}),m}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var t=d(document),s="qor.selector",i="enable."+s,e="click."+s,c="selected",h="disabled",a="clearable",r="."+c,u=".qor-selector-toggle",l=".qor-selector-label",f=".qor-selector-menu",p=".qor-bottomsheets";function m(t,e){this.options=e,this.$element=d(t),this.init()}return m.prototype={constructor:m,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var t=this.$element,e=d(m.TEMPLATE),i=this.options.aligned+"-aligned",r={},n=t.data(),o=n.hover,l=t.attr("name");this.isBottom="bottom"==n.position,o&&e.addClass("hover"),e.addClass(i).find(f).html(function(){var a=[];return t.children().each(function(){var t=d(this),e=t.attr("selected"),i=t.attr("disabled"),n=t.attr("value"),o=t.text(),s=[];e&&(s.push(c),r.value=n,r.label=o,r.paramName=l),i&&s.push(h),a.push("<li"+(s.length?' class="'+s.join(" ")+'"':"")+' data-value="'+n+'" data-label="'+o+'" data-param-name="'+l+'">'+o+"</li>")}),a.join("")}),this.$selector=e,t.hide().after(e),e.find(u).data("paramName",l),this.pick(r,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(e,d.proxy(this.click,this)),t.on(e,d.proxy(this.close,this))},unbind:function(){this.$selector.off(e,this.click),t.off(e,this.close)},click:function(t){var e=d(t.target);t.stopPropagation(),e.is(".qor-selector-clear")?this.clear():e.is("li")?(e.hasClass(c)||e.hasClass(h)||this.pick(e.data()),this.close()):e.closest(u).length&&this.open()},pick:function(t,e){var i=this.$selector,n=!!t.value,o=this.$element;i.find(u).toggleClass("active",n).toggleClass(a,n&&this.options.clearable).find(l).text(t.label||this.placeholder),e||(i.find(f).children('[data-value="'+t.value+'"]').addClass(c).siblings(r).removeClass(c),o.val(t.value),o.closest(p).length&&!o.closest('[data-toggle="qor.filter"]').length?d(p).trigger("selectorChanged.qor.selector",[t.value,t.paramName]):o.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(u).removeClass("active").removeClass(a).find(l).text(this.placeholder).end().end().find(f).children(r).removeClass(c),t.val("").trigger("change")},open:function(){t.triggerHandler(e),d(".qor-filter__dropdown").hide(),this.$selector.addClass("open"),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass("open"),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(s)}},m.DEFAULTS={aligned:"left",clearable:!1},m.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',m.plugin=function(o){return this.each(function(){var t,e,i=d(this),n=i.data(s);if(!n){if(/destroy/.test(o))return;t=d.extend({},m.DEFAULTS,i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(s,n=new m(this,t))}"string"==typeof o&&d.isFunction(e=n[o])&&e.apply(n)})},d(function(){var e='[data-toggle="qor.selector"]';d(document).on("disable.qor.selector",function(t){m.plugin.call(d(e,t.target),"destroy")}).on(i,function(t){m.plugin.call(d(e,t.target))}).triggerHandler(i)}),m}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(_){var t=_(document),n=window.FormData,o=window._,s="qor.slideout",e="keyup."+s,i="click."+s,a="submit."+s,w="shown."+s,$="hidden."+s,r="transitionend",l="qor-slideout-open",d="qor-slideout-mini",c="is-shown",h="is-slided",k=".qor-body__loading";function u(t,e){var i=[],n="href";return e&&(n="src"),t.each(function(){i.push(_(this).attr(n))}),o.uniq(i)}function f(t,e){var i=_.fn.qorSliderAfterShow;for(var n in i)i.hasOwnProperty(n)&&!i[n].isLoaded&&(i[n].isLoaded=!0,i[n].call(this,t,e))}function x(t,e,i){for(var n=0,o=0,s=t.length;o<s;o++){var a=document.createElement("script");a.onload=function(){++n===t.length&&_.isFunction(i)&&i(),e&&e.url&&e.response&&f(e.url,e.response)},a.src=t[o],document.body.appendChild(a)}}function C(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&C(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function D(t){var e=_("script"),i=u(t,!0),n=u(e,!0);return o.difference(i,n)}function T(t){var e=_("link"),i=u(t),n=u(e);return o.difference(i,n)}function p(t,e){this.$element=_(t),this.options=_.extend({},p.DEFAULTS,_.isPlainObject(e)&&e),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}return p.prototype={constructor:p,init:function(){this.build(),this.bind()},build:function(){var t;this.$slideout=t=_(p.TEMPLATE).appendTo("body"),this.$slideoutTemplate=t.html()},unbuild:function(){this.$slideout.remove()},bind:function(){this.$slideout.on(a,"form",this.submit.bind(this)).on(i,".qor-slideout__fullscreen",this.toggleSlideoutMode.bind(this)).on(i,'[data-dismiss="slideout"]',this.closeSlideout.bind(this)),t.on(e,_.proxy(this.keyup,this))},unbind:function(){this.$slideout.off(a,this.submit).off(i),t.off(e,this.keyup)},keyup:function(t){if(27===t.which){if(_(".qor-bottomsheets").is(":visible")||_(".qor-modal").is(":visible")||_("#redactor-modal-box").length||_("#dialog").is(":visible"))return;this.hide(),this.removeSelectedClass()}},loadExtraResource:function(t){var e=T(t.$links),i=D(t.$scripts);e.length&&C(e),i.length&&x(i,t)},removeSelectedClass:function(){this.$element.find("[data-url]").removeClass("is-selected")},addLoading:function(){_(k).remove(),_(p.TEMPLATE_LOADING).appendTo(_("body")).trigger("enable")},toggleSlideoutMode:function(){this.$slideout.toggleClass("qor-slideout__fullscreen").find(".qor-slideout__fullscreen i").toggle()},submit:function(t){var s=this.$slideout,o=this.$body,e=t.target,a=_(e),r=this,i=a.find(":submit");s.trigger("slideoutBeforeSend.qor.slideout"),n&&(t.preventDefault(),_.ajax(a.prop("action"),{method:a.prop("method"),data:new n(e),dataType:"html",processData:!1,contentType:!1,beforeSend:function(){i.prop("disabled",!0),_.fn.qorSlideoutBeforeHide=null},success:function(t){var e=a.data("returnUrl"),i=a.data("refreshUrl");if(s.trigger("slideoutSubmitComplete.qor.slideout"),i)window.location.href=i;else if("refresh"!=e)if(e&&"refresh"!=e)r.load(e);else{var n="/"+location.pathname.split("/")[1],o=[];_(t).find(".qor-alert").each(function(t,e){var i=_(e).find(".qor-alert-message").text().trim(),n=_(e).data("type");""!==i&&o.push({Type:n,Message:i,Keep:!0})}),0<o.length&&(document.cookie="qor-flashes="+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+"; path="+n),r.refresh()}else r.refresh()},error:function(t,e,i){var n;422===t.status?(o.find(".qor-error").remove(),a.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),n=_(t.responseText).find(".qor-error"),a.before(n),n.find("> li > label").each(function(){var t=_(this),e=t.attr("for");e&&a.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))}),s.scrollTop(0)):window.alert([e,i].join(": "))},complete:function(){i.prop("disabled",!1)}}))},load:function(m,g){var b,t,e,v,y=this.options,q=this.$slideout;m&&(g=_.isPlainObject(g)?g:{},b=g.method?g.method:"GET",t=g.datatype?g.datatype:"html",e=_.proxy(function(){_.ajax(m,{method:b,dataType:t,cache:!0,ifModified:!0,success:_.proxy(function(t){var e,i,n,o,s=void 0,a=void 0,r=void 0,l=void 0,d=void 0,c=void 0;if(_(k).remove(),"GET"===b){if(r=(a=(s=_(t)).find(".mdl-layout__content.qor-page")).find(".qor-form-container"),this.slideoutType=r.length&&r.data().slideoutType,!a.length)return;var h=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(h){h=h.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),c=_(h).prop("class"),_("body").addClass(c);var u={$scripts:s.filter("script"),$links:s.filter("link"),url:m,response:t};this.loadExtraResource(u)}if(a.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),l=D(a.find("script[src]")),d=T(a.find("link[href]")),l.length)x(l,{url:m,response:t},function(){});d.length&&C(d),a.find("script[src],link[href]").remove(),q.html(this.$slideoutTemplate),v=q.find(".qor-slideout__title"),this.$body=q.find(".qor-slideout__body"),v.html(s.find(y.title).html()),e=q.find(".qor-slideout__body")[0],i=a.html(),n="string"==typeof e?document.getElementById(e):e,(o=n.cloneNode(!1)).innerHTML=i,n.parentNode.replaceChild(o,n),this.$body.find(".qor-actions__locale").remove(),q.one(w,function(){_(this).trigger("enable")}).one($,function(){_(this).trigger("disable")}),q.find(".qor-slideout__opennew").attr("href",m),this.show();var f=_.fn.qorSliderAfterShow;if(f)for(var p in f)f.hasOwnProperty(p)&&_.isFunction(f[p])&&(f[p].isLoaded=!0,f[p].call(this,m,t));q.trigger("slideoutLoaded.qor.slideout",[m,t])}else g.returnUrl?this.load(g.returnUrl):this.refresh()},this),error:_.proxy(function(){var t;_(k).remove(),t=0<_(".qor-error span").length?_(".qor-error span").map(function(){return _(this).text()}).get().join(", "):"Server error, please try again later!",window.alert(t)},this)})},this),this.slided?(this.hide(!0),this.$slideout.one($,e)):e())},open:function(t){this.addLoading(),this.load(t.url,t.data)},reload:function(t){this.hide(!0),this.load(t)},show:function(){var t,e=this.$slideout;this.slided||(t=_.Event("show.qor.slideout"),e.trigger(t),t.isDefaultPrevented()||(e.removeClass(d),"mini"==this.slideoutType&&e.addClass(d),e.addClass(c).get(0).offsetWidth,e.one(r,_.proxy(this.shown,this)).addClass(h).scrollTop(0)))},shown:function(){this.slided=!0,_("body").addClass(l),this.$slideout.trigger("beforeEnable.qor.slideout").trigger(w).trigger("afterEnable.qor.slideout")},closeSlideout:function(){this.hide()},hide:function(e){var i=this;_.fn.qorSlideoutBeforeHide?window.QOR.qorConfirm({confirm:"You have unsaved changes on this slideout. If you close this slideout, you will lose all unsaved changes. Are you sure you want to close the slideout?"},function(t){t&&i.hideSlideout(e)}):this.hideSlideout(e),this.removeSelectedClass()},hideSlideout:function(t){var e,i=this.$slideout,n=_(".qor-datepicker").not(".hidden");window.onbeforeunload=null,_.fn.qorSlideoutBeforeHide=null,n.length&&n.addClass("hidden"),this.slided&&(e=_.Event("hide.qor.slideout"),i.trigger(e),e.isDefaultPrevented()||(i.one(r,_.proxy(this.hidden,this)).removeClass(h+" qor-slideout__fullscreen"),!t&&i.trigger("slideoutClosed.qor.slideout")))},hidden:function(){this.slided=!1,_("body").removeClass(l),this.$slideout.removeClass(c).trigger($)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},p.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},p.TEMPLATE='<div class="qor-slideout">\n            <div class="qor-slideout__header">\n                <div class="qor-slideout__header-link">\n                    <a href="#" target="_blank" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__opennew"><i class="material-icons">open_in_new</i></a>\n                    <a href="#" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__fullscreen">\n                        <i class="material-icons">fullscreen</i>\n                        <i class="material-icons" style="display: none;">fullscreen_exit</i>\n                    </a>\n                </div>\n                <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout">\n                    <span class="material-icons">close</span>\n                </button>\n                <h3 class="qor-slideout__title"></h3>\n            </div>\n            <div class="qor-slideout__body"></div>\n        </div>',p.TEMPLATE_LOADING='<div class="qor-body__loading">\n            <div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>\n        </div>',p.plugin=function(n){return this.each(function(){var t,e=_(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;e.data(s,i=new p(this,n))}"string"==typeof n&&_.isFunction(t=i[n])&&t.apply(i)})},_.fn.qorSlideout=p.plugin,p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var s=window.location,a="qor.sorter",t="enable."+a,e="click."+a,i="is-sortable";function r(t,e){this.$element=o(t),this.options=o.extend({},r.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){this.$element.addClass(i),this.bind()},bind:function(){this.$element.on(e,"> thead > tr > th",o.proxy(this.sort,this))},unbind:function(){this.$element.off(e,this.sort)},sort:function(t){var e=o(t.currentTarget).data("orderBy"),i=s.search,n="order_by="+e;e&&(/order_by/.test(i)?i=i.replace(/order_by(=\w+)?/,function(){return n}):i+=-1<i.indexOf("?")?"&"+n:n,s.search=i)},destroy:function(){this.unbind(),this.$element.removeClass(i).removeData(a)}},r.DEFAULTS={},r.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(a);if(!i){if(/destroy/.test(n))return;e.data(a,i=new r(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e=".qor-js-table";o(document).on("disable.qor.sorter",function(t){r.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(o(e,t.target))}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var e=window._,s=a("body"),o="qor.tabbar",t="enable."+o,i="click."+o,r=".qor-layout__tab-button",l=".qor-layout__tab-content",d=".mdl-layout__tab-bar-container",c=".qor-layout__tab-right",h=".qor-layout__tab-left",u="is-active";function f(t,e){this.$element=a(t),this.options=a.extend({},f.DEFAULTS,a.isPlainObject(e)&&e),this.init()}return f.prototype={constructor:f,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(i,r,this.switchTab.bind(this)),this.$element.on(i,c,this.scrollTabRight.bind(this)),this.$element.on(i,h,this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(i,r,this.switchTab),this.$element.off(i,c,this.scrollTabRight),this.$element.off(i,h,this.scrollTabLeft)},initTab:function(){var t=this.$element.data();t.scopeActive?s.data("tabScopeActive",t.scopeActive):(a(r).first().addClass(u),s.data("tabScopeActive",a(r).first().data("name"))),this.tabWidth=0,this.slideoutWidth=a(l).outerWidth(),e.each(a(r),function(t){this.tabWidth=this.tabWidth+a(t).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(d).append(f.ARROW_RIGHT)},scrollTabLeft:function(t){t.stopPropagation();var e=a(d),i=e.scrollLeft(),n=i-this.slideoutWidth;0<i&&e.animate({scrollLeft:n},400,function(){a(c).show(),0==e.scrollLeft()&&a(h).hide()})},scrollTabRight:function(t){t.stopPropagation();var e=a(d),i=e.scrollLeft(),n=this.tabWidth,o=this.slideoutWidth,s=i+o;s<n&&(e.animate({scrollLeft:s},400,function(){a(h).show(),e.scrollLeft()+o>=n&&a(c).hide()}),!a(h).length&&this.$element.find(d).prepend(f.ARROW_LEFT))},switchTab:function(t){var i=a(t.target),e=this.$element,n=i.data(),o=s.data().tabScopeActive;if(a(".qor-slideout").is(":visible"))return i.hasClass(u)||(e.find(r).removeClass(u),i.addClass(u),a.ajax(n.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){a(".qor-layout__tab-spinner").remove();a(l).hide().before('<div class="mdl-spinner mdl-js-spinner is-active qor-layout__tab-spinner"></div>'),window.componentHandler.upgradeElement(a(".qor-layout__tab-spinner")[0])},success:function(t){a(".qor-layout__tab-spinner").remove(),s.data("tabScopeActive",i.data("name"));var e=a(t).find(l).html();a(l).show().html(e).trigger("enable")},error:function(){a(".qor-layout__tab-spinner").remove(),s.data("tabScopeActive",o)}})),!1},destroy:function(){this.unbind(),s.removeData("tabScopeActive")}},f.ARROW_RIGHT='<a href="javascript://" class="qor-layout__tab-right"></a>',f.ARROW_LEFT='<a href="javascript://" class="qor-layout__tab-left"></a>',f.DEFAULTS={},f.plugin=function(n){return this.each(function(){var t,e=a(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new f(this,n))}"string"==typeof n&&a.isFunction(t=i[n])&&t.apply(i)})},a(function(){var e='[data-toggle="qor.tab"]';a(document).on("disable.qor.tabbar",function(t){f.plugin.call(a(e,t.target),"destroy")}).on(t,function(t){f.plugin.call(a(e,t.target))}).triggerHandler(t)}),f}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var a="qor.timepicker",t="enable."+a,e="click."+a,i="focus."+a,n="keydown."+a,o="blur."+a,r="selectTime."+a,l="[data-picker-type]";function d(t,e){this.$element=s(t),this.options=s.extend(!0,{},d.DEFAULTS,s.isPlainObject(e)&&e),this.formatDate=null,this.pickerData=this.$element.data(),this.targetInputClass=this.pickerData.targetInput,this.parent=this.$element.closest(l),this.isDateTimePicker=this.targetInputClass&&this.parent.length,this.$targetInput=this.parent.find(this.targetInputClass),this.init()}return d.prototype={init:function(){this.bind(),this.oldValue=this.$targetInput.val();var t=new Date,e=t.getMonth()+1,i=t.getDate();e=e<8?"0"+e:e,i=i<10?"0"+i:i,this.dateValueNow=t.getFullYear()+"-"+e+"-"+i},bind:function(){this.isDateTimePicker&&this.$targetInput.qorTimepicker({timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"}).on(r,s.proxy(this.changeTime,this)).on(o,s.proxy(this.blur,this)).on(i,s.proxy(this.focus,this)).on(n,s.proxy(this.keydown,this)),this.$element.on(e,s.proxy(this.show,this))},unbind:function(){this.$element.off(e,this.show),this.isDateTimePicker&&this.$targetInput.off(r,this.changeTime).off(o,this.blur).off(i,this.focus).off(n,this.keydown)},focus:function(){},blur:function(){var t,e,i,n,o,s,a=this.$targetInput.val(),r=a.split(" "),l=r.length,d=/\d{1,2}:\d{1,2}/,c=/^\d{4}-\d{1,2}-\d{1,2}/;if(a){if(1==l)c.test(r[0])&&(e=r[0],i="00:00"),d.test(r[0])&&(e=this.dateValueNow,i=r[0]);else for(var h=0;h<l;h++){n=c.test(r[h]),o=d.test(r[h]),n&&(e=r[h],s="-"),o&&(i=r[h],s=":"),t=r[h].split(s);for(var u=0;u<t.length;u++)t[u].length<2&&(t[u]="0"+t[u]);n&&(e=t.join(s)),o&&(i=t.join(s))}this.checkDate(e)&&this.checkTime(i)?(this.$targetInput.val(e+" "+i),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)}},keydown:function(t){var e=t.keyCode;-1==[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105].indexOf(e)&&t.preventDefault()},checkDate:function(t){return/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/.test(t)},checkTime:function(t){return/^([01]\d|2[0-3]):?([0-5]\d)$/.test(t)},changeTime:function(){var t,e=this.$targetInput,i=this.oldValue,n=/\d{1,2}:\d{1,2}/,o=n.test(i),s=e.data().timepickerList.find(".ui-timepicker-selected").html();t=i?o?i.replace(n,s):i+" "+s:this.dateValueNow+" "+s,e.val(t)},show:function(){this.isDateTimePicker&&(this.$targetInput.qorTimepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.qorTimepicker("remove"),this.$element.removeData(a)}},d.DEFAULTS={},d.plugin=function(o){return this.each(function(){var t,e,i=s(this),n=i.data(a);if(!n){if(!s.fn.qorDatepicker)return;if(/destroy/.test(o))return;t=s.extend(!0,{},i.data(),"object"===(void 0===o?"undefined":_typeof(o))&&o),i.data(a,n=new d(this,t))}"string"==typeof o&&s.isFunction(e=n[o])&&e.apply(n)})},s(function(){var e='[data-toggle="qor.timepicker"]';s(document).on("disable.qor.timepicker",function(t){d.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){d.plugin.call(s(e,t.target))}).triggerHandler(t)}),d}),$(function(){$(document).on("click.qor.alert",'[data-dismiss="alert"]',function(){$(this).closest(".qor-alert").remove()}),setTimeout(function(){$('.qor-alert[data-dismissible="true"]').remove()},5e3)}),$(function(){var i=$(".qor-page__body > .qor-form-container > form");$(".qor-error > li > label").each(function(){var t=$(this),e=t.attr("for");e&&i.find("#"+e).closest(".qor-field").addClass("is-error").append(t.clone().addClass("qor-field__error"))})}),$(function(){$(document).on("click",".qor-dialog--global-search",function(t){t.stopPropagation(),$(t.target).parents(".qor-dialog-content").length||$(t.target).is(".qor-dialog-content")||$(".qor-dialog--global-search").remove()}),$(document).on("click",".qor-global-search--show",function(t){t.preventDefault();var e=$(this).data(),i=window.Mustache.render('<div class="qor-dialog qor-dialog--global-search" tabindex="-1" role="dialog" aria-hidden="true"><div class="qor-dialog-content"><form action=[[actionUrl]]><div class="mdl-textfield mdl-js-textfield" id="global-search-textfield"><input class="mdl-textfield__input ignore-dirtyform" name="keyword" id="globalSearch" value="" type="text" placeholder="" /><label class="mdl-textfield__label" for="globalSearch">[[placeholder]]</label></div></form></div></div>',e);$("body").append(i),window.componentHandler.upgradeElement(document.getElementById("global-search-textfield")),$("#globalSearch").focus()})}),$(function(){var o=[],s="qoradmin_menu_status",t=localStorage.getItem(s);t&&t.length&&(o=t.split(",")),$(".qor-menu-container").on("click","> ul > li > a",function(){var t=$(this),e=t.parent(),i=t.next("ul"),n=e.attr("qor-icon-name");i.length&&(i.hasClass("in")?(o.push(n),e.removeClass("is-expanded"),i.one("transitionend",function(){i.removeClass("collapsing in")}).addClass("collapsing").height(0)):(o=_.without(o,n),e.addClass("is-expanded"),i.one("transitionend",function(){i.removeClass("collapsing")}).addClass("collapsing in").height(i.prop("scrollHeight"))),localStorage.setItem(s,o))}).find("> ul > li > a").each(function(){var t=$(this),e=t.parent(),i=t.next("ul"),n=e.attr("qor-icon-name");i.length&&(i.addClass("collapse"),e.addClass("has-menu"),-1!=o.indexOf(n)?i.height(0):(e.addClass("is-expanded"),i.addClass("in").height(i.prop("scrollHeight"))))});var e=$(".qor-page > .qor-page__header"),i=$(".qor-page > .qor-page__body"),n=e.find(".qor-page-subnav__header").length?96:48;e.length&&(e.height()>n&&i.css("padding-top",e.height()),$(".qor-page").addClass("has-header"),$("header.mdl-layout__header").addClass("has-action"))}),$(function(){$(".qor-mobile--show-actions").on("click",function(){$(".qor-page__header").toggleClass("actions-show")})}),$(function(){var f,p,m=$("body"),g="is-selected",b=function(){return m.hasClass("qor-bottomsheets-open")};function v(t){$("[data-url]").removeClass(g),t&&t.length&&t.addClass(g)}m.qorBottomSheets(),m.qorSlideout(),f=m.data("qor.slideout"),p=m.data("qor.bottomsheets"),$(document).on("click.qor.openUrl","[data-url]",function(t){var e,i,n,o=$(this),s=$(t.target),a=o.hasClass("qor-button--new"),r=o.hasClass("qor-button--edit"),l=(o.is(".qor-table tr[data-url]")||o.closest(".qor-js-table").length)&&!o.closest(".qor-slideout").length,d=o.data(),c=d.openType,h=o.parents(".qor-theme-slideout").length,u=(o.hasClass("qor-action-button")||o.hasClass("qor-action--button"))&&!c;if(!(s.closest(".qor-button--actions").length||!s.data("url")&&s.is("a")||l&&b()))return u&&(i=$(".qor-js-table tbody").find(".mdl-checkbox__input:checked"),n=[],(e=!!i.length&&(i.each(function(){n.push($(this).closest("tr").data("primary-key"))}),n))&&(d=$.extend({},d,{actionData:e}))),d.$target=s,d.method&&"GET"!=d.method.toUpperCase()?void 0:(u||"bottomsheet"==c?u&&!e&&o.closest('[data-toggle="qor.action.bulk"]').length?window.QOR.qorConfirm(d.errorNoItem):p.open(d):l||a&&!b()||r||"slideout"==c?h||"slideout"==c?o.hasClass(g)?(f.hide(),v()):(f.open(d),v(o)):window.location=d.url:m.hasClass("qor-slideout-open")||a&&b()?p.open(d):h?f.open(d):p.open(d),!1)})}),$(function(){var o=window.location;$(".qor-search").each(function(){var t=$(this),e=t.find(".qor-search__input"),i=t.find(".qor-search__clear"),n=!!e.val();t.closest(".qor-page__header").addClass("has-search"),$("header.mdl-layout__header").addClass("has-search"),i.on("click",function(){e.val()||n?"?"==o.search.replace(new RegExp(e.attr("name")+"\\=?\\w*"),"")?o.href=o.href.split("?")[0]:o.search=o.search.replace(new RegExp(e.attr("name")+"\\=?\\w*"),""):t.removeClass("is-dirty")})})});